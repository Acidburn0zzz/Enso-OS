/* ScreenSaver.c generated by valac 0.30.1, the Vala compiler
 * generated from ScreenSaver.vala, do not modify */

/**/
/*  Copyright (C) 2012 Jaap Broekhuizen*/
/**/
/*  This program is free software: you can redistribute it and/or modify*/
/*  it under the terms of the GNU General Public License as published by*/
/*  the Free Software Foundation, either version 3 of the License, or*/
/*  (at your option) any later version.*/
/**/
/*  This program is distributed in the hope that it will be useful,*/
/*  but WITHOUT ANY WARRANTY; without even the implied warranty of*/
/*  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the*/
/*  GNU General Public License for more details.*/
/**/
/*  You should have received a copy of the GNU General Public License*/
/*  along with this program.  If not, see <http://www.gnu.org/licenses/>.*/
/**/

#include <glib.h>
#include <glib-object.h>
#include <gio/gio.h>
#include <string.h>


#define GALA_TYPE_SCREEN_SAVER (gala_screen_saver_get_type ())
#define GALA_SCREEN_SAVER(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), GALA_TYPE_SCREEN_SAVER, GalaScreenSaver))
#define GALA_IS_SCREEN_SAVER(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), GALA_TYPE_SCREEN_SAVER))
#define GALA_SCREEN_SAVER_GET_INTERFACE(obj) (G_TYPE_INSTANCE_GET_INTERFACE ((obj), GALA_TYPE_SCREEN_SAVER, GalaScreenSaverIface))

typedef struct _GalaScreenSaver GalaScreenSaver;
typedef struct _GalaScreenSaverIface GalaScreenSaverIface;

#define GALA_TYPE_SCREEN_SAVER_PROXY (gala_screen_saver_proxy_get_type ())
typedef GDBusProxy GalaScreenSaverProxy;
typedef GDBusProxyClass GalaScreenSaverProxyClass;

struct _GalaScreenSaverIface {
	GTypeInterface parent_iface;
	gboolean (*get_active) (GalaScreenSaver* self, GError** error);
};



GType gala_screen_saver_proxy_get_type (void) G_GNUC_CONST;
guint gala_screen_saver_register_object (void* object, GDBusConnection* connection, const gchar* path, GError** error);
GType gala_screen_saver_get_type (void) G_GNUC_CONST;
gboolean gala_screen_saver_get_active (GalaScreenSaver* self, GError** error);
static void gala_screen_saver_proxy_g_signal (GDBusProxy* proxy, const gchar* sender_name, const gchar* signal_name, GVariant* parameters);
static void _dbus_handle_gala_screen_saver_active_changed (GalaScreenSaver* self, GVariant* parameters);
static gboolean gala_screen_saver_proxy_get_active (GalaScreenSaver* self, GError** error);
static void gala_screen_saver_proxy_gala_screen_saver_interface_init (GalaScreenSaverIface* iface);
static void _dbus_gala_screen_saver_get_active (GalaScreenSaver* self, GVariant* _parameters_, GDBusMethodInvocation* invocation);
static void gala_screen_saver_dbus_interface_method_call (GDBusConnection* connection, const gchar* sender, const gchar* object_path, const gchar* interface_name, const gchar* method_name, GVariant* parameters, GDBusMethodInvocation* invocation, gpointer user_data);
static GVariant* gala_screen_saver_dbus_interface_get_property (GDBusConnection* connection, const gchar* sender, const gchar* object_path, const gchar* interface_name, const gchar* property_name, GError** error, gpointer user_data);
static gboolean gala_screen_saver_dbus_interface_set_property (GDBusConnection* connection, const gchar* sender, const gchar* object_path, const gchar* interface_name, const gchar* property_name, GVariant* value, GError** error, gpointer user_data);
static void _dbus_gala_screen_saver_active_changed (GObject* _sender, gboolean active, gpointer* _data);
static void _gala_screen_saver_unregister_object (gpointer user_data);

static const GDBusArgInfo _gala_screen_saver_dbus_arg_info_get_active_result = {-1, "result", "b"};
static const GDBusArgInfo * const _gala_screen_saver_dbus_arg_info_get_active_in[] = {NULL};
static const GDBusArgInfo * const _gala_screen_saver_dbus_arg_info_get_active_out[] = {&_gala_screen_saver_dbus_arg_info_get_active_result, NULL};
static const GDBusMethodInfo _gala_screen_saver_dbus_method_info_get_active = {-1, "GetActive", (GDBusArgInfo **) (&_gala_screen_saver_dbus_arg_info_get_active_in), (GDBusArgInfo **) (&_gala_screen_saver_dbus_arg_info_get_active_out)};
static const GDBusMethodInfo * const _gala_screen_saver_dbus_method_info[] = {&_gala_screen_saver_dbus_method_info_get_active, NULL};
static const GDBusArgInfo _gala_screen_saver_dbus_arg_info_active_changed_active = {-1, "active", "b"};
static const GDBusArgInfo * const _gala_screen_saver_dbus_arg_info_active_changed[] = {&_gala_screen_saver_dbus_arg_info_active_changed_active, NULL};
static const GDBusSignalInfo _gala_screen_saver_dbus_signal_info_active_changed = {-1, "ActiveChanged", (GDBusArgInfo **) (&_gala_screen_saver_dbus_arg_info_active_changed)};
static const GDBusSignalInfo * const _gala_screen_saver_dbus_signal_info[] = {&_gala_screen_saver_dbus_signal_info_active_changed, NULL};
static const GDBusPropertyInfo * const _gala_screen_saver_dbus_property_info[] = {NULL};
static const GDBusInterfaceInfo _gala_screen_saver_dbus_interface_info = {-1, "org.gnome.ScreenSaver", (GDBusMethodInfo **) (&_gala_screen_saver_dbus_method_info), (GDBusSignalInfo **) (&_gala_screen_saver_dbus_signal_info), (GDBusPropertyInfo **) (&_gala_screen_saver_dbus_property_info)};
static const GDBusInterfaceVTable _gala_screen_saver_dbus_interface_vtable = {gala_screen_saver_dbus_interface_method_call, gala_screen_saver_dbus_interface_get_property, gala_screen_saver_dbus_interface_set_property};

gboolean gala_screen_saver_get_active (GalaScreenSaver* self, GError** error) {
#line 23 "/home/nick/work/gala/src/ScreenSaver.vala"
	g_return_val_if_fail (self != NULL, FALSE);
#line 23 "/home/nick/work/gala/src/ScreenSaver.vala"
	return GALA_SCREEN_SAVER_GET_INTERFACE (self)->get_active (self, error);
#line 80 "ScreenSaver.c"
}


static void gala_screen_saver_base_init (GalaScreenSaverIface * iface) {
#line 21 "/home/nick/work/gala/src/ScreenSaver.vala"
	static gboolean initialized = FALSE;
#line 21 "/home/nick/work/gala/src/ScreenSaver.vala"
	if (!initialized) {
#line 21 "/home/nick/work/gala/src/ScreenSaver.vala"
		initialized = TRUE;
#line 21 "/home/nick/work/gala/src/ScreenSaver.vala"
		g_signal_new ("active_changed", GALA_TYPE_SCREEN_SAVER, G_SIGNAL_RUN_LAST, 0, NULL, NULL, g_cclosure_marshal_VOID__BOOLEAN, G_TYPE_NONE, 1, G_TYPE_BOOLEAN);
#line 93 "ScreenSaver.c"
	}
}


GType gala_screen_saver_get_type (void) {
	static volatile gsize gala_screen_saver_type_id__volatile = 0;
	if (g_once_init_enter (&gala_screen_saver_type_id__volatile)) {
		static const GTypeInfo g_define_type_info = { sizeof (GalaScreenSaverIface), (GBaseInitFunc) gala_screen_saver_base_init, (GBaseFinalizeFunc) NULL, (GClassInitFunc) NULL, (GClassFinalizeFunc) NULL, NULL, 0, 0, (GInstanceInitFunc) NULL, NULL };
		GType gala_screen_saver_type_id;
		gala_screen_saver_type_id = g_type_register_static (G_TYPE_INTERFACE, "GalaScreenSaver", &g_define_type_info, 0);
		g_type_interface_add_prerequisite (gala_screen_saver_type_id, G_TYPE_OBJECT);
		g_type_set_qdata (gala_screen_saver_type_id, g_quark_from_static_string ("vala-dbus-proxy-type"), (void*) gala_screen_saver_proxy_get_type);
		g_type_set_qdata (gala_screen_saver_type_id, g_quark_from_static_string ("vala-dbus-interface-name"), "org.gnome.ScreenSaver");
		g_type_set_qdata (gala_screen_saver_type_id, g_quark_from_static_string ("vala-dbus-interface-info"), (void*) (&_gala_screen_saver_dbus_interface_info));
		g_type_set_qdata (gala_screen_saver_type_id, g_quark_from_static_string ("vala-dbus-register-object"), (void*) gala_screen_saver_register_object);
		g_once_init_leave (&gala_screen_saver_type_id__volatile, gala_screen_saver_type_id);
	}
	return gala_screen_saver_type_id__volatile;
}


G_DEFINE_TYPE_EXTENDED (GalaScreenSaverProxy, gala_screen_saver_proxy, G_TYPE_DBUS_PROXY, 0, G_IMPLEMENT_INTERFACE (GALA_TYPE_SCREEN_SAVER, gala_screen_saver_proxy_gala_screen_saver_interface_init) )
static void gala_screen_saver_proxy_class_init (GalaScreenSaverProxyClass* klass) {
#line 22 "/home/nick/work/gala/src/PluginManager.vala"
	G_DBUS_PROXY_CLASS (klass)->g_signal = gala_screen_saver_proxy_g_signal;
#line 119 "ScreenSaver.c"
}


static void _dbus_handle_gala_screen_saver_active_changed (GalaScreenSaver* self, GVariant* parameters) {
	GVariantIter _arguments_iter;
	gboolean active = FALSE;
	GVariant* _tmp49_;
#line 22 "/home/nick/work/gala/src/PluginManager.vala"
	g_variant_iter_init (&_arguments_iter, parameters);
#line 22 "/home/nick/work/gala/src/PluginManager.vala"
	_tmp49_ = g_variant_iter_next_value (&_arguments_iter);
#line 22 "/home/nick/work/gala/src/PluginManager.vala"
	active = g_variant_get_boolean (_tmp49_);
#line 22 "/home/nick/work/gala/src/PluginManager.vala"
	g_variant_unref (_tmp49_);
#line 22 "/home/nick/work/gala/src/PluginManager.vala"
	g_signal_emit_by_name (self, "active-changed", active);
#line 137 "ScreenSaver.c"
}


static void gala_screen_saver_proxy_g_signal (GDBusProxy* proxy, const gchar* sender_name, const gchar* signal_name, GVariant* parameters) {
#line 22 "/home/nick/work/gala/src/PluginManager.vala"
	if (strcmp (signal_name, "ActiveChanged") == 0) {
#line 22 "/home/nick/work/gala/src/PluginManager.vala"
		_dbus_handle_gala_screen_saver_active_changed ((GalaScreenSaver*) proxy, parameters);
#line 146 "ScreenSaver.c"
	}
}


static void gala_screen_saver_proxy_init (GalaScreenSaverProxy* self) {
}


static gboolean gala_screen_saver_proxy_get_active (GalaScreenSaver* self, GError** error) {
	GDBusMessage *_message;
	GVariant *_arguments;
	GVariantBuilder _arguments_builder;
	GDBusMessage *_reply_message;
	GVariant *_reply;
	GVariantIter _reply_iter;
	gboolean _result;
	GVariant* _tmp50_;
#line 22 "/home/nick/work/gala/src/PluginManager.vala"
	G_IO_ERROR;
#line 22 "/home/nick/work/gala/src/PluginManager.vala"
	_message = g_dbus_message_new_method_call (g_dbus_proxy_get_name ((GDBusProxy *) self), g_dbus_proxy_get_object_path ((GDBusProxy *) self), "org.gnome.ScreenSaver", "GetActive");
#line 22 "/home/nick/work/gala/src/PluginManager.vala"
	g_variant_builder_init (&_arguments_builder, G_VARIANT_TYPE_TUPLE);
#line 22 "/home/nick/work/gala/src/PluginManager.vala"
	_arguments = g_variant_builder_end (&_arguments_builder);
#line 22 "/home/nick/work/gala/src/PluginManager.vala"
	g_dbus_message_set_body (_message, _arguments);
#line 22 "/home/nick/work/gala/src/PluginManager.vala"
	_reply_message = g_dbus_connection_send_message_with_reply_sync (g_dbus_proxy_get_connection ((GDBusProxy *) self), _message, G_DBUS_SEND_MESSAGE_FLAGS_NONE, g_dbus_proxy_get_default_timeout ((GDBusProxy *) self), NULL, NULL, error);
#line 22 "/home/nick/work/gala/src/PluginManager.vala"
	g_object_unref (_message);
#line 22 "/home/nick/work/gala/src/PluginManager.vala"
	if (!_reply_message) {
#line 22 "/home/nick/work/gala/src/PluginManager.vala"
		return FALSE;
#line 182 "ScreenSaver.c"
	}
#line 22 "/home/nick/work/gala/src/PluginManager.vala"
	if (g_dbus_message_to_gerror (_reply_message, error)) {
#line 22 "/home/nick/work/gala/src/PluginManager.vala"
		g_object_unref (_reply_message);
#line 22 "/home/nick/work/gala/src/PluginManager.vala"
		return FALSE;
#line 190 "ScreenSaver.c"
	}
#line 22 "/home/nick/work/gala/src/PluginManager.vala"
	_reply = g_dbus_message_get_body (_reply_message);
#line 22 "/home/nick/work/gala/src/PluginManager.vala"
	g_variant_iter_init (&_reply_iter, _reply);
#line 22 "/home/nick/work/gala/src/PluginManager.vala"
	_tmp50_ = g_variant_iter_next_value (&_reply_iter);
#line 22 "/home/nick/work/gala/src/PluginManager.vala"
	_result = g_variant_get_boolean (_tmp50_);
#line 22 "/home/nick/work/gala/src/PluginManager.vala"
	g_variant_unref (_tmp50_);
#line 22 "/home/nick/work/gala/src/PluginManager.vala"
	g_object_unref (_reply_message);
#line 22 "/home/nick/work/gala/src/PluginManager.vala"
	return _result;
#line 206 "ScreenSaver.c"
}


static void gala_screen_saver_proxy_gala_screen_saver_interface_init (GalaScreenSaverIface* iface) {
#line 22 "/home/nick/work/gala/src/PluginManager.vala"
	iface->get_active = gala_screen_saver_proxy_get_active;
#line 213 "ScreenSaver.c"
}


static void _dbus_gala_screen_saver_get_active (GalaScreenSaver* self, GVariant* _parameters_, GDBusMethodInvocation* invocation) {
	GError* error = NULL;
	GVariantIter _arguments_iter;
	GDBusMessage* _reply_message;
	GVariant* _reply;
	GVariantBuilder _reply_builder;
	gboolean result;
#line 22 "/home/nick/work/gala/src/PluginManager.vala"
	g_variant_iter_init (&_arguments_iter, _parameters_);
#line 22 "/home/nick/work/gala/src/PluginManager.vala"
	result = gala_screen_saver_get_active (self, &error);
#line 22 "/home/nick/work/gala/src/PluginManager.vala"
	if (error) {
#line 22 "/home/nick/work/gala/src/PluginManager.vala"
		g_dbus_method_invocation_return_gerror (invocation, error);
#line 22 "/home/nick/work/gala/src/PluginManager.vala"
		return;
#line 234 "ScreenSaver.c"
	}
#line 22 "/home/nick/work/gala/src/PluginManager.vala"
	_reply_message = g_dbus_message_new_method_reply (g_dbus_method_invocation_get_message (invocation));
#line 22 "/home/nick/work/gala/src/PluginManager.vala"
	g_variant_builder_init (&_reply_builder, G_VARIANT_TYPE_TUPLE);
#line 22 "/home/nick/work/gala/src/PluginManager.vala"
	g_variant_builder_add_value (&_reply_builder, g_variant_new_boolean (result));
#line 22 "/home/nick/work/gala/src/PluginManager.vala"
	_reply = g_variant_builder_end (&_reply_builder);
#line 22 "/home/nick/work/gala/src/PluginManager.vala"
	g_dbus_message_set_body (_reply_message, _reply);
#line 22 "/home/nick/work/gala/src/PluginManager.vala"
	g_dbus_connection_send_message (g_dbus_method_invocation_get_connection (invocation), _reply_message, G_DBUS_SEND_MESSAGE_FLAGS_NONE, NULL, NULL);
#line 22 "/home/nick/work/gala/src/PluginManager.vala"
	g_object_unref (invocation);
#line 22 "/home/nick/work/gala/src/PluginManager.vala"
	g_object_unref (_reply_message);
#line 252 "ScreenSaver.c"
}


static void gala_screen_saver_dbus_interface_method_call (GDBusConnection* connection, const gchar* sender, const gchar* object_path, const gchar* interface_name, const gchar* method_name, GVariant* parameters, GDBusMethodInvocation* invocation, gpointer user_data) {
	gpointer* data;
	gpointer object;
	data = user_data;
	object = data[0];
#line 22 "/home/nick/work/gala/src/PluginManager.vala"
	if (strcmp (method_name, "GetActive") == 0) {
#line 22 "/home/nick/work/gala/src/PluginManager.vala"
		_dbus_gala_screen_saver_get_active (object, parameters, invocation);
#line 265 "ScreenSaver.c"
	} else {
#line 22 "/home/nick/work/gala/src/PluginManager.vala"
		g_object_unref (invocation);
#line 269 "ScreenSaver.c"
	}
}


static GVariant* gala_screen_saver_dbus_interface_get_property (GDBusConnection* connection, const gchar* sender, const gchar* object_path, const gchar* interface_name, const gchar* property_name, GError** error, gpointer user_data) {
	gpointer* data;
	gpointer object;
	data = user_data;
	object = data[0];
#line 22 "/home/nick/work/gala/src/PluginManager.vala"
	return NULL;
#line 281 "ScreenSaver.c"
}


static gboolean gala_screen_saver_dbus_interface_set_property (GDBusConnection* connection, const gchar* sender, const gchar* object_path, const gchar* interface_name, const gchar* property_name, GVariant* value, GError** error, gpointer user_data) {
	gpointer* data;
	gpointer object;
	data = user_data;
	object = data[0];
#line 22 "/home/nick/work/gala/src/PluginManager.vala"
	return FALSE;
#line 292 "ScreenSaver.c"
}


static void _dbus_gala_screen_saver_active_changed (GObject* _sender, gboolean active, gpointer* _data) {
	GDBusConnection * _connection;
	const gchar * _path;
	GVariant *_arguments;
	GVariantBuilder _arguments_builder;
	_connection = _data[1];
	_path = _data[2];
#line 22 "/home/nick/work/gala/src/PluginManager.vala"
	g_variant_builder_init (&_arguments_builder, G_VARIANT_TYPE_TUPLE);
#line 22 "/home/nick/work/gala/src/PluginManager.vala"
	g_variant_builder_add_value (&_arguments_builder, g_variant_new_boolean (active));
#line 22 "/home/nick/work/gala/src/PluginManager.vala"
	_arguments = g_variant_builder_end (&_arguments_builder);
#line 22 "/home/nick/work/gala/src/PluginManager.vala"
	g_dbus_connection_emit_signal (_connection, NULL, _path, "org.gnome.ScreenSaver", "ActiveChanged", _arguments, NULL);
#line 311 "ScreenSaver.c"
}


guint gala_screen_saver_register_object (gpointer object, GDBusConnection* connection, const gchar* path, GError** error) {
	guint result;
	gpointer *data;
#line 22 "/home/nick/work/gala/src/PluginManager.vala"
	data = g_new (gpointer, 3);
#line 22 "/home/nick/work/gala/src/PluginManager.vala"
	data[0] = g_object_ref (object);
#line 22 "/home/nick/work/gala/src/PluginManager.vala"
	data[1] = g_object_ref (connection);
#line 22 "/home/nick/work/gala/src/PluginManager.vala"
	data[2] = g_strdup (path);
#line 22 "/home/nick/work/gala/src/PluginManager.vala"
	result = g_dbus_connection_register_object (connection, path, (GDBusInterfaceInfo *) (&_gala_screen_saver_dbus_interface_info), &_gala_screen_saver_dbus_interface_vtable, data, _gala_screen_saver_unregister_object, error);
#line 22 "/home/nick/work/gala/src/PluginManager.vala"
	if (!result) {
#line 22 "/home/nick/work/gala/src/PluginManager.vala"
		return 0;
#line 332 "ScreenSaver.c"
	}
#line 22 "/home/nick/work/gala/src/PluginManager.vala"
	g_signal_connect (object, "active-changed", (GCallback) _dbus_gala_screen_saver_active_changed, data);
#line 22 "/home/nick/work/gala/src/PluginManager.vala"
	return result;
#line 338 "ScreenSaver.c"
}


static void _gala_screen_saver_unregister_object (gpointer user_data) {
	gpointer* data;
	data = user_data;
#line 22 "/home/nick/work/gala/src/PluginManager.vala"
	g_signal_handlers_disconnect_by_func (data[0], _dbus_gala_screen_saver_active_changed, data);
#line 22 "/home/nick/work/gala/src/PluginManager.vala"
	g_object_unref (data[0]);
#line 22 "/home/nick/work/gala/src/PluginManager.vala"
	g_object_unref (data[1]);
#line 22 "/home/nick/work/gala/src/PluginManager.vala"
	g_free (data[2]);
#line 22 "/home/nick/work/gala/src/PluginManager.vala"
	g_free (data);
#line 355 "ScreenSaver.c"
}



