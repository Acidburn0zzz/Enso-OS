/* Plugin.c generated by valac 0.30.1, the Vala compiler
 * generated from Plugin.vala, do not modify */

/**/
/*  Copyright (C) 2014 Tom Beckmann*/
/**/
/*  This program is free software: you can redistribute it and/or modify*/
/*  it under the terms of the GNU General Public License as published by*/
/*  the Free Software Foundation, either version 3 of the License, or*/
/*  (at your option) any later version.*/
/**/
/*  This program is distributed in the hope that it will be useful,*/
/*  but WITHOUT ANY WARRANTY; without even the implied warranty of*/
/*  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the*/
/*  GNU General Public License for more details.*/
/**/
/*  You should have received a copy of the GNU General Public License*/
/*  along with this program.  If not, see <http://www.gnu.org/licenses/>.*/
/**/

#include <glib.h>
#include <glib-object.h>
#include <stdlib.h>
#include <string.h>
#include <meta/meta-plugin.h>
#include <meta/window.h>
#include <meta/common.h>
#include <clutter/clutter.h>
#include <meta/meta-background-group.h>
#include <meta/boxes.h>
#include <float.h>
#include <math.h>


#define GALA_TYPE_PLUGIN_FUNCTION (gala_plugin_function_get_type ())

#define GALA_TYPE_LOAD_PRIORITY (gala_load_priority_get_type ())

#define GALA_TYPE_PLUGIN_INFO (gala_plugin_info_get_type ())
typedef struct _GalaPluginInfo GalaPluginInfo;
#define _g_free0(var) (var = (g_free (var), NULL))

#define GALA_TYPE_PLUGIN (gala_plugin_get_type ())
#define GALA_PLUGIN(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), GALA_TYPE_PLUGIN, GalaPlugin))
#define GALA_PLUGIN_CLASS(klass) (G_TYPE_CHECK_CLASS_CAST ((klass), GALA_TYPE_PLUGIN, GalaPluginClass))
#define GALA_IS_PLUGIN(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), GALA_TYPE_PLUGIN))
#define GALA_IS_PLUGIN_CLASS(klass) (G_TYPE_CHECK_CLASS_TYPE ((klass), GALA_TYPE_PLUGIN))
#define GALA_PLUGIN_GET_CLASS(obj) (G_TYPE_INSTANCE_GET_CLASS ((obj), GALA_TYPE_PLUGIN, GalaPluginClass))

typedef struct _GalaPlugin GalaPlugin;
typedef struct _GalaPluginClass GalaPluginClass;
typedef struct _GalaPluginPrivate GalaPluginPrivate;

#define GALA_TYPE_WINDOW_MANAGER (gala_window_manager_get_type ())
#define GALA_WINDOW_MANAGER(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), GALA_TYPE_WINDOW_MANAGER, GalaWindowManager))
#define GALA_IS_WINDOW_MANAGER(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), GALA_TYPE_WINDOW_MANAGER))
#define GALA_WINDOW_MANAGER_GET_INTERFACE(obj) (G_TYPE_INSTANCE_GET_INTERFACE ((obj), GALA_TYPE_WINDOW_MANAGER, GalaWindowManagerIface))

typedef struct _GalaWindowManager GalaWindowManager;
typedef struct _GalaWindowManagerIface GalaWindowManagerIface;

#define GALA_TYPE_MODAL_PROXY (gala_modal_proxy_get_type ())
#define GALA_MODAL_PROXY(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), GALA_TYPE_MODAL_PROXY, GalaModalProxy))
#define GALA_MODAL_PROXY_CLASS(klass) (G_TYPE_CHECK_CLASS_CAST ((klass), GALA_TYPE_MODAL_PROXY, GalaModalProxyClass))
#define GALA_IS_MODAL_PROXY(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), GALA_TYPE_MODAL_PROXY))
#define GALA_IS_MODAL_PROXY_CLASS(klass) (G_TYPE_CHECK_CLASS_TYPE ((klass), GALA_TYPE_MODAL_PROXY))
#define GALA_MODAL_PROXY_GET_CLASS(obj) (G_TYPE_INSTANCE_GET_CLASS ((obj), GALA_TYPE_MODAL_PROXY, GalaModalProxyClass))

typedef struct _GalaModalProxy GalaModalProxy;
typedef struct _GalaModalProxyClass GalaModalProxyClass;

#define GALA_TYPE_ACTION_TYPE (gala_action_type_get_type ())
#define __g_list_free__g_object_unref0_0(var) ((var == NULL) ? NULL : (var = (_g_list_free__g_object_unref0_ (var), NULL)))
#define _g_object_unref0(var) ((var == NULL) ? NULL : (var = (g_object_unref (var), NULL)))

typedef enum  {
	GALA_PLUGIN_FUNCTION_ADDITION,
	GALA_PLUGIN_FUNCTION_WINDOW_SWITCHER,
	GALA_PLUGIN_FUNCTION_DESKTOP,
	GALA_PLUGIN_FUNCTION_WORKSPACE_VIEW,
	GALA_PLUGIN_FUNCTION_WINDOW_OVERVIEW
} GalaPluginFunction;

typedef enum  {
	GALA_LOAD_PRIORITY_IMMEDIATE,
	GALA_LOAD_PRIORITY_DEFERRED
} GalaLoadPriority;

struct _GalaPluginInfo {
	gchar* name;
	gchar* author;
	GType plugin_type;
	GalaPluginFunction provides;
	GalaLoadPriority load_priority;
	gchar* module_name;
};

typedef enum  {
	GALA_ACTION_TYPE_NONE = 0,
	GALA_ACTION_TYPE_SHOW_WORKSPACE_VIEW,
	GALA_ACTION_TYPE_MAXIMIZE_CURRENT,
	GALA_ACTION_TYPE_MINIMIZE_CURRENT,
	GALA_ACTION_TYPE_MINIMIZE_ALL,
	GALA_ACTION_TYPE_OPEN_LAUNCHER,
	GALA_ACTION_TYPE_CUSTOM_COMMAND,
	GALA_ACTION_TYPE_WINDOW_OVERVIEW,
	GALA_ACTION_TYPE_WINDOW_OVERVIEW_ALL
} GalaActionType;

struct _GalaWindowManagerIface {
	GTypeInterface parent_iface;
	GalaModalProxy* (*push_modal) (GalaWindowManager* self);
	void (*pop_modal) (GalaWindowManager* self, GalaModalProxy* proxy);
	gboolean (*is_modal) (GalaWindowManager* self);
	gboolean (*modal_proxy_valid) (GalaWindowManager* self, GalaModalProxy* proxy);
	void (*perform_action) (GalaWindowManager* self, GalaActionType type);
	void (*move_window) (GalaWindowManager* self, MetaWindow* window, MetaMotionDirection direction);
	void (*switch_to_next_workspace) (GalaWindowManager* self, MetaMotionDirection direction);
	ClutterActor* (*get_ui_group) (GalaWindowManager* self);
	void (*set_ui_group) (GalaWindowManager* self, ClutterActor* value);
	ClutterStage* (*get_stage) (GalaWindowManager* self);
	void (*set_stage) (GalaWindowManager* self, ClutterStage* value);
	ClutterActor* (*get_window_group) (GalaWindowManager* self);
	void (*set_window_group) (GalaWindowManager* self, ClutterActor* value);
	ClutterActor* (*get_top_window_group) (GalaWindowManager* self);
	void (*set_top_window_group) (GalaWindowManager* self, ClutterActor* value);
	MetaBackgroundGroup* (*get_background_group) (GalaWindowManager* self);
	void (*set_background_group) (GalaWindowManager* self, MetaBackgroundGroup* value);
};

struct _GalaPlugin {
	GObject parent_instance;
	GalaPluginPrivate * priv;
};

struct _GalaPluginClass {
	GObjectClass parent_class;
	void (*initialize) (GalaPlugin* self, GalaWindowManager* wm);
	void (*destroy) (GalaPlugin* self);
};

struct _GalaPluginPrivate {
	MetaRectangle* _region;
	gint _region_length1;
	gint __region_size_;
	gboolean _freeze_track;
	MetaRectangle* _custom_region;
	gint _custom_region_length1;
	gint __custom_region_size_;
	GList* tracked_actors;
};


static gpointer gala_plugin_parent_class = NULL;

GType gala_plugin_function_get_type (void) G_GNUC_CONST;
GType gala_load_priority_get_type (void) G_GNUC_CONST;
GType gala_plugin_info_get_type (void) G_GNUC_CONST;
GalaPluginInfo* gala_plugin_info_dup (const GalaPluginInfo* self);
void gala_plugin_info_free (GalaPluginInfo* self);
void gala_plugin_info_copy (const GalaPluginInfo* self, GalaPluginInfo* dest);
void gala_plugin_info_destroy (GalaPluginInfo* self);
GType gala_plugin_get_type (void) G_GNUC_CONST;
GType gala_modal_proxy_get_type (void) G_GNUC_CONST;
GType gala_action_type_get_type (void) G_GNUC_CONST;
GType gala_window_manager_get_type (void) G_GNUC_CONST;
#define GALA_PLUGIN_GET_PRIVATE(o) (G_TYPE_INSTANCE_GET_PRIVATE ((o), GALA_TYPE_PLUGIN, GalaPluginPrivate))
enum  {
	GALA_PLUGIN_DUMMY_PROPERTY,
	GALA_PLUGIN_FREEZE_TRACK
};
static void _g_object_unref0_ (gpointer var);
static void _g_list_free__g_object_unref0_ (GList* self);
void gala_plugin_initialize (GalaPlugin* self, GalaWindowManager* wm);
static void gala_plugin_real_initialize (GalaPlugin* self, GalaWindowManager* wm);
void gala_plugin_destroy (GalaPlugin* self);
static void gala_plugin_real_destroy (GalaPlugin* self);
void gala_plugin_track_actor (GalaPlugin* self, ClutterActor* actor);
static void gala_plugin_actor_allocation_changed (GalaPlugin* self, ClutterActorBox* box, ClutterAllocationFlags f);
static void _gala_plugin_actor_allocation_changed_clutter_actor_allocation_changed (ClutterActor* _sender, ClutterActorBox* box, ClutterAllocationFlags flags, gpointer self);
void gala_plugin_update_region (GalaPlugin* self);
void gala_plugin_untrack_actor (GalaPlugin* self, ClutterActor* actor);
MetaRectangle* gala_plugin_get_custom_region (GalaPlugin* self, int* result_length1);
static void gala_plugin_set_region (GalaPlugin* self, MetaRectangle* value, int value_length1);
gboolean gala_plugin_get_freeze_track (GalaPlugin* self);
GalaPlugin* gala_plugin_construct (GType object_type);
MetaRectangle* gala_plugin_get_region (GalaPlugin* self, int* result_length1);
static MetaRectangle* _vala_array_dup1 (MetaRectangle* self, int length);
void gala_plugin_set_custom_region (GalaPlugin* self, MetaRectangle* value, int value_length1);
static MetaRectangle* _vala_array_dup2 (MetaRectangle* self, int length);
void gala_plugin_set_freeze_track (GalaPlugin* self, gboolean value);
static void gala_plugin_finalize (GObject* obj);
static void _vala_gala_plugin_get_property (GObject * object, guint property_id, GValue * value, GParamSpec * pspec);
static void _vala_gala_plugin_set_property (GObject * object, guint property_id, const GValue * value, GParamSpec * pspec);


GType gala_plugin_function_get_type (void) {
	static volatile gsize gala_plugin_function_type_id__volatile = 0;
	if (g_once_init_enter (&gala_plugin_function_type_id__volatile)) {
		static const GEnumValue values[] = {{GALA_PLUGIN_FUNCTION_ADDITION, "GALA_PLUGIN_FUNCTION_ADDITION", "addition"}, {GALA_PLUGIN_FUNCTION_WINDOW_SWITCHER, "GALA_PLUGIN_FUNCTION_WINDOW_SWITCHER", "window-switcher"}, {GALA_PLUGIN_FUNCTION_DESKTOP, "GALA_PLUGIN_FUNCTION_DESKTOP", "desktop"}, {GALA_PLUGIN_FUNCTION_WORKSPACE_VIEW, "GALA_PLUGIN_FUNCTION_WORKSPACE_VIEW", "workspace-view"}, {GALA_PLUGIN_FUNCTION_WINDOW_OVERVIEW, "GALA_PLUGIN_FUNCTION_WINDOW_OVERVIEW", "window-overview"}, {0, NULL, NULL}};
		GType gala_plugin_function_type_id;
		gala_plugin_function_type_id = g_enum_register_static ("GalaPluginFunction", values);
		g_once_init_leave (&gala_plugin_function_type_id__volatile, gala_plugin_function_type_id);
	}
	return gala_plugin_function_type_id__volatile;
}


GType gala_load_priority_get_type (void) {
	static volatile gsize gala_load_priority_type_id__volatile = 0;
	if (g_once_init_enter (&gala_load_priority_type_id__volatile)) {
		static const GEnumValue values[] = {{GALA_LOAD_PRIORITY_IMMEDIATE, "GALA_LOAD_PRIORITY_IMMEDIATE", "immediate"}, {GALA_LOAD_PRIORITY_DEFERRED, "GALA_LOAD_PRIORITY_DEFERRED", "deferred"}, {0, NULL, NULL}};
		GType gala_load_priority_type_id;
		gala_load_priority_type_id = g_enum_register_static ("GalaLoadPriority", values);
		g_once_init_leave (&gala_load_priority_type_id__volatile, gala_load_priority_type_id);
	}
	return gala_load_priority_type_id__volatile;
}


void gala_plugin_info_copy (const GalaPluginInfo* self, GalaPluginInfo* dest) {
	const gchar* _tmp0_ = NULL;
	gchar* _tmp1_ = NULL;
	const gchar* _tmp2_ = NULL;
	gchar* _tmp3_ = NULL;
	GType _tmp4_ = 0UL;
	GalaPluginFunction _tmp5_ = 0;
	GalaLoadPriority _tmp6_ = 0;
	const gchar* _tmp7_ = NULL;
	gchar* _tmp8_ = NULL;
#line 42 "/home/nick/work/Enso-OS/galal/lib/Plugin.vala"
	_tmp0_ = (*self).name;
#line 42 "/home/nick/work/Enso-OS/galal/lib/Plugin.vala"
	_tmp1_ = g_strdup (_tmp0_);
#line 42 "/home/nick/work/Enso-OS/galal/lib/Plugin.vala"
	_g_free0 ((*dest).name);
#line 42 "/home/nick/work/Enso-OS/galal/lib/Plugin.vala"
	(*dest).name = _tmp1_;
#line 42 "/home/nick/work/Enso-OS/galal/lib/Plugin.vala"
	_tmp2_ = (*self).author;
#line 42 "/home/nick/work/Enso-OS/galal/lib/Plugin.vala"
	_tmp3_ = g_strdup (_tmp2_);
#line 42 "/home/nick/work/Enso-OS/galal/lib/Plugin.vala"
	_g_free0 ((*dest).author);
#line 42 "/home/nick/work/Enso-OS/galal/lib/Plugin.vala"
	(*dest).author = _tmp3_;
#line 42 "/home/nick/work/Enso-OS/galal/lib/Plugin.vala"
	_tmp4_ = (*self).plugin_type;
#line 42 "/home/nick/work/Enso-OS/galal/lib/Plugin.vala"
	(*dest).plugin_type = _tmp4_;
#line 42 "/home/nick/work/Enso-OS/galal/lib/Plugin.vala"
	_tmp5_ = (*self).provides;
#line 42 "/home/nick/work/Enso-OS/galal/lib/Plugin.vala"
	(*dest).provides = _tmp5_;
#line 42 "/home/nick/work/Enso-OS/galal/lib/Plugin.vala"
	_tmp6_ = (*self).load_priority;
#line 42 "/home/nick/work/Enso-OS/galal/lib/Plugin.vala"
	(*dest).load_priority = _tmp6_;
#line 42 "/home/nick/work/Enso-OS/galal/lib/Plugin.vala"
	_tmp7_ = (*self).module_name;
#line 42 "/home/nick/work/Enso-OS/galal/lib/Plugin.vala"
	_tmp8_ = g_strdup (_tmp7_);
#line 42 "/home/nick/work/Enso-OS/galal/lib/Plugin.vala"
	_g_free0 ((*dest).module_name);
#line 42 "/home/nick/work/Enso-OS/galal/lib/Plugin.vala"
	(*dest).module_name = _tmp8_;
#line 268 "Plugin.c"
}


void gala_plugin_info_destroy (GalaPluginInfo* self) {
#line 44 "/home/nick/work/Enso-OS/galal/lib/Plugin.vala"
	_g_free0 ((*self).name);
#line 45 "/home/nick/work/Enso-OS/galal/lib/Plugin.vala"
	_g_free0 ((*self).author);
#line 70 "/home/nick/work/Enso-OS/galal/lib/Plugin.vala"
	_g_free0 ((*self).module_name);
#line 279 "Plugin.c"
}


GalaPluginInfo* gala_plugin_info_dup (const GalaPluginInfo* self) {
	GalaPluginInfo* dup;
#line 42 "/home/nick/work/Enso-OS/galal/lib/Plugin.vala"
	dup = g_new0 (GalaPluginInfo, 1);
#line 42 "/home/nick/work/Enso-OS/galal/lib/Plugin.vala"
	gala_plugin_info_copy (self, dup);
#line 42 "/home/nick/work/Enso-OS/galal/lib/Plugin.vala"
	return dup;
#line 291 "Plugin.c"
}


void gala_plugin_info_free (GalaPluginInfo* self) {
#line 42 "/home/nick/work/Enso-OS/galal/lib/Plugin.vala"
	gala_plugin_info_destroy (self);
#line 42 "/home/nick/work/Enso-OS/galal/lib/Plugin.vala"
	g_free (self);
#line 300 "Plugin.c"
}


GType gala_plugin_info_get_type (void) {
	static volatile gsize gala_plugin_info_type_id__volatile = 0;
	if (g_once_init_enter (&gala_plugin_info_type_id__volatile)) {
		GType gala_plugin_info_type_id;
		gala_plugin_info_type_id = g_boxed_type_register_static ("GalaPluginInfo", (GBoxedCopyFunc) gala_plugin_info_dup, (GBoxedFreeFunc) gala_plugin_info_free);
		g_once_init_leave (&gala_plugin_info_type_id__volatile, gala_plugin_info_type_id);
	}
	return gala_plugin_info_type_id__volatile;
}


static void _g_object_unref0_ (gpointer var) {
#line 130 "/home/nick/work/Enso-OS/galal/lib/Plugin.vala"
	(var == NULL) ? NULL : (var = (g_object_unref (var), NULL));
#line 318 "Plugin.c"
}


static void _g_list_free__g_object_unref0_ (GList* self) {
#line 130 "/home/nick/work/Enso-OS/galal/lib/Plugin.vala"
	g_list_foreach (self, (GFunc) _g_object_unref0_, NULL);
#line 130 "/home/nick/work/Enso-OS/galal/lib/Plugin.vala"
	g_list_free (self);
#line 327 "Plugin.c"
}


/**
 * Once this method is called you can start adding actors to the stage
 * via the windowmanager instance that is given to you.
 *
 * @param wm The window manager.
 */
static void gala_plugin_real_initialize (GalaPlugin* self, GalaWindowManager* wm) {
#line 138 "/home/nick/work/Enso-OS/galal/lib/Plugin.vala"
	g_critical ("Type `%s' does not implement abstract method `gala_plugin_initialize'", g_type_name (G_TYPE_FROM_INSTANCE (self)));
#line 138 "/home/nick/work/Enso-OS/galal/lib/Plugin.vala"
	return;
#line 342 "Plugin.c"
}


void gala_plugin_initialize (GalaPlugin* self, GalaWindowManager* wm) {
#line 138 "/home/nick/work/Enso-OS/galal/lib/Plugin.vala"
	g_return_if_fail (self != NULL);
#line 138 "/home/nick/work/Enso-OS/galal/lib/Plugin.vala"
	GALA_PLUGIN_GET_CLASS (self)->initialize (self, wm);
#line 351 "Plugin.c"
}


/**
 * This method is currently not called in the code, however you should
 * still implement it to be compatible whenever we decide to use it.
 * It should make sure that everything your plugin added to the stage
 * is cleaned up.
 */
static void gala_plugin_real_destroy (GalaPlugin* self) {
#line 146 "/home/nick/work/Enso-OS/galal/lib/Plugin.vala"
	g_critical ("Type `%s' does not implement abstract method `gala_plugin_destroy'", g_type_name (G_TYPE_FROM_INSTANCE (self)));
#line 146 "/home/nick/work/Enso-OS/galal/lib/Plugin.vala"
	return;
#line 366 "Plugin.c"
}


void gala_plugin_destroy (GalaPlugin* self) {
#line 146 "/home/nick/work/Enso-OS/galal/lib/Plugin.vala"
	g_return_if_fail (self != NULL);
#line 146 "/home/nick/work/Enso-OS/galal/lib/Plugin.vala"
	GALA_PLUGIN_GET_CLASS (self)->destroy (self);
#line 375 "Plugin.c"
}


/**
 * Listen to changes to the allocation of actor and update the region
 * accordingly. You may add multiple actors, their shapes will be
 * combined when one of them changes.
 *
 * @param actor The actor to be tracked
 */
static gpointer _g_object_ref0 (gpointer self) {
#line 157 "/home/nick/work/Enso-OS/galal/lib/Plugin.vala"
	return self ? g_object_ref (self) : NULL;
#line 389 "Plugin.c"
}


static void _gala_plugin_actor_allocation_changed_clutter_actor_allocation_changed (ClutterActor* _sender, ClutterActorBox* box, ClutterAllocationFlags flags, gpointer self) {
#line 158 "/home/nick/work/Enso-OS/galal/lib/Plugin.vala"
	gala_plugin_actor_allocation_changed ((GalaPlugin*) self, box, flags);
#line 396 "Plugin.c"
}


void gala_plugin_track_actor (GalaPlugin* self, ClutterActor* actor) {
	ClutterActor* _tmp0_ = NULL;
	ClutterActor* _tmp1_ = NULL;
	ClutterActor* _tmp2_ = NULL;
#line 155 "/home/nick/work/Enso-OS/galal/lib/Plugin.vala"
	g_return_if_fail (self != NULL);
#line 155 "/home/nick/work/Enso-OS/galal/lib/Plugin.vala"
	g_return_if_fail (actor != NULL);
#line 157 "/home/nick/work/Enso-OS/galal/lib/Plugin.vala"
	_tmp0_ = actor;
#line 157 "/home/nick/work/Enso-OS/galal/lib/Plugin.vala"
	_tmp1_ = _g_object_ref0 (_tmp0_);
#line 157 "/home/nick/work/Enso-OS/galal/lib/Plugin.vala"
	self->priv->tracked_actors = g_list_prepend (self->priv->tracked_actors, _tmp1_);
#line 158 "/home/nick/work/Enso-OS/galal/lib/Plugin.vala"
	_tmp2_ = actor;
#line 158 "/home/nick/work/Enso-OS/galal/lib/Plugin.vala"
	g_signal_connect_object (_tmp2_, "allocation-changed", (GCallback) _gala_plugin_actor_allocation_changed_clutter_actor_allocation_changed, self, 0);
#line 160 "/home/nick/work/Enso-OS/galal/lib/Plugin.vala"
	gala_plugin_update_region (self);
#line 420 "Plugin.c"
}


/**
 * Stop listening to allocation changes and remove the actor's
 * allocation from the region array.
 *
 * @param actor The actor to stop listening the changes on
 */
void gala_plugin_untrack_actor (GalaPlugin* self, ClutterActor* actor) {
	ClutterActor* _tmp0_ = NULL;
	ClutterActor* _tmp1_ = NULL;
	guint _tmp2_ = 0U;
#line 169 "/home/nick/work/Enso-OS/galal/lib/Plugin.vala"
	g_return_if_fail (self != NULL);
#line 169 "/home/nick/work/Enso-OS/galal/lib/Plugin.vala"
	g_return_if_fail (actor != NULL);
#line 171 "/home/nick/work/Enso-OS/galal/lib/Plugin.vala"
	_tmp0_ = actor;
#line 171 "/home/nick/work/Enso-OS/galal/lib/Plugin.vala"
	self->priv->tracked_actors = g_list_remove (self->priv->tracked_actors, _tmp0_);
#line 172 "/home/nick/work/Enso-OS/galal/lib/Plugin.vala"
	_tmp1_ = actor;
#line 172 "/home/nick/work/Enso-OS/galal/lib/Plugin.vala"
	g_signal_parse_name ("allocation-changed", clutter_actor_get_type (), &_tmp2_, NULL, FALSE);
#line 172 "/home/nick/work/Enso-OS/galal/lib/Plugin.vala"
	g_signal_handlers_disconnect_matched (_tmp1_, G_SIGNAL_MATCH_ID | G_SIGNAL_MATCH_FUNC | G_SIGNAL_MATCH_DATA, _tmp2_, 0, NULL, (GCallback) _gala_plugin_actor_allocation_changed_clutter_actor_allocation_changed, self);
#line 448 "Plugin.c"
}


/**
 * You can call this method to force the system to update the region that
 * is used by the window manager. It will automatically upon changes to
 * the custom_region property and when a tracked actor's allocation changes
 * unless freeze_track is set to true. You may need to call this function
 * after setting freeze_track back to false after an animation to make the
 * wm aware of the new position of the actor in question.
 */
void gala_plugin_update_region (GalaPlugin* self) {
	gboolean has_custom = FALSE;
	MetaRectangle* _tmp0_ = NULL;
	gint _tmp0__length1 = 0;
	MetaRectangle* _tmp1_ = NULL;
	gint _tmp1__length1 = 0;
	gint _tmp2_ = 0;
	gboolean _tmp3_ = FALSE;
	guint len = 0U;
	GList* _tmp6_ = NULL;
	guint _tmp7_ = 0U;
	MetaRectangle* regions = NULL;
	guint _tmp8_ = 0U;
	MetaRectangle* _tmp9_ = NULL;
	gint regions_length1 = 0;
	gint _regions_size_ = 0;
	gint i = 0;
	gboolean _tmp10_ = FALSE;
	GList* _tmp23_ = NULL;
	MetaRectangle* _tmp42_ = NULL;
	gint _tmp42__length1 = 0;
#line 183 "/home/nick/work/Enso-OS/galal/lib/Plugin.vala"
	g_return_if_fail (self != NULL);
#line 185 "/home/nick/work/Enso-OS/galal/lib/Plugin.vala"
	_tmp0_ = gala_plugin_get_custom_region (self, &_tmp0__length1);
#line 185 "/home/nick/work/Enso-OS/galal/lib/Plugin.vala"
	_tmp1_ = _tmp0_;
#line 185 "/home/nick/work/Enso-OS/galal/lib/Plugin.vala"
	_tmp1__length1 = _tmp0__length1;
#line 185 "/home/nick/work/Enso-OS/galal/lib/Plugin.vala"
	has_custom = _tmp1_ != NULL;
#line 186 "/home/nick/work/Enso-OS/galal/lib/Plugin.vala"
	_tmp3_ = has_custom;
#line 186 "/home/nick/work/Enso-OS/galal/lib/Plugin.vala"
	if (_tmp3_) {
#line 495 "Plugin.c"
		MetaRectangle* _tmp4_ = NULL;
		gint _tmp4__length1 = 0;
		MetaRectangle* _tmp5_ = NULL;
		gint _tmp5__length1 = 0;
#line 186 "/home/nick/work/Enso-OS/galal/lib/Plugin.vala"
		_tmp4_ = gala_plugin_get_custom_region (self, &_tmp4__length1);
#line 186 "/home/nick/work/Enso-OS/galal/lib/Plugin.vala"
		_tmp5_ = _tmp4_;
#line 186 "/home/nick/work/Enso-OS/galal/lib/Plugin.vala"
		_tmp5__length1 = _tmp4__length1;
#line 186 "/home/nick/work/Enso-OS/galal/lib/Plugin.vala"
		_tmp2_ = _tmp5__length1;
#line 508 "Plugin.c"
	} else {
#line 186 "/home/nick/work/Enso-OS/galal/lib/Plugin.vala"
		_tmp2_ = 0;
#line 512 "Plugin.c"
	}
#line 186 "/home/nick/work/Enso-OS/galal/lib/Plugin.vala"
	_tmp6_ = self->priv->tracked_actors;
#line 186 "/home/nick/work/Enso-OS/galal/lib/Plugin.vala"
	_tmp7_ = g_list_length (_tmp6_);
#line 186 "/home/nick/work/Enso-OS/galal/lib/Plugin.vala"
	len = _tmp7_ + _tmp2_;
#line 188 "/home/nick/work/Enso-OS/galal/lib/Plugin.vala"
	_tmp8_ = len;
#line 188 "/home/nick/work/Enso-OS/galal/lib/Plugin.vala"
	_tmp9_ = g_new0 (MetaRectangle, _tmp8_);
#line 188 "/home/nick/work/Enso-OS/galal/lib/Plugin.vala"
	regions = _tmp9_;
#line 188 "/home/nick/work/Enso-OS/galal/lib/Plugin.vala"
	regions_length1 = _tmp8_;
#line 188 "/home/nick/work/Enso-OS/galal/lib/Plugin.vala"
	_regions_size_ = regions_length1;
#line 189 "/home/nick/work/Enso-OS/galal/lib/Plugin.vala"
	i = 0;
#line 191 "/home/nick/work/Enso-OS/galal/lib/Plugin.vala"
	_tmp10_ = has_custom;
#line 191 "/home/nick/work/Enso-OS/galal/lib/Plugin.vala"
	if (_tmp10_) {
#line 536 "Plugin.c"
		{
			gint j = 0;
#line 192 "/home/nick/work/Enso-OS/galal/lib/Plugin.vala"
			j = 0;
#line 541 "Plugin.c"
			{
				gboolean _tmp11_ = FALSE;
#line 192 "/home/nick/work/Enso-OS/galal/lib/Plugin.vala"
				_tmp11_ = TRUE;
#line 192 "/home/nick/work/Enso-OS/galal/lib/Plugin.vala"
				while (TRUE) {
#line 548 "Plugin.c"
					gint _tmp13_ = 0;
					MetaRectangle* _tmp14_ = NULL;
					gint _tmp14__length1 = 0;
					MetaRectangle* _tmp15_ = NULL;
					gint _tmp15__length1 = 0;
					MetaRectangle* _tmp16_ = NULL;
					gint _tmp16__length1 = 0;
					gint _tmp17_ = 0;
					MetaRectangle* _tmp18_ = NULL;
					gint _tmp18__length1 = 0;
					MetaRectangle* _tmp19_ = NULL;
					gint _tmp19__length1 = 0;
					gint _tmp20_ = 0;
					MetaRectangle _tmp21_ = {0};
					MetaRectangle _tmp22_ = {0};
#line 192 "/home/nick/work/Enso-OS/galal/lib/Plugin.vala"
					if (!_tmp11_) {
#line 566 "Plugin.c"
						gint _tmp12_ = 0;
#line 192 "/home/nick/work/Enso-OS/galal/lib/Plugin.vala"
						_tmp12_ = j;
#line 192 "/home/nick/work/Enso-OS/galal/lib/Plugin.vala"
						j = _tmp12_ + 1;
#line 572 "Plugin.c"
					}
#line 192 "/home/nick/work/Enso-OS/galal/lib/Plugin.vala"
					_tmp11_ = FALSE;
#line 192 "/home/nick/work/Enso-OS/galal/lib/Plugin.vala"
					_tmp13_ = j;
#line 192 "/home/nick/work/Enso-OS/galal/lib/Plugin.vala"
					_tmp14_ = gala_plugin_get_custom_region (self, &_tmp14__length1);
#line 192 "/home/nick/work/Enso-OS/galal/lib/Plugin.vala"
					_tmp15_ = _tmp14_;
#line 192 "/home/nick/work/Enso-OS/galal/lib/Plugin.vala"
					_tmp15__length1 = _tmp14__length1;
#line 192 "/home/nick/work/Enso-OS/galal/lib/Plugin.vala"
					if (!(_tmp13_ < _tmp15__length1)) {
#line 192 "/home/nick/work/Enso-OS/galal/lib/Plugin.vala"
						break;
#line 588 "Plugin.c"
					}
#line 193 "/home/nick/work/Enso-OS/galal/lib/Plugin.vala"
					_tmp16_ = regions;
#line 193 "/home/nick/work/Enso-OS/galal/lib/Plugin.vala"
					_tmp16__length1 = regions_length1;
#line 193 "/home/nick/work/Enso-OS/galal/lib/Plugin.vala"
					_tmp17_ = i;
#line 193 "/home/nick/work/Enso-OS/galal/lib/Plugin.vala"
					i = _tmp17_ + 1;
#line 193 "/home/nick/work/Enso-OS/galal/lib/Plugin.vala"
					_tmp18_ = gala_plugin_get_custom_region (self, &_tmp18__length1);
#line 193 "/home/nick/work/Enso-OS/galal/lib/Plugin.vala"
					_tmp19_ = _tmp18_;
#line 193 "/home/nick/work/Enso-OS/galal/lib/Plugin.vala"
					_tmp19__length1 = _tmp18__length1;
#line 193 "/home/nick/work/Enso-OS/galal/lib/Plugin.vala"
					_tmp20_ = j;
#line 193 "/home/nick/work/Enso-OS/galal/lib/Plugin.vala"
					_tmp21_ = _tmp19_[_tmp20_];
#line 193 "/home/nick/work/Enso-OS/galal/lib/Plugin.vala"
					_tmp16_[_tmp17_] = _tmp21_;
#line 193 "/home/nick/work/Enso-OS/galal/lib/Plugin.vala"
					_tmp22_ = _tmp16_[_tmp17_];
#line 612 "Plugin.c"
				}
			}
		}
	}
#line 197 "/home/nick/work/Enso-OS/galal/lib/Plugin.vala"
	_tmp23_ = self->priv->tracked_actors;
#line 619 "Plugin.c"
	{
		GList* actor_collection = NULL;
		GList* actor_it = NULL;
#line 197 "/home/nick/work/Enso-OS/galal/lib/Plugin.vala"
		actor_collection = _tmp23_;
#line 197 "/home/nick/work/Enso-OS/galal/lib/Plugin.vala"
		for (actor_it = actor_collection; actor_it != NULL; actor_it = actor_it->next) {
#line 627 "Plugin.c"
			ClutterActor* _tmp24_ = NULL;
			ClutterActor* actor = NULL;
#line 197 "/home/nick/work/Enso-OS/galal/lib/Plugin.vala"
			_tmp24_ = _g_object_ref0 ((ClutterActor*) actor_it->data);
#line 197 "/home/nick/work/Enso-OS/galal/lib/Plugin.vala"
			actor = _tmp24_;
#line 634 "Plugin.c"
			{
				gfloat x = 0.0F;
				gfloat y = 0.0F;
				gfloat w = 0.0F;
				gfloat h = 0.0F;
				ClutterActor* _tmp25_ = NULL;
				gfloat _tmp26_ = 0.0F;
				gfloat _tmp27_ = 0.0F;
				ClutterActor* _tmp28_ = NULL;
				gfloat _tmp29_ = 0.0F;
				gfloat _tmp30_ = 0.0F;
				gboolean _tmp31_ = FALSE;
				gfloat _tmp32_ = 0.0F;
				MetaRectangle* _tmp34_ = NULL;
				gint _tmp34__length1 = 0;
				gint _tmp35_ = 0;
				gfloat _tmp36_ = 0.0F;
				gfloat _tmp37_ = 0.0F;
				gfloat _tmp38_ = 0.0F;
				gfloat _tmp39_ = 0.0F;
				MetaRectangle _tmp40_ = {0};
				MetaRectangle _tmp41_ = {0};
#line 199 "/home/nick/work/Enso-OS/galal/lib/Plugin.vala"
				_tmp25_ = actor;
#line 199 "/home/nick/work/Enso-OS/galal/lib/Plugin.vala"
				clutter_actor_get_transformed_position (_tmp25_, &_tmp26_, &_tmp27_);
#line 199 "/home/nick/work/Enso-OS/galal/lib/Plugin.vala"
				x = _tmp26_;
#line 199 "/home/nick/work/Enso-OS/galal/lib/Plugin.vala"
				y = _tmp27_;
#line 200 "/home/nick/work/Enso-OS/galal/lib/Plugin.vala"
				_tmp28_ = actor;
#line 200 "/home/nick/work/Enso-OS/galal/lib/Plugin.vala"
				clutter_actor_get_transformed_size (_tmp28_, &_tmp29_, &_tmp30_);
#line 200 "/home/nick/work/Enso-OS/galal/lib/Plugin.vala"
				w = _tmp29_;
#line 200 "/home/nick/work/Enso-OS/galal/lib/Plugin.vala"
				h = _tmp30_;
#line 202 "/home/nick/work/Enso-OS/galal/lib/Plugin.vala"
				_tmp32_ = w;
#line 202 "/home/nick/work/Enso-OS/galal/lib/Plugin.vala"
				if (_tmp32_ == ((gfloat) 0)) {
#line 202 "/home/nick/work/Enso-OS/galal/lib/Plugin.vala"
					_tmp31_ = TRUE;
#line 679 "Plugin.c"
				} else {
					gfloat _tmp33_ = 0.0F;
#line 202 "/home/nick/work/Enso-OS/galal/lib/Plugin.vala"
					_tmp33_ = h;
#line 202 "/home/nick/work/Enso-OS/galal/lib/Plugin.vala"
					_tmp31_ = _tmp33_ == ((gfloat) 0);
#line 686 "Plugin.c"
				}
#line 202 "/home/nick/work/Enso-OS/galal/lib/Plugin.vala"
				if (_tmp31_) {
#line 203 "/home/nick/work/Enso-OS/galal/lib/Plugin.vala"
					_g_object_unref0 (actor);
#line 203 "/home/nick/work/Enso-OS/galal/lib/Plugin.vala"
					continue;
#line 694 "Plugin.c"
				}
#line 205 "/home/nick/work/Enso-OS/galal/lib/Plugin.vala"
				_tmp34_ = regions;
#line 205 "/home/nick/work/Enso-OS/galal/lib/Plugin.vala"
				_tmp34__length1 = regions_length1;
#line 205 "/home/nick/work/Enso-OS/galal/lib/Plugin.vala"
				_tmp35_ = i;
#line 205 "/home/nick/work/Enso-OS/galal/lib/Plugin.vala"
				i = _tmp35_ + 1;
#line 205 "/home/nick/work/Enso-OS/galal/lib/Plugin.vala"
				_tmp36_ = x;
#line 205 "/home/nick/work/Enso-OS/galal/lib/Plugin.vala"
				_tmp37_ = y;
#line 205 "/home/nick/work/Enso-OS/galal/lib/Plugin.vala"
				_tmp38_ = w;
#line 205 "/home/nick/work/Enso-OS/galal/lib/Plugin.vala"
				_tmp39_ = h;
#line 205 "/home/nick/work/Enso-OS/galal/lib/Plugin.vala"
				_tmp40_.x = (gint) _tmp36_;
#line 205 "/home/nick/work/Enso-OS/galal/lib/Plugin.vala"
				_tmp40_.y = (gint) _tmp37_;
#line 205 "/home/nick/work/Enso-OS/galal/lib/Plugin.vala"
				_tmp40_.width = (gint) _tmp38_;
#line 205 "/home/nick/work/Enso-OS/galal/lib/Plugin.vala"
				_tmp40_.height = (gint) _tmp39_;
#line 205 "/home/nick/work/Enso-OS/galal/lib/Plugin.vala"
				_tmp34_[_tmp35_] = _tmp40_;
#line 205 "/home/nick/work/Enso-OS/galal/lib/Plugin.vala"
				_tmp41_ = _tmp34_[_tmp35_];
#line 197 "/home/nick/work/Enso-OS/galal/lib/Plugin.vala"
				_g_object_unref0 (actor);
#line 726 "Plugin.c"
			}
		}
	}
#line 208 "/home/nick/work/Enso-OS/galal/lib/Plugin.vala"
	_tmp42_ = regions;
#line 208 "/home/nick/work/Enso-OS/galal/lib/Plugin.vala"
	_tmp42__length1 = regions_length1;
#line 208 "/home/nick/work/Enso-OS/galal/lib/Plugin.vala"
	gala_plugin_set_region (self, _tmp42_, _tmp42__length1);
#line 210 "/home/nick/work/Enso-OS/galal/lib/Plugin.vala"
	g_signal_emit_by_name (self, "region-changed");
#line 183 "/home/nick/work/Enso-OS/galal/lib/Plugin.vala"
	regions = (g_free (regions), NULL);
#line 740 "Plugin.c"
}


static void gala_plugin_actor_allocation_changed (GalaPlugin* self, ClutterActorBox* box, ClutterAllocationFlags f) {
	gboolean _tmp0_ = FALSE;
	gboolean _tmp1_ = FALSE;
#line 213 "/home/nick/work/Enso-OS/galal/lib/Plugin.vala"
	g_return_if_fail (self != NULL);
#line 213 "/home/nick/work/Enso-OS/galal/lib/Plugin.vala"
	g_return_if_fail (box != NULL);
#line 215 "/home/nick/work/Enso-OS/galal/lib/Plugin.vala"
	_tmp0_ = gala_plugin_get_freeze_track (self);
#line 215 "/home/nick/work/Enso-OS/galal/lib/Plugin.vala"
	_tmp1_ = _tmp0_;
#line 215 "/home/nick/work/Enso-OS/galal/lib/Plugin.vala"
	if (!_tmp1_) {
#line 216 "/home/nick/work/Enso-OS/galal/lib/Plugin.vala"
		gala_plugin_update_region (self);
#line 759 "Plugin.c"
	}
}


GalaPlugin* gala_plugin_construct (GType object_type) {
	GalaPlugin * self = NULL;
#line 80 "/home/nick/work/Enso-OS/galal/lib/Plugin.vala"
	self = (GalaPlugin*) g_object_new (object_type, NULL);
#line 80 "/home/nick/work/Enso-OS/galal/lib/Plugin.vala"
	return self;
#line 770 "Plugin.c"
}


MetaRectangle* gala_plugin_get_region (GalaPlugin* self, int* result_length1) {
	MetaRectangle* result;
	MetaRectangle* _tmp0_ = NULL;
	gint _tmp0__length1 = 0;
	MetaRectangle* _tmp1_ = NULL;
	gint _tmp1__length1 = 0;
#line 94 "/home/nick/work/Enso-OS/galal/lib/Plugin.vala"
	g_return_val_if_fail (self != NULL, NULL);
#line 94 "/home/nick/work/Enso-OS/galal/lib/Plugin.vala"
	_tmp0_ = self->priv->_region;
#line 94 "/home/nick/work/Enso-OS/galal/lib/Plugin.vala"
	_tmp0__length1 = self->priv->_region_length1;
#line 94 "/home/nick/work/Enso-OS/galal/lib/Plugin.vala"
	_tmp1_ = _tmp0_;
#line 94 "/home/nick/work/Enso-OS/galal/lib/Plugin.vala"
	_tmp1__length1 = _tmp0__length1;
#line 94 "/home/nick/work/Enso-OS/galal/lib/Plugin.vala"
	if (result_length1) {
#line 94 "/home/nick/work/Enso-OS/galal/lib/Plugin.vala"
		*result_length1 = _tmp1__length1;
#line 794 "Plugin.c"
	}
#line 94 "/home/nick/work/Enso-OS/galal/lib/Plugin.vala"
	result = _tmp1_;
#line 94 "/home/nick/work/Enso-OS/galal/lib/Plugin.vala"
	return result;
#line 800 "Plugin.c"
}


static MetaRectangle* _vala_array_dup1 (MetaRectangle* self, int length) {
#line 94 "/home/nick/work/Enso-OS/galal/lib/Plugin.vala"
	return g_memdup (self, length * sizeof (MetaRectangle));
#line 807 "Plugin.c"
}


static void gala_plugin_set_region (GalaPlugin* self, MetaRectangle* value, int value_length1) {
	MetaRectangle* _tmp0_ = NULL;
	gint _tmp0__length1 = 0;
	MetaRectangle* _tmp1_ = NULL;
	gint _tmp1__length1 = 0;
#line 94 "/home/nick/work/Enso-OS/galal/lib/Plugin.vala"
	g_return_if_fail (self != NULL);
#line 94 "/home/nick/work/Enso-OS/galal/lib/Plugin.vala"
	_tmp0_ = value;
#line 94 "/home/nick/work/Enso-OS/galal/lib/Plugin.vala"
	_tmp0__length1 = value_length1;
#line 94 "/home/nick/work/Enso-OS/galal/lib/Plugin.vala"
	_tmp1_ = (_tmp0_ != NULL) ? _vala_array_dup1 (_tmp0_, _tmp0__length1) : ((gpointer) _tmp0_);
#line 94 "/home/nick/work/Enso-OS/galal/lib/Plugin.vala"
	_tmp1__length1 = _tmp0__length1;
#line 94 "/home/nick/work/Enso-OS/galal/lib/Plugin.vala"
	self->priv->_region = (g_free (self->priv->_region), NULL);
#line 94 "/home/nick/work/Enso-OS/galal/lib/Plugin.vala"
	self->priv->_region = _tmp1_;
#line 94 "/home/nick/work/Enso-OS/galal/lib/Plugin.vala"
	self->priv->_region_length1 = _tmp1__length1;
#line 94 "/home/nick/work/Enso-OS/galal/lib/Plugin.vala"
	self->priv->__region_size_ = self->priv->_region_length1;
#line 834 "Plugin.c"
}


MetaRectangle* gala_plugin_get_custom_region (GalaPlugin* self, int* result_length1) {
	MetaRectangle* result;
	MetaRectangle* _tmp0_ = NULL;
	gint _tmp0__length1 = 0;
	MetaRectangle* _tmp1_ = NULL;
	gint _tmp1__length1 = 0;
#line 102 "/home/nick/work/Enso-OS/galal/lib/Plugin.vala"
	g_return_val_if_fail (self != NULL, NULL);
#line 103 "/home/nick/work/Enso-OS/galal/lib/Plugin.vala"
	_tmp0_ = self->priv->_custom_region;
#line 103 "/home/nick/work/Enso-OS/galal/lib/Plugin.vala"
	_tmp0__length1 = self->priv->_custom_region_length1;
#line 103 "/home/nick/work/Enso-OS/galal/lib/Plugin.vala"
	_tmp1_ = _tmp0_;
#line 103 "/home/nick/work/Enso-OS/galal/lib/Plugin.vala"
	_tmp1__length1 = _tmp0__length1;
#line 103 "/home/nick/work/Enso-OS/galal/lib/Plugin.vala"
	if (result_length1) {
#line 103 "/home/nick/work/Enso-OS/galal/lib/Plugin.vala"
		*result_length1 = _tmp1__length1;
#line 858 "Plugin.c"
	}
#line 103 "/home/nick/work/Enso-OS/galal/lib/Plugin.vala"
	result = _tmp1_;
#line 103 "/home/nick/work/Enso-OS/galal/lib/Plugin.vala"
	return result;
#line 864 "Plugin.c"
}


static MetaRectangle* _vala_array_dup2 (MetaRectangle* self, int length) {
#line 106 "/home/nick/work/Enso-OS/galal/lib/Plugin.vala"
	return g_memdup (self, length * sizeof (MetaRectangle));
#line 871 "Plugin.c"
}


void gala_plugin_set_custom_region (GalaPlugin* self, MetaRectangle* value, int value_length1) {
	MetaRectangle* _tmp0_ = NULL;
	gint _tmp0__length1 = 0;
	MetaRectangle* _tmp1_ = NULL;
	gint _tmp1__length1 = 0;
#line 105 "/home/nick/work/Enso-OS/galal/lib/Plugin.vala"
	g_return_if_fail (self != NULL);
#line 106 "/home/nick/work/Enso-OS/galal/lib/Plugin.vala"
	_tmp0_ = value;
#line 106 "/home/nick/work/Enso-OS/galal/lib/Plugin.vala"
	_tmp0__length1 = value_length1;
#line 106 "/home/nick/work/Enso-OS/galal/lib/Plugin.vala"
	_tmp1_ = (_tmp0_ != NULL) ? _vala_array_dup2 (_tmp0_, _tmp0__length1) : ((gpointer) _tmp0_);
#line 106 "/home/nick/work/Enso-OS/galal/lib/Plugin.vala"
	_tmp1__length1 = _tmp0__length1;
#line 106 "/home/nick/work/Enso-OS/galal/lib/Plugin.vala"
	self->priv->_custom_region = (g_free (self->priv->_custom_region), NULL);
#line 106 "/home/nick/work/Enso-OS/galal/lib/Plugin.vala"
	self->priv->_custom_region = _tmp1_;
#line 106 "/home/nick/work/Enso-OS/galal/lib/Plugin.vala"
	self->priv->_custom_region_length1 = _tmp1__length1;
#line 106 "/home/nick/work/Enso-OS/galal/lib/Plugin.vala"
	self->priv->__custom_region_size_ = self->priv->_custom_region_length1;
#line 107 "/home/nick/work/Enso-OS/galal/lib/Plugin.vala"
	gala_plugin_update_region (self);
#line 900 "Plugin.c"
}


gboolean gala_plugin_get_freeze_track (GalaPlugin* self) {
	gboolean result;
	gboolean _tmp0_ = FALSE;
#line 117 "/home/nick/work/Enso-OS/galal/lib/Plugin.vala"
	g_return_val_if_fail (self != NULL, FALSE);
#line 118 "/home/nick/work/Enso-OS/galal/lib/Plugin.vala"
	_tmp0_ = self->priv->_freeze_track;
#line 118 "/home/nick/work/Enso-OS/galal/lib/Plugin.vala"
	result = _tmp0_;
#line 118 "/home/nick/work/Enso-OS/galal/lib/Plugin.vala"
	return result;
#line 915 "Plugin.c"
}


void gala_plugin_set_freeze_track (GalaPlugin* self, gboolean value) {
	gboolean _tmp0_ = FALSE;
	gboolean _tmp1_ = FALSE;
#line 120 "/home/nick/work/Enso-OS/galal/lib/Plugin.vala"
	g_return_if_fail (self != NULL);
#line 121 "/home/nick/work/Enso-OS/galal/lib/Plugin.vala"
	_tmp0_ = value;
#line 121 "/home/nick/work/Enso-OS/galal/lib/Plugin.vala"
	self->priv->_freeze_track = _tmp0_;
#line 123 "/home/nick/work/Enso-OS/galal/lib/Plugin.vala"
	_tmp1_ = self->priv->_freeze_track;
#line 123 "/home/nick/work/Enso-OS/galal/lib/Plugin.vala"
	if (!_tmp1_) {
#line 124 "/home/nick/work/Enso-OS/galal/lib/Plugin.vala"
		gala_plugin_update_region (self);
#line 934 "Plugin.c"
	}
#line 120 "/home/nick/work/Enso-OS/galal/lib/Plugin.vala"
	g_object_notify ((GObject *) self, "freeze-track");
#line 938 "Plugin.c"
}


static void gala_plugin_class_init (GalaPluginClass * klass) {
#line 80 "/home/nick/work/Enso-OS/galal/lib/Plugin.vala"
	gala_plugin_parent_class = g_type_class_peek_parent (klass);
#line 80 "/home/nick/work/Enso-OS/galal/lib/Plugin.vala"
	g_type_class_add_private (klass, sizeof (GalaPluginPrivate));
#line 80 "/home/nick/work/Enso-OS/galal/lib/Plugin.vala"
	((GalaPluginClass *) klass)->initialize = gala_plugin_real_initialize;
#line 80 "/home/nick/work/Enso-OS/galal/lib/Plugin.vala"
	((GalaPluginClass *) klass)->destroy = gala_plugin_real_destroy;
#line 80 "/home/nick/work/Enso-OS/galal/lib/Plugin.vala"
	G_OBJECT_CLASS (klass)->get_property = _vala_gala_plugin_get_property;
#line 80 "/home/nick/work/Enso-OS/galal/lib/Plugin.vala"
	G_OBJECT_CLASS (klass)->set_property = _vala_gala_plugin_set_property;
#line 80 "/home/nick/work/Enso-OS/galal/lib/Plugin.vala"
	G_OBJECT_CLASS (klass)->finalize = gala_plugin_finalize;
#line 957 "Plugin.c"
	/**
	 * Set this property to true while animating an actor if you have tracked
	 * actors to prevent constant recalculations of the regions during an
	 * animation.
	 */
#line 80 "/home/nick/work/Enso-OS/galal/lib/Plugin.vala"
	g_object_class_install_property (G_OBJECT_CLASS (klass), GALA_PLUGIN_FREEZE_TRACK, g_param_spec_boolean ("freeze-track", "freeze-track", "freeze-track", FALSE, G_PARAM_STATIC_NAME | G_PARAM_STATIC_NICK | G_PARAM_STATIC_BLURB | G_PARAM_READABLE | G_PARAM_WRITABLE));
#line 965 "Plugin.c"
	/**
	 * Emitted when update_region is called. Mainly for internal purposes.
	 */
#line 80 "/home/nick/work/Enso-OS/galal/lib/Plugin.vala"
	g_signal_new ("region_changed", GALA_TYPE_PLUGIN, G_SIGNAL_RUN_LAST, 0, NULL, NULL, g_cclosure_marshal_VOID__VOID, G_TYPE_NONE, 0);
#line 971 "Plugin.c"
}


static void gala_plugin_instance_init (GalaPlugin * self) {
#line 80 "/home/nick/work/Enso-OS/galal/lib/Plugin.vala"
	self->priv = GALA_PLUGIN_GET_PRIVATE (self);
#line 128 "/home/nick/work/Enso-OS/galal/lib/Plugin.vala"
	self->priv->_freeze_track = FALSE;
#line 129 "/home/nick/work/Enso-OS/galal/lib/Plugin.vala"
	self->priv->_custom_region = NULL;
#line 129 "/home/nick/work/Enso-OS/galal/lib/Plugin.vala"
	self->priv->_custom_region_length1 = 0;
#line 129 "/home/nick/work/Enso-OS/galal/lib/Plugin.vala"
	self->priv->__custom_region_size_ = self->priv->_custom_region_length1;
#line 130 "/home/nick/work/Enso-OS/galal/lib/Plugin.vala"
	self->priv->tracked_actors = NULL;
#line 988 "Plugin.c"
}


static void gala_plugin_finalize (GObject* obj) {
	GalaPlugin * self;
#line 80 "/home/nick/work/Enso-OS/galal/lib/Plugin.vala"
	self = G_TYPE_CHECK_INSTANCE_CAST (obj, GALA_TYPE_PLUGIN, GalaPlugin);
#line 94 "/home/nick/work/Enso-OS/galal/lib/Plugin.vala"
	self->priv->_region = (g_free (self->priv->_region), NULL);
#line 129 "/home/nick/work/Enso-OS/galal/lib/Plugin.vala"
	self->priv->_custom_region = (g_free (self->priv->_custom_region), NULL);
#line 130 "/home/nick/work/Enso-OS/galal/lib/Plugin.vala"
	__g_list_free__g_object_unref0_0 (self->priv->tracked_actors);
#line 80 "/home/nick/work/Enso-OS/galal/lib/Plugin.vala"
	G_OBJECT_CLASS (gala_plugin_parent_class)->finalize (obj);
#line 1004 "Plugin.c"
}


/**
 * This class has to be implemented by every plugin.
 * Additionally, the plugin module is required to have a register_plugin
 * function which returns a PluginInfo struct.
 * The plugin_type field has to be the type of your plugin class derived
 * from this class.
 */
GType gala_plugin_get_type (void) {
	static volatile gsize gala_plugin_type_id__volatile = 0;
	if (g_once_init_enter (&gala_plugin_type_id__volatile)) {
		static const GTypeInfo g_define_type_info = { sizeof (GalaPluginClass), (GBaseInitFunc) NULL, (GBaseFinalizeFunc) NULL, (GClassInitFunc) gala_plugin_class_init, (GClassFinalizeFunc) NULL, NULL, sizeof (GalaPlugin), 0, (GInstanceInitFunc) gala_plugin_instance_init, NULL };
		GType gala_plugin_type_id;
		gala_plugin_type_id = g_type_register_static (G_TYPE_OBJECT, "GalaPlugin", &g_define_type_info, G_TYPE_FLAG_ABSTRACT);
		g_once_init_leave (&gala_plugin_type_id__volatile, gala_plugin_type_id);
	}
	return gala_plugin_type_id__volatile;
}


static void _vala_gala_plugin_get_property (GObject * object, guint property_id, GValue * value, GParamSpec * pspec) {
	GalaPlugin * self;
	self = G_TYPE_CHECK_INSTANCE_CAST (object, GALA_TYPE_PLUGIN, GalaPlugin);
#line 80 "/home/nick/work/Enso-OS/galal/lib/Plugin.vala"
	switch (property_id) {
#line 80 "/home/nick/work/Enso-OS/galal/lib/Plugin.vala"
		case GALA_PLUGIN_FREEZE_TRACK:
#line 80 "/home/nick/work/Enso-OS/galal/lib/Plugin.vala"
		g_value_set_boolean (value, gala_plugin_get_freeze_track (self));
#line 80 "/home/nick/work/Enso-OS/galal/lib/Plugin.vala"
		break;
#line 1038 "Plugin.c"
		default:
#line 80 "/home/nick/work/Enso-OS/galal/lib/Plugin.vala"
		G_OBJECT_WARN_INVALID_PROPERTY_ID (object, property_id, pspec);
#line 80 "/home/nick/work/Enso-OS/galal/lib/Plugin.vala"
		break;
#line 1044 "Plugin.c"
	}
}


static void _vala_gala_plugin_set_property (GObject * object, guint property_id, const GValue * value, GParamSpec * pspec) {
	GalaPlugin * self;
	self = G_TYPE_CHECK_INSTANCE_CAST (object, GALA_TYPE_PLUGIN, GalaPlugin);
#line 80 "/home/nick/work/Enso-OS/galal/lib/Plugin.vala"
	switch (property_id) {
#line 80 "/home/nick/work/Enso-OS/galal/lib/Plugin.vala"
		case GALA_PLUGIN_FREEZE_TRACK:
#line 80 "/home/nick/work/Enso-OS/galal/lib/Plugin.vala"
		gala_plugin_set_freeze_track (self, g_value_get_boolean (value));
#line 80 "/home/nick/work/Enso-OS/galal/lib/Plugin.vala"
		break;
#line 1060 "Plugin.c"
		default:
#line 80 "/home/nick/work/Enso-OS/galal/lib/Plugin.vala"
		G_OBJECT_WARN_INVALID_PROPERTY_ID (object, property_id, pspec);
#line 80 "/home/nick/work/Enso-OS/galal/lib/Plugin.vala"
		break;
#line 1066 "Plugin.c"
	}
}



