/* WindowClone.c generated by valac 0.30.1, the Vala compiler
 * generated from WindowClone.vala, do not modify */

/**/
/*  Copyright (C) 2014 Tom Beckmann*/
/**/
/*  This program is free software: you can redistribute it and/or modify*/
/*  it under the terms of the GNU General Public License as published by*/
/*  the Free Software Foundation, either version 3 of the License, or*/
/*  (at your option) any later version.*/
/**/
/*  This program is distributed in the hope that it will be useful,*/
/*  but WITHOUT ANY WARRANTY; without even the implied warranty of*/
/*  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the*/
/*  GNU General Public License for more details.*/
/**/
/*  You should have received a copy of the GNU General Public License*/
/*  along with this program.  If not, see <http://www.gnu.org/licenses/>.*/
/**/

#include <glib.h>
#include <glib-object.h>
#include <clutter/clutter.h>
#include <meta/window.h>
#include <float.h>
#include <math.h>
#include <meta/boxes.h>
#include <string.h>
#include <meta/meta-window-actor.h>
#include <meta/screen.h>
#include <granite.h>
#include <meta/display.h>
#include <meta/prefs.h>
#include <meta/workspace.h>
#include <meta/meta-background-group.h>
#include <stdlib.h>
#include "gala.h"


#define GALA_TYPE_SHADOW_EFFECT (gala_shadow_effect_get_type ())
#define GALA_SHADOW_EFFECT(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), GALA_TYPE_SHADOW_EFFECT, GalaShadowEffect))
#define GALA_SHADOW_EFFECT_CLASS(klass) (G_TYPE_CHECK_CLASS_CAST ((klass), GALA_TYPE_SHADOW_EFFECT, GalaShadowEffectClass))
#define GALA_IS_SHADOW_EFFECT(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), GALA_TYPE_SHADOW_EFFECT))
#define GALA_IS_SHADOW_EFFECT_CLASS(klass) (G_TYPE_CHECK_CLASS_TYPE ((klass), GALA_TYPE_SHADOW_EFFECT))
#define GALA_SHADOW_EFFECT_GET_CLASS(obj) (G_TYPE_INSTANCE_GET_CLASS ((obj), GALA_TYPE_SHADOW_EFFECT, GalaShadowEffectClass))

typedef struct _GalaShadowEffect GalaShadowEffect;
typedef struct _GalaShadowEffectClass GalaShadowEffectClass;
typedef struct _GalaShadowEffectPrivate GalaShadowEffectPrivate;

#define GALA_TYPE_WINDOW_SHADOW_EFFECT (gala_window_shadow_effect_get_type ())
#define GALA_WINDOW_SHADOW_EFFECT(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), GALA_TYPE_WINDOW_SHADOW_EFFECT, GalaWindowShadowEffect))
#define GALA_WINDOW_SHADOW_EFFECT_CLASS(klass) (G_TYPE_CHECK_CLASS_CAST ((klass), GALA_TYPE_WINDOW_SHADOW_EFFECT, GalaWindowShadowEffectClass))
#define GALA_IS_WINDOW_SHADOW_EFFECT(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), GALA_TYPE_WINDOW_SHADOW_EFFECT))
#define GALA_IS_WINDOW_SHADOW_EFFECT_CLASS(klass) (G_TYPE_CHECK_CLASS_TYPE ((klass), GALA_TYPE_WINDOW_SHADOW_EFFECT))
#define GALA_WINDOW_SHADOW_EFFECT_GET_CLASS(obj) (G_TYPE_INSTANCE_GET_CLASS ((obj), GALA_TYPE_WINDOW_SHADOW_EFFECT, GalaWindowShadowEffectClass))

typedef struct _GalaWindowShadowEffect GalaWindowShadowEffect;
typedef struct _GalaWindowShadowEffectClass GalaWindowShadowEffectClass;
typedef struct _GalaWindowShadowEffectPrivate GalaWindowShadowEffectPrivate;
#define _g_object_unref0(var) ((var == NULL) ? NULL : (var = (g_object_unref (var), NULL)))

#define GALA_TYPE_WINDOW_CLONE (gala_window_clone_get_type ())
#define GALA_WINDOW_CLONE(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), GALA_TYPE_WINDOW_CLONE, GalaWindowClone))
#define GALA_WINDOW_CLONE_CLASS(klass) (G_TYPE_CHECK_CLASS_CAST ((klass), GALA_TYPE_WINDOW_CLONE, GalaWindowCloneClass))
#define GALA_IS_WINDOW_CLONE(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), GALA_TYPE_WINDOW_CLONE))
#define GALA_IS_WINDOW_CLONE_CLASS(klass) (G_TYPE_CHECK_CLASS_TYPE ((klass), GALA_TYPE_WINDOW_CLONE))
#define GALA_WINDOW_CLONE_GET_CLASS(obj) (G_TYPE_INSTANCE_GET_CLASS ((obj), GALA_TYPE_WINDOW_CLONE, GalaWindowCloneClass))

typedef struct _GalaWindowClone GalaWindowClone;
typedef struct _GalaWindowCloneClass GalaWindowCloneClass;
typedef struct _GalaWindowClonePrivate GalaWindowClonePrivate;

#define GALA_TYPE_DRAG_DROP_ACTION (gala_drag_drop_action_get_type ())
#define GALA_DRAG_DROP_ACTION(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), GALA_TYPE_DRAG_DROP_ACTION, GalaDragDropAction))
#define GALA_DRAG_DROP_ACTION_CLASS(klass) (G_TYPE_CHECK_CLASS_CAST ((klass), GALA_TYPE_DRAG_DROP_ACTION, GalaDragDropActionClass))
#define GALA_IS_DRAG_DROP_ACTION(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), GALA_TYPE_DRAG_DROP_ACTION))
#define GALA_IS_DRAG_DROP_ACTION_CLASS(klass) (G_TYPE_CHECK_CLASS_TYPE ((klass), GALA_TYPE_DRAG_DROP_ACTION))
#define GALA_DRAG_DROP_ACTION_GET_CLASS(obj) (G_TYPE_INSTANCE_GET_CLASS ((obj), GALA_TYPE_DRAG_DROP_ACTION, GalaDragDropActionClass))

typedef struct _GalaDragDropAction GalaDragDropAction;
typedef struct _GalaDragDropActionClass GalaDragDropActionClass;
#define _g_free0(var) ((var == NULL) ? NULL : (var = (g_free (var), NULL)))
#define _g_list_free0(var) ((var == NULL) ? NULL : (var = (g_list_free (var), NULL)))

#define GALA_TYPE_ICON_GROUP (gala_icon_group_get_type ())
#define GALA_ICON_GROUP(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), GALA_TYPE_ICON_GROUP, GalaIconGroup))
#define GALA_ICON_GROUP_CLASS(klass) (G_TYPE_CHECK_CLASS_CAST ((klass), GALA_TYPE_ICON_GROUP, GalaIconGroupClass))
#define GALA_IS_ICON_GROUP(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), GALA_TYPE_ICON_GROUP))
#define GALA_IS_ICON_GROUP_CLASS(klass) (G_TYPE_CHECK_CLASS_TYPE ((klass), GALA_TYPE_ICON_GROUP))
#define GALA_ICON_GROUP_GET_CLASS(obj) (G_TYPE_INSTANCE_GET_CLASS ((obj), GALA_TYPE_ICON_GROUP, GalaIconGroupClass))

typedef struct _GalaIconGroup GalaIconGroup;
typedef struct _GalaIconGroupClass GalaIconGroupClass;

#define GALA_TYPE_WORKSPACE_INSERT_THUMB (gala_workspace_insert_thumb_get_type ())
#define GALA_WORKSPACE_INSERT_THUMB(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), GALA_TYPE_WORKSPACE_INSERT_THUMB, GalaWorkspaceInsertThumb))
#define GALA_WORKSPACE_INSERT_THUMB_CLASS(klass) (G_TYPE_CHECK_CLASS_CAST ((klass), GALA_TYPE_WORKSPACE_INSERT_THUMB, GalaWorkspaceInsertThumbClass))
#define GALA_IS_WORKSPACE_INSERT_THUMB(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), GALA_TYPE_WORKSPACE_INSERT_THUMB))
#define GALA_IS_WORKSPACE_INSERT_THUMB_CLASS(klass) (G_TYPE_CHECK_CLASS_TYPE ((klass), GALA_TYPE_WORKSPACE_INSERT_THUMB))
#define GALA_WORKSPACE_INSERT_THUMB_GET_CLASS(obj) (G_TYPE_INSTANCE_GET_CLASS ((obj), GALA_TYPE_WORKSPACE_INSERT_THUMB, GalaWorkspaceInsertThumbClass))

typedef struct _GalaWorkspaceInsertThumb GalaWorkspaceInsertThumb;
typedef struct _GalaWorkspaceInsertThumbClass GalaWorkspaceInsertThumbClass;

#define GALA_TYPE_BACKGROUND_MANAGER (gala_background_manager_get_type ())
#define GALA_BACKGROUND_MANAGER(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), GALA_TYPE_BACKGROUND_MANAGER, GalaBackgroundManager))
#define GALA_BACKGROUND_MANAGER_CLASS(klass) (G_TYPE_CHECK_CLASS_CAST ((klass), GALA_TYPE_BACKGROUND_MANAGER, GalaBackgroundManagerClass))
#define GALA_IS_BACKGROUND_MANAGER(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), GALA_TYPE_BACKGROUND_MANAGER))
#define GALA_IS_BACKGROUND_MANAGER_CLASS(klass) (G_TYPE_CHECK_CLASS_TYPE ((klass), GALA_TYPE_BACKGROUND_MANAGER))
#define GALA_BACKGROUND_MANAGER_GET_CLASS(obj) (G_TYPE_INSTANCE_GET_CLASS ((obj), GALA_TYPE_BACKGROUND_MANAGER, GalaBackgroundManagerClass))

typedef struct _GalaBackgroundManager GalaBackgroundManager;
typedef struct _GalaBackgroundManagerClass GalaBackgroundManagerClass;

#define GALA_TYPE_FRAMED_BACKGROUND (gala_framed_background_get_type ())
#define GALA_FRAMED_BACKGROUND(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), GALA_TYPE_FRAMED_BACKGROUND, GalaFramedBackground))
#define GALA_FRAMED_BACKGROUND_CLASS(klass) (G_TYPE_CHECK_CLASS_CAST ((klass), GALA_TYPE_FRAMED_BACKGROUND, GalaFramedBackgroundClass))
#define GALA_IS_FRAMED_BACKGROUND(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), GALA_TYPE_FRAMED_BACKGROUND))
#define GALA_IS_FRAMED_BACKGROUND_CLASS(klass) (G_TYPE_CHECK_CLASS_TYPE ((klass), GALA_TYPE_FRAMED_BACKGROUND))
#define GALA_FRAMED_BACKGROUND_GET_CLASS(obj) (G_TYPE_INSTANCE_GET_CLASS ((obj), GALA_TYPE_FRAMED_BACKGROUND, GalaFramedBackgroundClass))

typedef struct _GalaFramedBackground GalaFramedBackground;
typedef struct _GalaFramedBackgroundClass GalaFramedBackgroundClass;

#define GALA_TYPE_WORKSPACE_CLONE (gala_workspace_clone_get_type ())
#define GALA_WORKSPACE_CLONE(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), GALA_TYPE_WORKSPACE_CLONE, GalaWorkspaceClone))
#define GALA_WORKSPACE_CLONE_CLASS(klass) (G_TYPE_CHECK_CLASS_CAST ((klass), GALA_TYPE_WORKSPACE_CLONE, GalaWorkspaceCloneClass))
#define GALA_IS_WORKSPACE_CLONE(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), GALA_TYPE_WORKSPACE_CLONE))
#define GALA_IS_WORKSPACE_CLONE_CLASS(klass) (G_TYPE_CHECK_CLASS_TYPE ((klass), GALA_TYPE_WORKSPACE_CLONE))
#define GALA_WORKSPACE_CLONE_GET_CLASS(obj) (G_TYPE_INSTANCE_GET_CLASS ((obj), GALA_TYPE_WORKSPACE_CLONE, GalaWorkspaceCloneClass))

typedef struct _GalaWorkspaceClone GalaWorkspaceClone;
typedef struct _GalaWorkspaceCloneClass GalaWorkspaceCloneClass;

#define GALA_TYPE_MONITOR_CLONE (gala_monitor_clone_get_type ())
#define GALA_MONITOR_CLONE(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), GALA_TYPE_MONITOR_CLONE, GalaMonitorClone))
#define GALA_MONITOR_CLONE_CLASS(klass) (G_TYPE_CHECK_CLASS_CAST ((klass), GALA_TYPE_MONITOR_CLONE, GalaMonitorCloneClass))
#define GALA_IS_MONITOR_CLONE(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), GALA_TYPE_MONITOR_CLONE))
#define GALA_IS_MONITOR_CLONE_CLASS(klass) (G_TYPE_CHECK_CLASS_TYPE ((klass), GALA_TYPE_MONITOR_CLONE))
#define GALA_MONITOR_CLONE_GET_CLASS(obj) (G_TYPE_INSTANCE_GET_CLASS ((obj), GALA_TYPE_MONITOR_CLONE, GalaMonitorCloneClass))

typedef struct _GalaMonitorClone GalaMonitorClone;
typedef struct _GalaMonitorCloneClass GalaMonitorCloneClass;
typedef struct _Block38Data Block38Data;

#define GALA_TYPE_DRAG_DROP_ACTION_TYPE (gala_drag_drop_action_type_get_type ())

struct _GalaShadowEffect {
	ClutterEffect parent_instance;
	GalaShadowEffectPrivate * priv;
};

struct _GalaShadowEffectClass {
	ClutterEffectClass parent_class;
	void (*get_bounding_box) (GalaShadowEffect* self, ClutterActorBox* result);
};

struct _GalaWindowShadowEffect {
	GalaShadowEffect parent_instance;
	GalaWindowShadowEffectPrivate * priv;
};

struct _GalaWindowShadowEffectClass {
	GalaShadowEffectClass parent_class;
};

struct _GalaWindowShadowEffectPrivate {
	MetaWindow* _window;
};

struct _GalaWindowClone {
	ClutterActor parent_instance;
	GalaWindowClonePrivate * priv;
};

struct _GalaWindowCloneClass {
	ClutterActorClass parent_class;
};

struct _GalaWindowClonePrivate {
	MetaWindow* _window;
	MetaRectangle* _slot;
	gboolean _dragging;
	gboolean _active;
	gboolean _overview_mode;
	GalaDragDropAction* drag_action;
	ClutterClone* clone;
	GalaShadowEffect* shadow_effect;
	ClutterActor* prev_parent;
	gint prev_index;
	gulong check_confirm_dialog_cb;
	guint shadow_update_timeout;
	ClutterActor* close_button;
	ClutterActor* active_shape;
	ClutterActor* window_icon;
};

struct _Block38Data {
	int _ref_count_;
	GalaWindowClone* self;
	ClutterClickAction* click_action;
};

typedef enum  {
	GALA_DRAG_DROP_ACTION_TYPE_SOURCE = 0,
	GALA_DRAG_DROP_ACTION_TYPE_DESTINATION
} GalaDragDropActionType;


static gpointer gala_window_shadow_effect_parent_class = NULL;
static gpointer gala_window_clone_parent_class = NULL;

GType gala_shadow_effect_get_type (void) G_GNUC_CONST;
GType gala_window_shadow_effect_get_type (void) G_GNUC_CONST;
#define GALA_WINDOW_SHADOW_EFFECT_GET_PRIVATE(o) (G_TYPE_INSTANCE_GET_PRIVATE ((o), GALA_TYPE_WINDOW_SHADOW_EFFECT, GalaWindowShadowEffectPrivate))
enum  {
	GALA_WINDOW_SHADOW_EFFECT_DUMMY_PROPERTY,
	GALA_WINDOW_SHADOW_EFFECT_WINDOW
};
GalaWindowShadowEffect* gala_window_shadow_effect_new (MetaWindow* window, gint shadow_size, gint shadow_spread);
GalaWindowShadowEffect* gala_window_shadow_effect_construct (GType object_type, MetaWindow* window, gint shadow_size, gint shadow_spread);
static void gala_window_shadow_effect_real_get_bounding_box (GalaShadowEffect* base, ClutterActorBox* result);
gint gala_shadow_effect_get_shadow_size (GalaShadowEffect* self);
gfloat gala_shadow_effect_get_scale_factor (GalaShadowEffect* self);
MetaWindow* gala_window_shadow_effect_get_window (GalaWindowShadowEffect* self);
static void gala_window_shadow_effect_set_window (GalaWindowShadowEffect* self, MetaWindow* value);
static void gala_window_shadow_effect_finalize (GObject* obj);
static void _vala_gala_window_shadow_effect_get_property (GObject * object, guint property_id, GValue * value, GParamSpec * pspec);
static void _vala_gala_window_shadow_effect_set_property (GObject * object, guint property_id, const GValue * value, GParamSpec * pspec);
GType gala_window_clone_get_type (void) G_GNUC_CONST;
GType gala_drag_drop_action_get_type (void) G_GNUC_CONST;
#define GALA_WINDOW_CLONE_GET_PRIVATE(o) (G_TYPE_INSTANCE_GET_PRIVATE ((o), GALA_TYPE_WINDOW_CLONE, GalaWindowClonePrivate))
enum  {
	GALA_WINDOW_CLONE_DUMMY_PROPERTY,
	GALA_WINDOW_CLONE_WINDOW,
	GALA_WINDOW_CLONE_DRAGGING,
	GALA_WINDOW_CLONE_ACTIVE,
	GALA_WINDOW_CLONE_OVERVIEW_MODE,
	GALA_WINDOW_CLONE_SHADOW_OPACITY
};
MetaWindow* gala_window_clone_get_window (GalaWindowClone* self);
static void gala_window_clone_unmanaged (GalaWindowClone* self);
static void _gala_window_clone_unmanaged_meta_window_unmanaged (MetaWindow* _sender, gpointer self);
static void gala_window_clone_on_all_workspaces_changed (GalaWindowClone* self);
static void _gala_window_clone_on_all_workspaces_changed_g_object_notify (GObject* _sender, GParamSpec* pspec, gpointer self);
#define GALA_WINDOW_CLONE_WINDOW_ICON_SIZE 64
#define GALA_WINDOW_CLONE_ACTIVE_SHAPE_SIZE 12
GalaWindowClone* gala_window_clone_new (MetaWindow* window, gboolean overview_mode);
GalaWindowClone* gala_window_clone_construct (GType object_type, MetaWindow* window, gboolean overview_mode);
static void gala_window_clone_load_clone (GalaWindowClone* self, gboolean was_waiting);
static gboolean ___lambda63_ (GalaWindowClone* self);
static gboolean ____lambda63__gsource_func (gpointer self);
gboolean gala_window_clone_get_overview_mode (GalaWindowClone* self);
void gala_window_clone_transition_to_original_state (GalaWindowClone* self, gboolean animate);
static gboolean gala_window_clone_should_fade (GalaWindowClone* self);
MetaRectangle* gala_window_clone_get_slot (GalaWindowClone* self);
void gala_window_clone_take_slot (GalaWindowClone* self, MetaRectangle* rect);
#define GALA_MULTITASKING_VIEW_ANIMATION_MODE CLUTTER_EASE_OUT_QUAD
#define GALA_MULTITASKING_VIEW_ANIMATION_DURATION 250
static void gala_window_clone_toggle_shadow (GalaWindowClone* self, gboolean show);
static void gala_window_clone_set_slot (GalaWindowClone* self, MetaRectangle* value);
static void gala_window_clone_real_allocate (ClutterActor* base, ClutterActorBox* box, ClutterAllocationFlags flags);
gboolean gala_window_clone_get_dragging (GalaWindowClone* self);
static gboolean gala_window_clone_real_button_press_event (ClutterActor* base, ClutterButtonEvent* event);
static gboolean gala_window_clone_real_enter_event (ClutterActor* base, ClutterCrossingEvent* event);
static gboolean gala_window_clone_real_leave_event (ClutterActor* base, ClutterCrossingEvent* event);
void gala_window_clone_place_widgets (GalaWindowClone* self, gint dest_width, gint dest_height);
guint8 gala_shadow_effect_get_shadow_opacity (GalaShadowEffect* self);
static void gala_window_clone_close_window (GalaWindowClone* self);
static void gala_window_clone_check_confirm_dialog (GalaWindowClone* self, gint monitor, MetaWindow* new_window);
static void _gala_window_clone_check_confirm_dialog_meta_screen_window_entered_monitor (MetaScreen* _sender, gint object, MetaWindow* p0, gpointer self);
static gboolean ___lambda64_ (GalaWindowClone* self);
static gboolean ____lambda64__gsource_func (gpointer self);
gboolean gala_drag_drop_action_get_dragging (GalaDragDropAction* self);
void gala_drag_drop_action_cancel (GalaDragDropAction* self);
static void gala_window_clone_actor_clicked (GalaWindowClone* self, guint32 button);
static ClutterActor* gala_window_clone_drag_begin (GalaWindowClone* self, gfloat click_x, gfloat click_y);
static void gala_window_clone_set_dragging (GalaWindowClone* self, gboolean value);
static void gala_window_clone_drag_destination_crossed (GalaWindowClone* self, ClutterActor* destination, gboolean hovered);
GType gala_icon_group_get_type (void) G_GNUC_CONST;
GType gala_workspace_insert_thumb_get_type (void) G_GNUC_CONST;
MetaWorkspace* gala_icon_group_get_workspace (GalaIconGroup* self);
#define GALA_WORKSPACE_INSERT_THUMB_EXPAND_DELAY 300
void gala_workspace_insert_thumb_set_window_thumb (GalaWorkspaceInsertThumb* self, MetaWindow* window);
void gala_icon_group_add_window (GalaIconGroup* self, MetaWindow* window, gboolean no_redraw, gboolean temporary);
void gala_icon_group_remove_window (GalaIconGroup* self, MetaWindow* window, gboolean animate);
static void gala_window_clone_drag_end (GalaWindowClone* self, ClutterActor* destination);
GType gala_background_manager_get_type (void) G_GNUC_CONST;
GType gala_framed_background_get_type (void) G_GNUC_CONST;
GType gala_workspace_clone_get_type (void) G_GNUC_CONST;
MetaWorkspace* gala_workspace_clone_get_workspace (GalaWorkspaceClone* self);
static void gala_window_clone_drag_canceled (GalaWindowClone* self);
gint gala_workspace_insert_thumb_get_workspace_index (GalaWorkspaceInsertThumb* self);
void gala_internal_utils_insert_workspace_with_window (gint index, MetaWindow* new_window);
GType gala_monitor_clone_get_type (void) G_GNUC_CONST;
gint gala_monitor_clone_get_monitor (GalaMonitorClone* self);
static void gala_window_clone_set_window (GalaWindowClone* self, MetaWindow* value);
static MetaRectangle* _meta_rectangle_dup (MetaRectangle* self);
gboolean gala_window_clone_get_active (GalaWindowClone* self);
void gala_window_clone_set_active (GalaWindowClone* self, gboolean value);
static void gala_window_clone_set_overview_mode (GalaWindowClone* self, gboolean value);
guint8 gala_window_clone_get_shadow_opacity (GalaWindowClone* self);
void gala_window_clone_set_shadow_opacity (GalaWindowClone* self, guint8 value);
void gala_shadow_effect_set_shadow_opacity (GalaShadowEffect* self, guint8 value);
static GObject * gala_window_clone_constructor (GType type, guint n_construct_properties, GObjectConstructParam * construct_properties);
static Block38Data* block38_data_ref (Block38Data* _data38_);
static void block38_data_unref (void * _userdata_);
static void _gala_window_clone____lambda71_ (Block38Data* _data38_);
static void __gala_window_clone____lambda71__clutter_click_action_clicked (ClutterClickAction* _sender, ClutterActor* actor, gpointer self);
GType gala_drag_drop_action_type_get_type (void) G_GNUC_CONST;
GalaDragDropAction* gala_drag_drop_action_new (GalaDragDropActionType type, const gchar* id);
GalaDragDropAction* gala_drag_drop_action_construct (GType object_type, GalaDragDropActionType type, const gchar* id);
static ClutterActor* _gala_window_clone_drag_begin_gala_drag_drop_action_drag_begin (GalaDragDropAction* _sender, gfloat x, gfloat y, gpointer self);
static void _gala_window_clone_drag_destination_crossed_gala_drag_drop_action_destination_crossed (GalaDragDropAction* _sender, ClutterActor* destination, gboolean hovered, gpointer self);
static void _gala_window_clone_drag_end_gala_drag_drop_action_drag_end (GalaDragDropAction* _sender, ClutterActor* actor, gpointer self);
static void _gala_window_clone_drag_canceled_gala_drag_drop_action_drag_canceled (GalaDragDropAction* _sender, gpointer self);
static void _gala_window_clone_actor_clicked_gala_drag_drop_action_actor_clicked (GalaDragDropAction* _sender, guint32 button, gpointer self);
static gboolean _gala_window_clone___lambda72_ (GalaWindowClone* self);
static gboolean __gala_window_clone___lambda72__clutter_actor_button_press_event (ClutterActor* _sender, ClutterButtonEvent* event, gpointer self);
static void gala_window_clone_finalize (GObject* obj);
static void _vala_gala_window_clone_get_property (GObject * object, guint property_id, GValue * value, GParamSpec * pspec);
static void _vala_gala_window_clone_set_property (GObject * object, guint property_id, const GValue * value, GParamSpec * pspec);


GalaWindowShadowEffect* gala_window_shadow_effect_construct (GType object_type, MetaWindow* window, gint shadow_size, gint shadow_spread) {
	GalaWindowShadowEffect * self = NULL;
	MetaWindow* _tmp0_ = NULL;
	gint _tmp1_ = 0;
	gint _tmp2_ = 0;
#line 27 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	g_return_val_if_fail (window != NULL, NULL);
#line 29 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	_tmp0_ = window;
#line 29 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	_tmp1_ = shadow_size;
#line 29 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	_tmp2_ = shadow_spread;
#line 29 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	self = (GalaWindowShadowEffect*) g_object_new (object_type, "window", _tmp0_, "shadow-size", _tmp1_, "shadow-spread", _tmp2_, "shadow-opacity", 255, NULL);
#line 27 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	return self;
#line 344 "WindowClone.c"
}


GalaWindowShadowEffect* gala_window_shadow_effect_new (MetaWindow* window, gint shadow_size, gint shadow_spread) {
#line 27 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	return gala_window_shadow_effect_construct (GALA_TYPE_WINDOW_SHADOW_EFFECT, window, shadow_size, shadow_spread);
#line 351 "WindowClone.c"
}


static void gala_window_shadow_effect_real_get_bounding_box (GalaShadowEffect* base, ClutterActorBox* result) {
	GalaWindowShadowEffect * self;
	gfloat size = 0.0F;
	gint _tmp0_ = 0;
	gint _tmp1_ = 0;
	gfloat _tmp2_ = 0.0F;
	gfloat _tmp3_ = 0.0F;
	MetaRectangle input_rect = {0};
	MetaWindow* _tmp4_ = NULL;
	MetaRectangle _tmp5_ = {0};
	MetaRectangle outer_rect = {0};
	MetaWindow* _tmp6_ = NULL;
	MetaRectangle _tmp7_ = {0};
	ClutterActorBox bounding_box = {0};
	MetaRectangle _tmp8_ = {0};
	gint _tmp9_ = 0;
	MetaRectangle _tmp10_ = {0};
	gint _tmp11_ = 0;
	MetaRectangle _tmp12_ = {0};
	gint _tmp13_ = 0;
	MetaRectangle _tmp14_ = {0};
	gint _tmp15_ = 0;
	MetaRectangle _tmp16_ = {0};
	gint _tmp17_ = 0;
	MetaRectangle _tmp18_ = {0};
	gint _tmp19_ = 0;
#line 32 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	self = (GalaWindowShadowEffect*) base;
#line 34 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	_tmp0_ = gala_shadow_effect_get_shadow_size ((GalaShadowEffect*) self);
#line 34 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	_tmp1_ = _tmp0_;
#line 34 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	_tmp2_ = gala_shadow_effect_get_scale_factor ((GalaShadowEffect*) self);
#line 34 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	_tmp3_ = _tmp2_;
#line 34 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	size = _tmp1_ * _tmp3_;
#line 36 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	_tmp4_ = self->priv->_window;
#line 36 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	meta_window_get_buffer_rect (_tmp4_, &_tmp5_);
#line 36 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	input_rect = _tmp5_;
#line 37 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	_tmp6_ = self->priv->_window;
#line 37 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	meta_window_get_frame_rect (_tmp6_, &_tmp7_);
#line 37 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	outer_rect = _tmp7_;
#line 40 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	memset (&bounding_box, 0, sizeof (ClutterActorBox));
#line 41 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	_tmp8_ = input_rect;
#line 41 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	_tmp9_ = _tmp8_.x;
#line 41 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	_tmp10_ = outer_rect;
#line 41 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	_tmp11_ = _tmp10_.x;
#line 41 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	_tmp12_ = input_rect;
#line 41 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	_tmp13_ = _tmp12_.y;
#line 41 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	_tmp14_ = outer_rect;
#line 41 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	_tmp15_ = _tmp14_.y;
#line 41 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	clutter_actor_box_set_origin (&bounding_box, (-(_tmp9_ - _tmp11_)) - size, (-(_tmp13_ - _tmp15_)) - size);
#line 42 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	_tmp16_ = outer_rect;
#line 42 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	_tmp17_ = _tmp16_.width;
#line 42 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	_tmp18_ = outer_rect;
#line 42 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	_tmp19_ = _tmp18_.height;
#line 42 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	clutter_actor_box_set_size (&bounding_box, _tmp17_ + (size * 2), _tmp19_ + (size * 2));
#line 44 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	*result = bounding_box;
#line 44 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	return;
#line 439 "WindowClone.c"
}


MetaWindow* gala_window_shadow_effect_get_window (GalaWindowShadowEffect* self) {
	MetaWindow* result;
	MetaWindow* _tmp0_ = NULL;
#line 25 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	g_return_val_if_fail (self != NULL, NULL);
#line 25 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	_tmp0_ = self->priv->_window;
#line 25 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	result = _tmp0_;
#line 25 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	return result;
#line 454 "WindowClone.c"
}


static gpointer _g_object_ref0 (gpointer self) {
#line 25 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	return self ? g_object_ref (self) : NULL;
#line 461 "WindowClone.c"
}


static void gala_window_shadow_effect_set_window (GalaWindowShadowEffect* self, MetaWindow* value) {
	MetaWindow* _tmp0_ = NULL;
	MetaWindow* _tmp1_ = NULL;
#line 25 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	g_return_if_fail (self != NULL);
#line 25 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	_tmp0_ = value;
#line 25 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	_tmp1_ = _g_object_ref0 (_tmp0_);
#line 25 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	_g_object_unref0 (self->priv->_window);
#line 25 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	self->priv->_window = _tmp1_;
#line 25 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	g_object_notify ((GObject *) self, "window");
#line 480 "WindowClone.c"
}


static void gala_window_shadow_effect_class_init (GalaWindowShadowEffectClass * klass) {
#line 23 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	gala_window_shadow_effect_parent_class = g_type_class_peek_parent (klass);
#line 23 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	g_type_class_add_private (klass, sizeof (GalaWindowShadowEffectPrivate));
#line 23 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	((GalaShadowEffectClass *) klass)->get_bounding_box = gala_window_shadow_effect_real_get_bounding_box;
#line 23 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	G_OBJECT_CLASS (klass)->get_property = _vala_gala_window_shadow_effect_get_property;
#line 23 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	G_OBJECT_CLASS (klass)->set_property = _vala_gala_window_shadow_effect_set_property;
#line 23 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	G_OBJECT_CLASS (klass)->finalize = gala_window_shadow_effect_finalize;
#line 23 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	g_object_class_install_property (G_OBJECT_CLASS (klass), GALA_WINDOW_SHADOW_EFFECT_WINDOW, g_param_spec_object ("window", "window", "window", meta_window_get_type (), G_PARAM_STATIC_NAME | G_PARAM_STATIC_NICK | G_PARAM_STATIC_BLURB | G_PARAM_READABLE | G_PARAM_WRITABLE | G_PARAM_CONSTRUCT_ONLY));
#line 499 "WindowClone.c"
}


static void gala_window_shadow_effect_instance_init (GalaWindowShadowEffect * self) {
#line 23 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	self->priv = GALA_WINDOW_SHADOW_EFFECT_GET_PRIVATE (self);
#line 506 "WindowClone.c"
}


static void gala_window_shadow_effect_finalize (GObject* obj) {
	GalaWindowShadowEffect * self;
#line 23 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	self = G_TYPE_CHECK_INSTANCE_CAST (obj, GALA_TYPE_WINDOW_SHADOW_EFFECT, GalaWindowShadowEffect);
#line 25 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	_g_object_unref0 (self->priv->_window);
#line 23 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	G_OBJECT_CLASS (gala_window_shadow_effect_parent_class)->finalize (obj);
#line 518 "WindowClone.c"
}


GType gala_window_shadow_effect_get_type (void) {
	static volatile gsize gala_window_shadow_effect_type_id__volatile = 0;
	if (g_once_init_enter (&gala_window_shadow_effect_type_id__volatile)) {
		static const GTypeInfo g_define_type_info = { sizeof (GalaWindowShadowEffectClass), (GBaseInitFunc) NULL, (GBaseFinalizeFunc) NULL, (GClassInitFunc) gala_window_shadow_effect_class_init, (GClassFinalizeFunc) NULL, NULL, sizeof (GalaWindowShadowEffect), 0, (GInstanceInitFunc) gala_window_shadow_effect_instance_init, NULL };
		GType gala_window_shadow_effect_type_id;
		gala_window_shadow_effect_type_id = g_type_register_static (GALA_TYPE_SHADOW_EFFECT, "GalaWindowShadowEffect", &g_define_type_info, 0);
		g_once_init_leave (&gala_window_shadow_effect_type_id__volatile, gala_window_shadow_effect_type_id);
	}
	return gala_window_shadow_effect_type_id__volatile;
}


static void _vala_gala_window_shadow_effect_get_property (GObject * object, guint property_id, GValue * value, GParamSpec * pspec) {
	GalaWindowShadowEffect * self;
	self = G_TYPE_CHECK_INSTANCE_CAST (object, GALA_TYPE_WINDOW_SHADOW_EFFECT, GalaWindowShadowEffect);
#line 23 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	switch (property_id) {
#line 23 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
		case GALA_WINDOW_SHADOW_EFFECT_WINDOW:
#line 23 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
		g_value_set_object (value, gala_window_shadow_effect_get_window (self));
#line 23 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
		break;
#line 545 "WindowClone.c"
		default:
#line 23 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
		G_OBJECT_WARN_INVALID_PROPERTY_ID (object, property_id, pspec);
#line 23 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
		break;
#line 551 "WindowClone.c"
	}
}


static void _vala_gala_window_shadow_effect_set_property (GObject * object, guint property_id, const GValue * value, GParamSpec * pspec) {
	GalaWindowShadowEffect * self;
	self = G_TYPE_CHECK_INSTANCE_CAST (object, GALA_TYPE_WINDOW_SHADOW_EFFECT, GalaWindowShadowEffect);
#line 23 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	switch (property_id) {
#line 23 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
		case GALA_WINDOW_SHADOW_EFFECT_WINDOW:
#line 23 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
		gala_window_shadow_effect_set_window (self, g_value_get_object (value));
#line 23 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
		break;
#line 567 "WindowClone.c"
		default:
#line 23 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
		G_OBJECT_WARN_INVALID_PROPERTY_ID (object, property_id, pspec);
#line 23 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
		break;
#line 573 "WindowClone.c"
	}
}


static void _gala_window_clone_unmanaged_meta_window_unmanaged (MetaWindow* _sender, gpointer self) {
#line 182 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	gala_window_clone_unmanaged ((GalaWindowClone*) self);
#line 581 "WindowClone.c"
}


static void _gala_window_clone_on_all_workspaces_changed_g_object_notify (GObject* _sender, GParamSpec* pspec, gpointer self) {
#line 183 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	gala_window_clone_on_all_workspaces_changed ((GalaWindowClone*) self);
#line 588 "WindowClone.c"
}


GalaWindowClone* gala_window_clone_construct (GType object_type, MetaWindow* window, gboolean overview_mode) {
	GalaWindowClone * self = NULL;
	MetaWindow* _tmp0_ = NULL;
	gboolean _tmp1_ = FALSE;
#line 127 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	g_return_val_if_fail (window != NULL, NULL);
#line 129 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	_tmp0_ = window;
#line 129 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	_tmp1_ = overview_mode;
#line 129 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	self = (GalaWindowClone*) g_object_new (object_type, "window", _tmp0_, "overview-mode", _tmp1_, NULL);
#line 127 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	return self;
#line 606 "WindowClone.c"
}


GalaWindowClone* gala_window_clone_new (MetaWindow* window, gboolean overview_mode) {
#line 127 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	return gala_window_clone_construct (GALA_TYPE_WINDOW_CLONE, window, overview_mode);
#line 613 "WindowClone.c"
}


/**
 * Waits for the texture of a new WindowActor to be available
 * and makes a close of it. If it was already was assigned a slot
 * at this point it will animate to it. Otherwise it will just place
 * itself at the location of the original window. Also adds the shadow
 * effect and makes sure the shadow is updated on size changes.
 *
 * @param was_waiting Internal argument used to indicate that we had to 
 *                    wait before the window's texture became available.
 */
static gboolean ___lambda63_ (GalaWindowClone* self) {
	gboolean result = FALSE;
	MetaWindow* _tmp0_ = NULL;
	GObject* _tmp1_ = NULL;
#line 204 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	_tmp0_ = self->priv->_window;
#line 204 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	_tmp1_ = meta_window_get_compositor_private (_tmp0_);
#line 204 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	if (_tmp1_ != NULL) {
#line 205 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
		gala_window_clone_load_clone (self, TRUE);
#line 639 "WindowClone.c"
	}
#line 206 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	result = FALSE;
#line 206 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	return result;
#line 645 "WindowClone.c"
}


static gboolean ____lambda63__gsource_func (gpointer self) {
	gboolean result;
	result = ___lambda63_ ((GalaWindowClone*) self);
#line 203 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	return result;
#line 654 "WindowClone.c"
}


static void gala_window_clone_load_clone (GalaWindowClone* self, gboolean was_waiting) {
	MetaWindowActor* actor = NULL;
	MetaWindow* _tmp0_ = NULL;
	GObject* _tmp1_ = NULL;
	MetaWindowActor* _tmp2_ = NULL;
	MetaWindowActor* _tmp3_ = NULL;
	gboolean _tmp4_ = FALSE;
	MetaWindowActor* _tmp6_ = NULL;
	ClutterActor* _tmp7_ = NULL;
	ClutterClone* _tmp8_ = NULL;
	ClutterClone* _tmp9_ = NULL;
	ClutterActor* _tmp10_ = NULL;
	ClutterClone* _tmp11_ = NULL;
	ClutterActor* _tmp12_ = NULL;
	ClutterClone* _tmp13_ = NULL;
	ClutterActor* _tmp14_ = NULL;
	ClutterClone* _tmp15_ = NULL;
	MetaWindow* _tmp16_ = NULL;
	GalaWindowShadowEffect* _tmp17_ = NULL;
	ClutterClone* _tmp18_ = NULL;
	GalaShadowEffect* _tmp19_ = NULL;
	gboolean _tmp20_ = FALSE;
	gboolean _tmp21_ = FALSE;
	gboolean _tmp22_ = FALSE;
#line 199 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	g_return_if_fail (self != NULL);
#line 201 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	_tmp0_ = self->priv->_window;
#line 201 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	_tmp1_ = meta_window_get_compositor_private (_tmp0_);
#line 201 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	_tmp2_ = _g_object_ref0 (G_TYPE_CHECK_INSTANCE_TYPE (_tmp1_, meta_window_actor_get_type ()) ? ((MetaWindowActor*) _tmp1_) : NULL);
#line 201 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	actor = _tmp2_;
#line 202 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	_tmp3_ = actor;
#line 202 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	if (_tmp3_ == NULL) {
#line 203 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
		g_idle_add_full (G_PRIORITY_DEFAULT_IDLE, ____lambda63__gsource_func, g_object_ref (self), g_object_unref);
#line 209 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
		_g_object_unref0 (actor);
#line 209 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
		return;
#line 702 "WindowClone.c"
	}
#line 212 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	_tmp4_ = self->priv->_overview_mode;
#line 212 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	if (_tmp4_) {
#line 708 "WindowClone.c"
		MetaWindowActor* _tmp5_ = NULL;
#line 213 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
		_tmp5_ = actor;
#line 213 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
		clutter_actor_hide ((ClutterActor*) _tmp5_);
#line 714 "WindowClone.c"
	}
#line 215 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	_tmp6_ = actor;
#line 215 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	_tmp7_ = meta_window_actor_get_texture (_tmp6_);
#line 215 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	_tmp8_ = (ClutterClone*) clutter_clone_new (_tmp7_);
#line 215 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	g_object_ref_sink (_tmp8_);
#line 215 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	_g_object_unref0 (self->priv->clone);
#line 215 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	self->priv->clone = _tmp8_;
#line 216 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	_tmp9_ = self->priv->clone;
#line 216 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	clutter_actor_add_child ((ClutterActor*) self, (ClutterActor*) _tmp9_);
#line 218 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	_tmp10_ = self->priv->active_shape;
#line 218 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	_tmp11_ = self->priv->clone;
#line 218 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	clutter_actor_set_child_below_sibling ((ClutterActor*) self, _tmp10_, (ClutterActor*) _tmp11_);
#line 219 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	_tmp12_ = self->priv->close_button;
#line 219 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	_tmp13_ = self->priv->clone;
#line 219 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	clutter_actor_set_child_above_sibling ((ClutterActor*) self, _tmp12_, (ClutterActor*) _tmp13_);
#line 220 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	_tmp14_ = self->priv->window_icon;
#line 220 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	_tmp15_ = self->priv->clone;
#line 220 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	clutter_actor_set_child_above_sibling ((ClutterActor*) self, _tmp14_, (ClutterActor*) _tmp15_);
#line 222 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	gala_window_clone_transition_to_original_state (self, FALSE);
#line 224 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	_tmp16_ = self->priv->_window;
#line 224 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	_tmp17_ = gala_window_shadow_effect_new (_tmp16_, 40, 5);
#line 224 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	g_object_ref_sink (_tmp17_);
#line 224 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	_g_object_unref0 (self->priv->shadow_effect);
#line 224 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	self->priv->shadow_effect = (GalaShadowEffect*) _tmp17_;
#line 225 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	_tmp18_ = self->priv->clone;
#line 225 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	_tmp19_ = self->priv->shadow_effect;
#line 225 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	clutter_actor_add_effect_with_name ((ClutterActor*) _tmp18_, "shadow", (ClutterEffect*) _tmp19_);
#line 227 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	_tmp20_ = gala_window_clone_should_fade (self);
#line 227 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	if (_tmp20_) {
#line 228 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
		clutter_actor_set_opacity ((ClutterActor*) self, (guint) 0);
#line 774 "WindowClone.c"
	}
#line 234 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	_tmp22_ = was_waiting;
#line 234 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	if (_tmp22_) {
#line 780 "WindowClone.c"
		MetaRectangle* _tmp23_ = NULL;
#line 234 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
		_tmp23_ = self->priv->_slot;
#line 234 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
		_tmp21_ = _tmp23_ != NULL;
#line 786 "WindowClone.c"
	} else {
#line 234 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
		_tmp21_ = FALSE;
#line 790 "WindowClone.c"
	}
#line 234 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	if (_tmp21_) {
#line 794 "WindowClone.c"
		MetaRectangle* _tmp24_ = NULL;
		MetaRectangle _tmp25_ = {0};
#line 235 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
		clutter_actor_set_opacity ((ClutterActor*) self, (guint) 0);
#line 236 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
		_tmp24_ = self->priv->_slot;
#line 236 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
		_tmp25_ = *_tmp24_;
#line 236 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
		gala_window_clone_take_slot (self, &_tmp25_);
#line 237 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
		clutter_actor_set_opacity ((ClutterActor*) self, (guint) 255);
#line 239 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
		g_signal_emit_by_name (self, "request-reposition");
#line 809 "WindowClone.c"
	}
#line 199 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	_g_object_unref0 (actor);
#line 813 "WindowClone.c"
}


/**
 * If we are in overview mode, we may display windows from workspaces other than
 * the current one. To ease their appearance we have to fade them in.
 */
static gboolean gala_window_clone_should_fade (GalaWindowClone* self) {
	gboolean result = FALSE;
	gboolean _tmp0_ = FALSE;
	gboolean _tmp1_ = FALSE;
#line 247 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	g_return_val_if_fail (self != NULL, FALSE);
#line 249 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	_tmp1_ = self->priv->_overview_mode;
#line 249 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	if (_tmp1_) {
#line 831 "WindowClone.c"
		MetaWindow* _tmp2_ = NULL;
		MetaWorkspace* _tmp3_ = NULL;
		MetaWindow* _tmp4_ = NULL;
		MetaScreen* _tmp5_ = NULL;
		MetaWorkspace* _tmp6_ = NULL;
#line 250 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
		_tmp2_ = self->priv->_window;
#line 250 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
		_tmp3_ = meta_window_get_workspace (_tmp2_);
#line 250 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
		_tmp4_ = self->priv->_window;
#line 250 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
		_tmp5_ = meta_window_get_screen (_tmp4_);
#line 250 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
		_tmp6_ = meta_screen_get_active_workspace (_tmp5_);
#line 250 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
		_tmp0_ = _tmp3_ != _tmp6_;
#line 849 "WindowClone.c"
	} else {
#line 249 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
		_tmp0_ = FALSE;
#line 853 "WindowClone.c"
	}
#line 249 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	result = _tmp0_;
#line 249 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	return result;
#line 859 "WindowClone.c"
}


static void gala_window_clone_on_all_workspaces_changed (GalaWindowClone* self) {
	MetaWindow* _tmp0_ = NULL;
	gboolean _tmp1_ = FALSE;
	gboolean _tmp2_ = FALSE;
#line 253 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	g_return_if_fail (self != NULL);
#line 256 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	_tmp0_ = self->priv->_window;
#line 256 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	g_object_get (_tmp0_, "on-all-workspaces", &_tmp1_, NULL);
#line 256 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	_tmp2_ = _tmp1_;
#line 256 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	if (_tmp2_) {
#line 257 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
		gala_window_clone_unmanaged (self);
#line 879 "WindowClone.c"
	}
}


/**
 * Place the window at the location of the original MetaWindow
 *
 * @param animate Animate the transformation of the placement
 */
void gala_window_clone_transition_to_original_state (GalaWindowClone* self, gboolean animate) {
	MetaRectangle outer_rect = {0};
	MetaWindow* _tmp0_ = NULL;
	MetaRectangle _tmp1_ = {0};
	MetaRectangle monitor_geom = {0};
	MetaWindow* _tmp2_ = NULL;
	MetaScreen* _tmp3_ = NULL;
	MetaWindow* _tmp4_ = NULL;
	gint _tmp5_ = 0;
	MetaRectangle _tmp6_ = {0};
	gint offset_x = 0;
	MetaRectangle _tmp7_ = {0};
	gint _tmp8_ = 0;
	gint offset_y = 0;
	MetaRectangle _tmp9_ = {0};
	gint _tmp10_ = 0;
	gint _tmp11_ = 0;
	gboolean _tmp12_ = FALSE;
	MetaRectangle _tmp13_ = {0};
	gint _tmp14_ = 0;
	gint _tmp15_ = 0;
	MetaRectangle _tmp16_ = {0};
	gint _tmp17_ = 0;
	gint _tmp18_ = 0;
	MetaRectangle _tmp19_ = {0};
	gint _tmp20_ = 0;
	MetaRectangle _tmp21_ = {0};
	gint _tmp22_ = 0;
	gboolean _tmp23_ = FALSE;
	ClutterActor* _tmp24_ = NULL;
	ClutterActor* _tmp25_ = NULL;
	gboolean _tmp26_ = FALSE;
#line 265 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	g_return_if_fail (self != NULL);
#line 267 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	_tmp0_ = self->priv->_window;
#line 267 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	meta_window_get_frame_rect (_tmp0_, &_tmp1_);
#line 267 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	outer_rect = _tmp1_;
#line 269 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	_tmp2_ = self->priv->_window;
#line 269 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	_tmp3_ = meta_window_get_screen (_tmp2_);
#line 269 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	_tmp4_ = self->priv->_window;
#line 269 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	_tmp5_ = meta_window_get_monitor (_tmp4_);
#line 269 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	meta_screen_get_monitor_geometry (_tmp3_, _tmp5_, &_tmp6_);
#line 269 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	monitor_geom = _tmp6_;
#line 270 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	_tmp7_ = monitor_geom;
#line 270 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	_tmp8_ = _tmp7_.x;
#line 270 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	offset_x = _tmp8_;
#line 271 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	_tmp9_ = monitor_geom;
#line 271 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	_tmp10_ = _tmp9_.y;
#line 271 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	offset_y = _tmp10_;
#line 273 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	clutter_actor_save_easing_state ((ClutterActor*) self);
#line 274 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	clutter_actor_set_easing_mode ((ClutterActor*) self, GALA_MULTITASKING_VIEW_ANIMATION_MODE);
#line 275 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	_tmp12_ = animate;
#line 275 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	if (_tmp12_) {
#line 275 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
		_tmp11_ = GALA_MULTITASKING_VIEW_ANIMATION_DURATION;
#line 963 "WindowClone.c"
	} else {
#line 275 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
		_tmp11_ = 0;
#line 967 "WindowClone.c"
	}
#line 275 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	clutter_actor_set_easing_duration ((ClutterActor*) self, (guint) _tmp11_);
#line 277 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	_tmp13_ = outer_rect;
#line 277 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	_tmp14_ = _tmp13_.x;
#line 277 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	_tmp15_ = offset_x;
#line 277 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	_tmp16_ = outer_rect;
#line 277 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	_tmp17_ = _tmp16_.y;
#line 277 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	_tmp18_ = offset_y;
#line 277 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	clutter_actor_set_position ((ClutterActor*) self, (gfloat) (_tmp14_ - _tmp15_), (gfloat) (_tmp17_ - _tmp18_));
#line 278 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	_tmp19_ = outer_rect;
#line 278 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	_tmp20_ = _tmp19_.width;
#line 278 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	_tmp21_ = outer_rect;
#line 278 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	_tmp22_ = _tmp21_.height;
#line 278 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	clutter_actor_set_size ((ClutterActor*) self, (gfloat) _tmp20_, (gfloat) _tmp22_);
#line 279 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	clutter_actor_restore_easing_state ((ClutterActor*) self);
#line 281 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	_tmp23_ = animate;
#line 281 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	if (_tmp23_) {
#line 282 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
		gala_window_clone_toggle_shadow (self, FALSE);
#line 1003 "WindowClone.c"
	}
#line 284 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	_tmp24_ = self->priv->window_icon;
#line 284 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	clutter_actor_set_opacity (_tmp24_, (guint) 0);
#line 285 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	_tmp25_ = self->priv->close_button;
#line 285 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	clutter_actor_set_opacity (_tmp25_, (guint) 0);
#line 287 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	_tmp26_ = gala_window_clone_should_fade (self);
#line 287 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	if (_tmp26_) {
#line 288 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
		clutter_actor_set_opacity ((ClutterActor*) self, (guint) 0);
#line 1019 "WindowClone.c"
	}
}


/**
 * Animate the window to the given slot
 */
void gala_window_clone_take_slot (GalaWindowClone* self, MetaRectangle* rect) {
	MetaRectangle _tmp0_ = {0};
	MetaRectangle _tmp1_ = {0};
	gint _tmp2_ = 0;
	MetaRectangle _tmp3_ = {0};
	gint _tmp4_ = 0;
	MetaRectangle _tmp5_ = {0};
	gint _tmp6_ = 0;
	MetaRectangle _tmp7_ = {0};
	gint _tmp8_ = 0;
	ClutterActor* _tmp9_ = NULL;
	gboolean _tmp10_ = FALSE;
#line 294 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	g_return_if_fail (self != NULL);
#line 294 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	g_return_if_fail (rect != NULL);
#line 296 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	_tmp0_ = *rect;
#line 296 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	gala_window_clone_set_slot (self, &_tmp0_);
#line 298 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	clutter_actor_save_easing_state ((ClutterActor*) self);
#line 299 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	clutter_actor_set_easing_duration ((ClutterActor*) self, (guint) GALA_MULTITASKING_VIEW_ANIMATION_DURATION);
#line 300 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	clutter_actor_set_easing_mode ((ClutterActor*) self, GALA_MULTITASKING_VIEW_ANIMATION_MODE);
#line 302 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	_tmp1_ = *rect;
#line 302 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	_tmp2_ = _tmp1_.width;
#line 302 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	_tmp3_ = *rect;
#line 302 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	_tmp4_ = _tmp3_.height;
#line 302 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	clutter_actor_set_size ((ClutterActor*) self, (gfloat) _tmp2_, (gfloat) _tmp4_);
#line 303 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	_tmp5_ = *rect;
#line 303 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	_tmp6_ = _tmp5_.x;
#line 303 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	_tmp7_ = *rect;
#line 303 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	_tmp8_ = _tmp7_.y;
#line 303 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	clutter_actor_set_position ((ClutterActor*) self, (gfloat) _tmp6_, (gfloat) _tmp8_);
#line 305 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	_tmp9_ = self->priv->window_icon;
#line 305 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	clutter_actor_set_opacity (_tmp9_, (guint) 255);
#line 306 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	clutter_actor_restore_easing_state ((ClutterActor*) self);
#line 308 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	gala_window_clone_toggle_shadow (self, TRUE);
#line 312 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	_tmp10_ = self->priv->_overview_mode;
#line 312 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	if (_tmp10_) {
#line 313 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
		clutter_actor_save_easing_state ((ClutterActor*) self);
#line 314 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
		clutter_actor_set_easing_mode ((ClutterActor*) self, CLUTTER_EASE_OUT_QUAD);
#line 315 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
		clutter_actor_set_easing_duration ((ClutterActor*) self, (guint) 300);
#line 317 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
		clutter_actor_set_opacity ((ClutterActor*) self, (guint) 255);
#line 318 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
		clutter_actor_restore_easing_state ((ClutterActor*) self);
#line 1095 "WindowClone.c"
	}
}


/**
 * Except for the texture clone and the highlight all children are placed
 * according to their given allocations. The first two are placed in a way
 * that compensates for invisible borders of the texture.
 */
static void gala_window_clone_real_allocate (ClutterActor* base, ClutterActorBox* box, ClutterAllocationFlags flags) {
	GalaWindowClone * self;
	ClutterActorBox _tmp0_ = {0};
	ClutterAllocationFlags _tmp1_ = 0;
	GList* _tmp2_ = NULL;
	ClutterActorBox shape_alloc = {0};
	gfloat _tmp10_ = 0.0F;
	gfloat _tmp11_ = 0.0F;
	ClutterActorBox _tmp12_ = {0};
	ClutterActor* _tmp13_ = NULL;
	ClutterActorBox _tmp14_ = {0};
	ClutterAllocationFlags _tmp15_ = 0;
	gboolean _tmp16_ = FALSE;
	ClutterClone* _tmp17_ = NULL;
	MetaWindowActor* actor = NULL;
	MetaWindow* _tmp19_ = NULL;
	GObject* _tmp20_ = NULL;
	MetaWindowActor* _tmp21_ = NULL;
	MetaRectangle input_rect = {0};
	MetaWindow* _tmp22_ = NULL;
	MetaRectangle _tmp23_ = {0};
	MetaRectangle outer_rect = {0};
	MetaWindow* _tmp24_ = NULL;
	MetaRectangle _tmp25_ = {0};
	gfloat scale_factor = 0.0F;
	gfloat _tmp26_ = 0.0F;
	gfloat _tmp27_ = 0.0F;
	MetaRectangle _tmp28_ = {0};
	gint _tmp29_ = 0;
	ClutterActorBox alloc = {0};
	ClutterActorBox _tmp30_ = {0};
	MetaRectangle _tmp31_ = {0};
	gint _tmp32_ = 0;
	MetaRectangle _tmp33_ = {0};
	gint _tmp34_ = 0;
	gfloat _tmp35_ = 0.0F;
	MetaRectangle _tmp36_ = {0};
	gint _tmp37_ = 0;
	MetaRectangle _tmp38_ = {0};
	gint _tmp39_ = 0;
	gfloat _tmp40_ = 0.0F;
	MetaWindowActor* _tmp41_ = NULL;
	gfloat _tmp42_ = 0.0F;
	gfloat _tmp43_ = 0.0F;
	gfloat _tmp44_ = 0.0F;
	MetaWindowActor* _tmp45_ = NULL;
	gfloat _tmp46_ = 0.0F;
	gfloat _tmp47_ = 0.0F;
	gfloat _tmp48_ = 0.0F;
	ClutterClone* _tmp49_ = NULL;
	ClutterActorBox _tmp50_ = {0};
	ClutterAllocationFlags _tmp51_ = 0;
#line 327 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	self = (GalaWindowClone*) base;
#line 327 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	g_return_if_fail (box != NULL);
#line 329 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	_tmp0_ = *box;
#line 329 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	_tmp1_ = flags;
#line 329 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	CLUTTER_ACTOR_CLASS (gala_window_clone_parent_class)->allocate (G_TYPE_CHECK_INSTANCE_CAST (self, clutter_actor_get_type (), ClutterActor), &_tmp0_, _tmp1_);
#line 331 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	_tmp2_ = clutter_actor_get_children ((ClutterActor*) self);
#line 1169 "WindowClone.c"
	{
		GList* child_collection = NULL;
		GList* child_it = NULL;
#line 331 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
		child_collection = _tmp2_;
#line 331 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
		for (child_it = child_collection; child_it != NULL; child_it = child_it->next) {
#line 1177 "WindowClone.c"
			ClutterActor* child = NULL;
#line 331 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
			child = (ClutterActor*) child_it->data;
#line 1181 "WindowClone.c"
			{
				gboolean _tmp3_ = FALSE;
				ClutterActor* _tmp4_ = NULL;
				ClutterClone* _tmp5_ = NULL;
#line 332 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
				_tmp4_ = child;
#line 332 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
				_tmp5_ = self->priv->clone;
#line 332 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
				if (_tmp4_ != G_TYPE_CHECK_INSTANCE_CAST (_tmp5_, clutter_actor_get_type (), ClutterActor)) {
#line 1192 "WindowClone.c"
					ClutterActor* _tmp6_ = NULL;
					ClutterActor* _tmp7_ = NULL;
#line 332 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
					_tmp6_ = child;
#line 332 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
					_tmp7_ = self->priv->active_shape;
#line 332 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
					_tmp3_ = _tmp6_ != _tmp7_;
#line 1201 "WindowClone.c"
				} else {
#line 332 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
					_tmp3_ = FALSE;
#line 1205 "WindowClone.c"
				}
#line 332 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
				if (_tmp3_) {
#line 1209 "WindowClone.c"
					ClutterActor* _tmp8_ = NULL;
					ClutterAllocationFlags _tmp9_ = 0;
#line 333 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
					_tmp8_ = child;
#line 333 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
					_tmp9_ = flags;
#line 333 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
					clutter_actor_allocate_preferred_size (_tmp8_, _tmp9_);
#line 1218 "WindowClone.c"
				}
			}
		}
#line 331 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
		_g_list_free0 (child_collection);
#line 1224 "WindowClone.c"
	}
#line 336 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	_tmp10_ = clutter_actor_box_get_width (box);
#line 336 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	_tmp11_ = clutter_actor_box_get_height (box);
#line 336 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	_tmp12_.x1 = (gfloat) (-GALA_WINDOW_CLONE_ACTIVE_SHAPE_SIZE);
#line 336 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	_tmp12_.y1 = (gfloat) (-GALA_WINDOW_CLONE_ACTIVE_SHAPE_SIZE);
#line 336 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	_tmp12_.x2 = _tmp10_ + GALA_WINDOW_CLONE_ACTIVE_SHAPE_SIZE;
#line 336 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	_tmp12_.y2 = _tmp11_ + GALA_WINDOW_CLONE_ACTIVE_SHAPE_SIZE;
#line 336 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	shape_alloc = _tmp12_;
#line 342 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	_tmp13_ = self->priv->active_shape;
#line 342 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	_tmp14_ = shape_alloc;
#line 342 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	_tmp15_ = flags;
#line 342 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	clutter_actor_allocate (_tmp13_, &_tmp14_, _tmp15_);
#line 344 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	_tmp17_ = self->priv->clone;
#line 344 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	if (_tmp17_ == NULL) {
#line 344 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
		_tmp16_ = TRUE;
#line 1254 "WindowClone.c"
	} else {
		gboolean _tmp18_ = FALSE;
#line 344 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
		_tmp18_ = self->priv->_dragging;
#line 344 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
		_tmp16_ = _tmp18_;
#line 1261 "WindowClone.c"
	}
#line 344 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	if (_tmp16_) {
#line 345 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
		return;
#line 1267 "WindowClone.c"
	}
#line 347 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	_tmp19_ = self->priv->_window;
#line 347 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	_tmp20_ = meta_window_get_compositor_private (_tmp19_);
#line 347 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	_tmp21_ = _g_object_ref0 (G_TYPE_CHECK_INSTANCE_CAST (_tmp20_, meta_window_actor_get_type (), MetaWindowActor));
#line 347 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	actor = _tmp21_;
#line 348 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	_tmp22_ = self->priv->_window;
#line 348 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	meta_window_get_buffer_rect (_tmp22_, &_tmp23_);
#line 348 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	input_rect = _tmp23_;
#line 349 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	_tmp24_ = self->priv->_window;
#line 349 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	meta_window_get_frame_rect (_tmp24_, &_tmp25_);
#line 349 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	outer_rect = _tmp25_;
#line 350 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	_tmp26_ = clutter_actor_get_width ((ClutterActor*) self);
#line 350 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	_tmp27_ = _tmp26_;
#line 350 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	_tmp28_ = outer_rect;
#line 350 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	_tmp29_ = _tmp28_.width;
#line 350 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	scale_factor = ((gfloat) _tmp27_) / _tmp29_;
#line 352 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	alloc = _tmp30_;
#line 353 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	_tmp31_ = input_rect;
#line 353 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	_tmp32_ = _tmp31_.x;
#line 353 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	_tmp33_ = outer_rect;
#line 353 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	_tmp34_ = _tmp33_.x;
#line 353 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	_tmp35_ = scale_factor;
#line 353 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	_tmp36_ = input_rect;
#line 353 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	_tmp37_ = _tmp36_.y;
#line 353 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	_tmp38_ = outer_rect;
#line 353 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	_tmp39_ = _tmp38_.y;
#line 353 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	_tmp40_ = scale_factor;
#line 353 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	clutter_actor_box_set_origin (&alloc, (_tmp32_ - _tmp34_) * _tmp35_, (_tmp37_ - _tmp39_) * _tmp40_);
#line 355 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	_tmp41_ = actor;
#line 355 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	_tmp42_ = clutter_actor_get_width ((ClutterActor*) _tmp41_);
#line 355 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	_tmp43_ = _tmp42_;
#line 355 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	_tmp44_ = scale_factor;
#line 355 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	_tmp45_ = actor;
#line 355 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	_tmp46_ = clutter_actor_get_height ((ClutterActor*) _tmp45_);
#line 355 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	_tmp47_ = _tmp46_;
#line 355 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	_tmp48_ = scale_factor;
#line 355 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	clutter_actor_box_set_size (&alloc, _tmp43_ * _tmp44_, _tmp47_ * _tmp48_);
#line 357 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	_tmp49_ = self->priv->clone;
#line 357 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	_tmp50_ = alloc;
#line 357 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	_tmp51_ = flags;
#line 357 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	clutter_actor_allocate ((ClutterActor*) _tmp49_, &_tmp50_, _tmp51_);
#line 327 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	_g_object_unref0 (actor);
#line 1351 "WindowClone.c"
}


static gboolean gala_window_clone_real_button_press_event (ClutterActor* base, ClutterButtonEvent* event) {
	GalaWindowClone * self;
	gboolean result = FALSE;
#line 360 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	self = (GalaWindowClone*) base;
#line 360 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	g_return_val_if_fail (event != NULL, FALSE);
#line 362 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	result = TRUE;
#line 362 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	return result;
#line 1366 "WindowClone.c"
}


static gboolean gala_window_clone_real_enter_event (ClutterActor* base, ClutterCrossingEvent* event) {
	GalaWindowClone * self;
	gboolean result = FALSE;
	ClutterActor* _tmp0_ = NULL;
#line 365 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	self = (GalaWindowClone*) base;
#line 365 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	g_return_val_if_fail (event != NULL, FALSE);
#line 367 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	_tmp0_ = self->priv->close_button;
#line 367 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	clutter_actor_set_opacity (_tmp0_, (guint) 255);
#line 369 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	result = FALSE;
#line 369 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	return result;
#line 1386 "WindowClone.c"
}


static gboolean gala_window_clone_real_leave_event (ClutterActor* base, ClutterCrossingEvent* event) {
	GalaWindowClone * self;
	gboolean result = FALSE;
	ClutterActor* _tmp0_ = NULL;
#line 372 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	self = (GalaWindowClone*) base;
#line 372 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	g_return_val_if_fail (event != NULL, FALSE);
#line 374 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	_tmp0_ = self->priv->close_button;
#line 374 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	clutter_actor_set_opacity (_tmp0_, (guint) 0);
#line 376 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	result = FALSE;
#line 376 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	return result;
#line 1406 "WindowClone.c"
}


/**
 * Place the widgets, that is the close button and the WindowIcon of the window,
 * at their positions inside the actor for a given width and height.
 */
void gala_window_clone_place_widgets (GalaWindowClone* self, gint dest_width, gint dest_height) {
	GraniteCloseButtonPosition pos = 0;
	GraniteCloseButtonPosition _tmp0_ = 0;
	ClutterActor* _tmp1_ = NULL;
	ClutterActor* _tmp2_ = NULL;
	ClutterActor* _tmp3_ = NULL;
	ClutterActor* _tmp4_ = NULL;
	gfloat _tmp5_ = 0.0F;
	gfloat _tmp6_ = 0.0F;
	GraniteCloseButtonPosition _tmp7_ = 0;
	ClutterActor* _tmp17_ = NULL;
	gboolean _tmp18_ = FALSE;
#line 383 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	g_return_if_fail (self != NULL);
#line 386 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	granite_widgets_utils_get_default_close_button_position (&_tmp0_);
#line 386 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	pos = _tmp0_;
#line 388 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	_tmp1_ = self->priv->close_button;
#line 388 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	clutter_actor_save_easing_state (_tmp1_);
#line 389 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	_tmp2_ = self->priv->close_button;
#line 389 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	clutter_actor_set_easing_duration (_tmp2_, (guint) 0);
#line 391 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	_tmp3_ = self->priv->close_button;
#line 391 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	_tmp4_ = self->priv->close_button;
#line 391 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	_tmp5_ = clutter_actor_get_height (_tmp4_);
#line 391 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	_tmp6_ = _tmp5_;
#line 391 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	clutter_actor_set_y (_tmp3_, (-_tmp6_) * 0.33f);
#line 393 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	_tmp7_ = pos;
#line 393 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	switch (_tmp7_) {
#line 393 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
		case GRANITE_CLOSE_BUTTON_POSITION_RIGHT:
#line 1456 "WindowClone.c"
		{
			ClutterActor* _tmp8_ = NULL;
			gint _tmp9_ = 0;
			ClutterActor* _tmp10_ = NULL;
			gfloat _tmp11_ = 0.0F;
			gfloat _tmp12_ = 0.0F;
#line 395 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
			_tmp8_ = self->priv->close_button;
#line 395 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
			_tmp9_ = dest_width;
#line 395 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
			_tmp10_ = self->priv->close_button;
#line 395 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
			_tmp11_ = clutter_actor_get_width (_tmp10_);
#line 395 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
			_tmp12_ = _tmp11_;
#line 395 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
			clutter_actor_set_x (_tmp8_, _tmp9_ - (_tmp12_ * 0.5f));
#line 396 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
			break;
#line 1477 "WindowClone.c"
		}
#line 393 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
		case GRANITE_CLOSE_BUTTON_POSITION_LEFT:
#line 1481 "WindowClone.c"
		{
			ClutterActor* _tmp13_ = NULL;
			ClutterActor* _tmp14_ = NULL;
			gfloat _tmp15_ = 0.0F;
			gfloat _tmp16_ = 0.0F;
#line 398 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
			_tmp13_ = self->priv->close_button;
#line 398 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
			_tmp14_ = self->priv->close_button;
#line 398 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
			_tmp15_ = clutter_actor_get_width (_tmp14_);
#line 398 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
			_tmp16_ = _tmp15_;
#line 398 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
			clutter_actor_set_x (_tmp13_, (-_tmp16_) * 0.5f);
#line 399 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
			break;
#line 1499 "WindowClone.c"
		}
		default:
#line 393 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
		break;
#line 1504 "WindowClone.c"
	}
#line 401 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	_tmp17_ = self->priv->close_button;
#line 401 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	clutter_actor_restore_easing_state (_tmp17_);
#line 403 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	_tmp18_ = self->priv->_dragging;
#line 403 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	if (!_tmp18_) {
#line 1514 "WindowClone.c"
		ClutterActor* _tmp19_ = NULL;
		ClutterActor* _tmp20_ = NULL;
		ClutterActor* _tmp21_ = NULL;
		gint _tmp22_ = 0;
		gint _tmp23_ = 0;
		ClutterActor* _tmp24_ = NULL;
#line 404 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
		_tmp19_ = self->priv->window_icon;
#line 404 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
		clutter_actor_save_easing_state (_tmp19_);
#line 405 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
		_tmp20_ = self->priv->window_icon;
#line 405 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
		clutter_actor_set_easing_duration (_tmp20_, (guint) 0);
#line 407 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
		_tmp21_ = self->priv->window_icon;
#line 407 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
		_tmp22_ = dest_width;
#line 407 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
		_tmp23_ = dest_height;
#line 407 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
		clutter_actor_set_position (_tmp21_, (gfloat) ((_tmp22_ - GALA_WINDOW_CLONE_WINDOW_ICON_SIZE) / 2), _tmp23_ - (GALA_WINDOW_CLONE_WINDOW_ICON_SIZE * 0.75f));
#line 409 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
		_tmp24_ = self->priv->window_icon;
#line 409 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
		clutter_actor_restore_easing_state (_tmp24_);
#line 1541 "WindowClone.c"
	}
}


static void gala_window_clone_toggle_shadow (GalaWindowClone* self, gboolean show) {
	ClutterTransition* _tmp0_ = NULL;
	ClutterPropertyTransition* shadow_transition = NULL;
	ClutterPropertyTransition* _tmp1_ = NULL;
	ClutterPropertyTransition* _tmp2_ = NULL;
	ClutterPropertyTransition* _tmp3_ = NULL;
	ClutterPropertyTransition* _tmp4_ = NULL;
	gboolean _tmp5_ = FALSE;
	ClutterPropertyTransition* _tmp18_ = NULL;
#line 413 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	g_return_if_fail (self != NULL);
#line 415 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	_tmp0_ = clutter_actor_get_transition ((ClutterActor*) self, "shadow-opacity");
#line 415 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	if (_tmp0_ != NULL) {
#line 416 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
		clutter_actor_remove_transition ((ClutterActor*) self, "shadow-opacity");
#line 1563 "WindowClone.c"
	}
#line 418 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	_tmp1_ = (ClutterPropertyTransition*) clutter_property_transition_new ("shadow-opacity");
#line 418 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	shadow_transition = _tmp1_;
#line 419 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	_tmp2_ = shadow_transition;
#line 419 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	clutter_timeline_set_duration ((ClutterTimeline*) _tmp2_, (guint) GALA_MULTITASKING_VIEW_ANIMATION_DURATION);
#line 420 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	_tmp3_ = shadow_transition;
#line 420 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	clutter_transition_set_remove_on_complete ((ClutterTransition*) _tmp3_, TRUE);
#line 421 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	_tmp4_ = shadow_transition;
#line 421 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	clutter_timeline_set_progress_mode ((ClutterTimeline*) _tmp4_, GALA_MULTITASKING_VIEW_ANIMATION_MODE);
#line 423 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	_tmp5_ = show;
#line 423 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	if (_tmp5_) {
#line 1585 "WindowClone.c"
		ClutterPropertyTransition* _tmp6_ = NULL;
		GalaShadowEffect* _tmp7_ = NULL;
		guint8 _tmp8_ = 0U;
		guint8 _tmp9_ = 0U;
		ClutterInterval* _tmp10_ = NULL;
		ClutterInterval* _tmp11_ = NULL;
#line 424 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
		_tmp6_ = shadow_transition;
#line 424 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
		_tmp7_ = self->priv->shadow_effect;
#line 424 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
		_tmp8_ = gala_shadow_effect_get_shadow_opacity (_tmp7_);
#line 424 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
		_tmp9_ = _tmp8_;
#line 424 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
		_tmp10_ = clutter_interval_new (G_TYPE_UCHAR, _tmp9_, 255, NULL);
#line 424 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
		g_object_ref_sink (_tmp10_);
#line 424 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
		_tmp11_ = _tmp10_;
#line 424 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
		clutter_transition_set_interval ((ClutterTransition*) _tmp6_, _tmp11_);
#line 424 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
		_g_object_unref0 (_tmp11_);
#line 1610 "WindowClone.c"
	} else {
		ClutterPropertyTransition* _tmp12_ = NULL;
		GalaShadowEffect* _tmp13_ = NULL;
		guint8 _tmp14_ = 0U;
		guint8 _tmp15_ = 0U;
		ClutterInterval* _tmp16_ = NULL;
		ClutterInterval* _tmp17_ = NULL;
#line 426 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
		_tmp12_ = shadow_transition;
#line 426 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
		_tmp13_ = self->priv->shadow_effect;
#line 426 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
		_tmp14_ = gala_shadow_effect_get_shadow_opacity (_tmp13_);
#line 426 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
		_tmp15_ = _tmp14_;
#line 426 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
		_tmp16_ = clutter_interval_new (G_TYPE_UCHAR, _tmp15_, 0, NULL);
#line 426 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
		g_object_ref_sink (_tmp16_);
#line 426 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
		_tmp17_ = _tmp16_;
#line 426 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
		clutter_transition_set_interval ((ClutterTransition*) _tmp12_, _tmp17_);
#line 426 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
		_g_object_unref0 (_tmp17_);
#line 1636 "WindowClone.c"
	}
#line 428 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	_tmp18_ = shadow_transition;
#line 428 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	clutter_actor_add_transition ((ClutterActor*) self, "shadow-opacity", (ClutterTransition*) _tmp18_);
#line 413 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	_g_object_unref0 (shadow_transition);
#line 1644 "WindowClone.c"
}


/**
 * Send the window the delete signal and listen for new windows to be added
 * to the window's workspace, in which case we check if the new window is a
 * dialog of the window we were going to delete. If that's the case, we request
 * to select our window.
 */
static void _gala_window_clone_check_confirm_dialog_meta_screen_window_entered_monitor (MetaScreen* _sender, gint object, MetaWindow* p0, gpointer self) {
#line 440 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	gala_window_clone_check_confirm_dialog ((GalaWindowClone*) self, object, p0);
#line 1657 "WindowClone.c"
}


static void gala_window_clone_close_window (GalaWindowClone* self) {
	MetaScreen* screen = NULL;
	MetaWindow* _tmp0_ = NULL;
	MetaScreen* _tmp1_ = NULL;
	MetaScreen* _tmp2_ = NULL;
	gulong _tmp3_ = 0UL;
	MetaWindow* _tmp4_ = NULL;
	MetaDisplay* _tmp5_ = NULL;
	guint32 _tmp6_ = 0U;
#line 437 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	g_return_if_fail (self != NULL);
#line 439 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	_tmp0_ = self->priv->_window;
#line 439 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	_tmp1_ = meta_window_get_screen (_tmp0_);
#line 439 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	_tmp2_ = _g_object_ref0 (_tmp1_);
#line 439 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	screen = _tmp2_;
#line 440 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	_tmp3_ = g_signal_connect_object (screen, "window-entered-monitor", (GCallback) _gala_window_clone_check_confirm_dialog_meta_screen_window_entered_monitor, self, 0);
#line 440 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	self->priv->check_confirm_dialog_cb = _tmp3_;
#line 442 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	_tmp4_ = self->priv->_window;
#line 442 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	_tmp5_ = meta_screen_get_display (screen);
#line 442 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	_tmp6_ = meta_display_get_current_time (_tmp5_);
#line 442 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	meta_window_delete (_tmp4_, _tmp6_);
#line 437 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	_g_object_unref0 (screen);
#line 1694 "WindowClone.c"
}


static gboolean ___lambda64_ (GalaWindowClone* self) {
	gboolean result = FALSE;
#line 449 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	g_signal_emit_by_name (self, "selected");
#line 450 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	result = FALSE;
#line 450 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	return result;
#line 1706 "WindowClone.c"
}


static gboolean ____lambda64__gsource_func (gpointer self) {
	gboolean result;
	result = ___lambda64_ ((GalaWindowClone*) self);
#line 448 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	return result;
#line 1715 "WindowClone.c"
}


static void gala_window_clone_check_confirm_dialog (GalaWindowClone* self, gint monitor, MetaWindow* new_window) {
	MetaWindow* _tmp0_ = NULL;
	MetaWindow* _tmp1_ = NULL;
	MetaWindow* _tmp2_ = NULL;
#line 445 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	g_return_if_fail (self != NULL);
#line 445 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	g_return_if_fail (new_window != NULL);
#line 447 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	_tmp0_ = new_window;
#line 447 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	_tmp1_ = meta_window_get_transient_for (_tmp0_);
#line 447 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	_tmp2_ = self->priv->_window;
#line 447 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	if (_tmp1_ == _tmp2_) {
#line 1735 "WindowClone.c"
		MetaWindow* _tmp3_ = NULL;
		MetaScreen* _tmp4_ = NULL;
		gulong _tmp5_ = 0UL;
#line 448 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
		g_idle_add_full (G_PRIORITY_DEFAULT_IDLE, ____lambda64__gsource_func, g_object_ref (self), g_object_unref);
#line 453 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
		_tmp3_ = self->priv->_window;
#line 453 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
		_tmp4_ = meta_window_get_screen (_tmp3_);
#line 453 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
		_tmp5_ = self->priv->check_confirm_dialog_cb;
#line 453 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
		g_signal_handler_disconnect (_tmp4_, _tmp5_);
#line 454 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
		self->priv->check_confirm_dialog_cb = (gulong) 0;
#line 1751 "WindowClone.c"
	}
}


/**
 * The window unmanaged by the compositor, so we need to destroy ourselves too.
 */
static void gala_window_clone_unmanaged (GalaWindowClone* self) {
	gboolean _tmp0_ = FALSE;
	GalaDragDropAction* _tmp1_ = NULL;
	ClutterClone* _tmp6_ = NULL;
	gulong _tmp8_ = 0UL;
	guint _tmp12_ = 0U;
#line 461 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	g_return_if_fail (self != NULL);
#line 463 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	clutter_actor_remove_all_transitions ((ClutterActor*) self);
#line 465 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	_tmp1_ = self->priv->drag_action;
#line 465 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	if (_tmp1_ != NULL) {
#line 1773 "WindowClone.c"
		GalaDragDropAction* _tmp2_ = NULL;
		gboolean _tmp3_ = FALSE;
		gboolean _tmp4_ = FALSE;
#line 465 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
		_tmp2_ = self->priv->drag_action;
#line 465 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
		_tmp3_ = gala_drag_drop_action_get_dragging (_tmp2_);
#line 465 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
		_tmp4_ = _tmp3_;
#line 465 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
		_tmp0_ = _tmp4_;
#line 1785 "WindowClone.c"
	} else {
#line 465 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
		_tmp0_ = FALSE;
#line 1789 "WindowClone.c"
	}
#line 465 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	if (_tmp0_) {
#line 1793 "WindowClone.c"
		GalaDragDropAction* _tmp5_ = NULL;
#line 466 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
		_tmp5_ = self->priv->drag_action;
#line 466 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
		gala_drag_drop_action_cancel (_tmp5_);
#line 1799 "WindowClone.c"
	}
#line 468 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	_tmp6_ = self->priv->clone;
#line 468 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	if (_tmp6_ != NULL) {
#line 1805 "WindowClone.c"
		ClutterClone* _tmp7_ = NULL;
#line 469 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
		_tmp7_ = self->priv->clone;
#line 469 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
		clutter_actor_destroy ((ClutterActor*) _tmp7_);
#line 1811 "WindowClone.c"
	}
#line 471 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	_tmp8_ = self->priv->check_confirm_dialog_cb;
#line 471 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	if (_tmp8_ != ((gulong) 0)) {
#line 1817 "WindowClone.c"
		MetaWindow* _tmp9_ = NULL;
		MetaScreen* _tmp10_ = NULL;
		gulong _tmp11_ = 0UL;
#line 472 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
		_tmp9_ = self->priv->_window;
#line 472 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
		_tmp10_ = meta_window_get_screen (_tmp9_);
#line 472 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
		_tmp11_ = self->priv->check_confirm_dialog_cb;
#line 472 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
		g_signal_handler_disconnect (_tmp10_, _tmp11_);
#line 473 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
		self->priv->check_confirm_dialog_cb = (gulong) 0;
#line 1831 "WindowClone.c"
	}
#line 476 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	_tmp12_ = self->priv->shadow_update_timeout;
#line 476 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	if (_tmp12_ != ((guint) 0)) {
#line 1837 "WindowClone.c"
		guint _tmp13_ = 0U;
#line 477 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
		_tmp13_ = self->priv->shadow_update_timeout;
#line 477 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
		g_source_remove (_tmp13_);
#line 478 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
		self->priv->shadow_update_timeout = (guint) 0;
#line 1845 "WindowClone.c"
	}
#line 481 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	clutter_actor_destroy ((ClutterActor*) self);
#line 1849 "WindowClone.c"
}


static void gala_window_clone_actor_clicked (GalaWindowClone* self, guint32 button) {
	guint32 _tmp0_ = 0U;
#line 484 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	g_return_if_fail (self != NULL);
#line 485 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	_tmp0_ = button;
#line 485 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	switch (_tmp0_) {
#line 485 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
		case 1:
#line 1863 "WindowClone.c"
		{
#line 487 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
			g_signal_emit_by_name (self, "selected");
#line 488 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
			break;
#line 1869 "WindowClone.c"
		}
#line 485 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
		case 2:
#line 1873 "WindowClone.c"
		{
#line 490 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
			gala_window_clone_close_window (self);
#line 491 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
			break;
#line 1879 "WindowClone.c"
		}
		default:
#line 485 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
		break;
#line 1884 "WindowClone.c"
	}
}


/**
 * A drag action has been initiated on us, we reparent ourselves to the stage so
 * we can move freely, scale ourselves to a smaller scale and request that the
 * position we just freed is immediately filled by the WindowCloneContainer.
 */
static ClutterActor* gala_window_clone_drag_begin (GalaWindowClone* self, gfloat click_x, gfloat click_y) {
	ClutterActor* result = NULL;
	gfloat abs_x = 0.0F;
	gfloat abs_y = 0.0F;
	gfloat prev_parent_x = 0.0F;
	gfloat prev_parent_y = 0.0F;
	ClutterActor* _tmp0_ = NULL;
	ClutterActor* _tmp1_ = NULL;
	ClutterActor* _tmp2_ = NULL;
	GList* _tmp3_ = NULL;
	GList* _tmp4_ = NULL;
	gint _tmp5_ = 0;
	ClutterActor* _tmp6_ = NULL;
	gfloat _tmp7_ = 0.0F;
	gfloat _tmp8_ = 0.0F;
	ClutterStage* stage = NULL;
	ClutterStage* _tmp9_ = NULL;
	ClutterStage* _tmp10_ = NULL;
	ClutterActor* _tmp11_ = NULL;
	gfloat scale = 0.0F;
	ClutterActor* _tmp12_ = NULL;
	gfloat _tmp13_ = 0.0F;
	gfloat _tmp14_ = 0.0F;
	ClutterClone* _tmp15_ = NULL;
	gfloat _tmp16_ = 0.0F;
	gfloat _tmp17_ = 0.0F;
	ClutterClone* _tmp18_ = NULL;
	gfloat _tmp19_ = 0.0F;
	gfloat _tmp20_ = 0.0F;
	ClutterClone* _tmp21_ = NULL;
	ClutterClone* _tmp22_ = NULL;
	ClutterClone* _tmp23_ = NULL;
	ClutterClone* _tmp24_ = NULL;
	ClutterClone* _tmp25_ = NULL;
	ClutterClone* _tmp26_ = NULL;
	gfloat _tmp27_ = 0.0F;
	gfloat _tmp28_ = 0.0F;
	ClutterClone* _tmp29_ = NULL;
	gfloat _tmp30_ = 0.0F;
	gfloat _tmp31_ = 0.0F;
	gfloat _tmp32_ = 0.0F;
	gfloat _tmp33_ = 0.0F;
	ClutterClone* _tmp34_ = NULL;
	gfloat _tmp35_ = 0.0F;
	gfloat _tmp36_ = 0.0F;
	ClutterClone* _tmp37_ = NULL;
	gfloat _tmp38_ = 0.0F;
	gfloat _tmp39_ = 0.0F;
	gfloat _tmp40_ = 0.0F;
	gfloat _tmp41_ = 0.0F;
	ClutterActor* _tmp42_ = NULL;
	ClutterActor* _tmp43_ = NULL;
	ClutterActor* _tmp44_ = NULL;
	ClutterActor* _tmp45_ = NULL;
	gfloat _tmp46_ = 0.0F;
	gfloat _tmp47_ = 0.0F;
	ClutterActor* _tmp48_ = NULL;
	gfloat _tmp49_ = 0.0F;
	gfloat _tmp50_ = 0.0F;
	gfloat _tmp51_ = 0.0F;
	gfloat _tmp52_ = 0.0F;
	ClutterActor* _tmp53_ = NULL;
	gfloat _tmp54_ = 0.0F;
	gfloat _tmp55_ = 0.0F;
	ClutterActor* _tmp56_ = NULL;
	ClutterActor* _tmp57_ = NULL;
	ClutterActor* _tmp58_ = NULL;
#line 500 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	g_return_val_if_fail (self != NULL, NULL);
#line 505 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	_tmp0_ = clutter_actor_get_parent ((ClutterActor*) self);
#line 505 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	_tmp1_ = _g_object_ref0 (_tmp0_);
#line 505 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	_g_object_unref0 (self->priv->prev_parent);
#line 505 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	self->priv->prev_parent = _tmp1_;
#line 506 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	_tmp2_ = self->priv->prev_parent;
#line 506 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	_tmp3_ = clutter_actor_get_children (_tmp2_);
#line 506 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	_tmp4_ = _tmp3_;
#line 506 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	_tmp5_ = g_list_index (_tmp4_, (ClutterActor*) self);
#line 506 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	self->priv->prev_index = _tmp5_;
#line 506 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	_g_list_free0 (_tmp4_);
#line 507 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	_tmp6_ = self->priv->prev_parent;
#line 507 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	clutter_actor_get_transformed_position (_tmp6_, &_tmp7_, &_tmp8_);
#line 507 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	prev_parent_x = _tmp7_;
#line 507 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	prev_parent_y = _tmp8_;
#line 509 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	_tmp9_ = clutter_actor_get_stage ((ClutterActor*) self);
#line 509 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	_tmp10_ = _g_object_ref0 (_tmp9_);
#line 509 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	stage = _tmp10_;
#line 510 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	_tmp11_ = self->priv->prev_parent;
#line 510 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	clutter_actor_remove_child (_tmp11_, (ClutterActor*) self);
#line 511 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	clutter_actor_add_child ((ClutterActor*) stage, (ClutterActor*) self);
#line 513 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	_tmp12_ = self->priv->window_icon;
#line 513 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	_tmp13_ = clutter_actor_get_width (_tmp12_);
#line 513 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	_tmp14_ = _tmp13_;
#line 513 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	_tmp15_ = self->priv->clone;
#line 513 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	_tmp16_ = clutter_actor_get_width ((ClutterActor*) _tmp15_);
#line 513 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	_tmp17_ = _tmp16_;
#line 513 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	scale = _tmp14_ / _tmp17_;
#line 515 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	_tmp18_ = self->priv->clone;
#line 515 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	clutter_actor_get_transformed_position ((ClutterActor*) _tmp18_, &_tmp19_, &_tmp20_);
#line 515 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	abs_x = _tmp19_;
#line 515 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	abs_y = _tmp20_;
#line 516 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	_tmp21_ = self->priv->clone;
#line 516 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	clutter_actor_save_easing_state ((ClutterActor*) _tmp21_);
#line 517 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	_tmp22_ = self->priv->clone;
#line 517 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	clutter_actor_set_easing_duration ((ClutterActor*) _tmp22_, (guint) 200);
#line 518 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	_tmp23_ = self->priv->clone;
#line 518 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	clutter_actor_set_easing_mode ((ClutterActor*) _tmp23_, CLUTTER_EASE_IN_CUBIC);
#line 519 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	_tmp24_ = self->priv->clone;
#line 519 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	clutter_actor_set_scale ((ClutterActor*) _tmp24_, (gdouble) scale, (gdouble) scale);
#line 520 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	_tmp25_ = self->priv->clone;
#line 520 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	clutter_actor_set_opacity ((ClutterActor*) _tmp25_, (guint) 0);
#line 521 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	_tmp26_ = self->priv->clone;
#line 521 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	_tmp27_ = click_x;
#line 521 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	_tmp28_ = abs_x;
#line 521 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	_tmp29_ = self->priv->clone;
#line 521 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	_tmp30_ = clutter_actor_get_width ((ClutterActor*) _tmp29_);
#line 521 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	_tmp31_ = _tmp30_;
#line 521 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	_tmp32_ = click_y;
#line 521 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	_tmp33_ = abs_y;
#line 521 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	_tmp34_ = self->priv->clone;
#line 521 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	_tmp35_ = clutter_actor_get_height ((ClutterActor*) _tmp34_);
#line 521 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	_tmp36_ = _tmp35_;
#line 521 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	clutter_actor_set_pivot_point ((ClutterActor*) _tmp26_, (_tmp27_ - _tmp28_) / _tmp31_, (_tmp32_ - _tmp33_) / _tmp36_);
#line 522 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	_tmp37_ = self->priv->clone;
#line 522 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	clutter_actor_restore_easing_state ((ClutterActor*) _tmp37_);
#line 524 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	g_signal_emit_by_name (self, "request-reposition");
#line 526 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	clutter_actor_get_transformed_position ((ClutterActor*) self, &_tmp38_, &_tmp39_);
#line 526 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	abs_x = _tmp38_;
#line 526 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	abs_y = _tmp39_;
#line 528 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	clutter_actor_save_easing_state ((ClutterActor*) self);
#line 529 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	clutter_actor_set_easing_duration ((ClutterActor*) self, (guint) 0);
#line 530 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	_tmp40_ = abs_x;
#line 530 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	_tmp41_ = abs_y;
#line 530 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	clutter_actor_set_position ((ClutterActor*) self, _tmp40_ + prev_parent_x, _tmp41_ + prev_parent_y);
#line 532 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	_tmp42_ = self->priv->window_icon;
#line 532 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	clutter_actor_save_easing_state (_tmp42_);
#line 533 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	_tmp43_ = self->priv->window_icon;
#line 533 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	clutter_actor_set_easing_duration (_tmp43_, (guint) 200);
#line 534 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	_tmp44_ = self->priv->window_icon;
#line 534 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	clutter_actor_set_easing_mode (_tmp44_, CLUTTER_EASE_IN_OUT_CUBIC);
#line 535 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	_tmp45_ = self->priv->window_icon;
#line 535 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	_tmp46_ = click_x;
#line 535 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	_tmp47_ = abs_x;
#line 535 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	_tmp48_ = self->priv->window_icon;
#line 535 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	_tmp49_ = clutter_actor_get_width (_tmp48_);
#line 535 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	_tmp50_ = _tmp49_;
#line 535 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	_tmp51_ = click_y;
#line 535 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	_tmp52_ = abs_y;
#line 535 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	_tmp53_ = self->priv->window_icon;
#line 535 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	_tmp54_ = clutter_actor_get_height (_tmp53_);
#line 535 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	_tmp55_ = _tmp54_;
#line 535 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	clutter_actor_set_position (_tmp45_, (_tmp46_ - (_tmp47_ + prev_parent_x)) - (_tmp50_ / 2), (_tmp51_ - (_tmp52_ + prev_parent_y)) - (_tmp55_ / 2));
#line 537 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	_tmp56_ = self->priv->window_icon;
#line 537 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	clutter_actor_restore_easing_state (_tmp56_);
#line 539 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	_tmp57_ = self->priv->close_button;
#line 539 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	clutter_actor_set_opacity (_tmp57_, (guint) 0);
#line 541 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	gala_window_clone_set_dragging (self, TRUE);
#line 543 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	_tmp58_ = _g_object_ref0 ((ClutterActor*) self);
#line 543 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	result = _tmp58_;
#line 543 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	_g_object_unref0 (stage);
#line 543 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	return result;
#line 2145 "WindowClone.c"
}


/**
 * When we cross an IconGroup, we animate to an even smaller size and slightly
 * less opacity and add ourselves as temporary window to the group. When left, 
 * we reverse those steps.
 */
static void gala_window_clone_drag_destination_crossed (GalaWindowClone* self, ClutterActor* destination, gboolean hovered) {
	GalaIconGroup* icon_group = NULL;
	ClutterActor* _tmp0_ = NULL;
	GalaIconGroup* _tmp1_ = NULL;
	GalaWorkspaceInsertThumb* insert_thumb = NULL;
	ClutterActor* _tmp2_ = NULL;
	GalaWorkspaceInsertThumb* _tmp3_ = NULL;
	gboolean _tmp4_ = FALSE;
	gboolean _tmp5_ = FALSE;
	GalaIconGroup* _tmp6_ = NULL;
	gboolean _tmp11_ = FALSE;
	gboolean _tmp12_ = FALSE;
	GalaIconGroup* _tmp13_ = NULL;
	gdouble _tmp24_ = 0.0;
	gboolean _tmp25_ = FALSE;
	gdouble scale = 0.0;
	gint _tmp26_ = 0;
	gboolean _tmp27_ = FALSE;
	gint opacity = 0;
	gint _tmp28_ = 0;
	gboolean _tmp29_ = FALSE;
	gboolean _tmp30_ = FALSE;
	gint duration = 0;
	ClutterActor* _tmp32_ = NULL;
	ClutterActor* _tmp33_ = NULL;
	ClutterActor* _tmp34_ = NULL;
	gint _tmp35_ = 0;
	ClutterActor* _tmp36_ = NULL;
	gdouble _tmp37_ = 0.0;
	gdouble _tmp38_ = 0.0;
	ClutterActor* _tmp39_ = NULL;
	gint _tmp40_ = 0;
	ClutterActor* _tmp41_ = NULL;
	GalaWorkspaceInsertThumb* _tmp42_ = NULL;
	GalaIconGroup* _tmp45_ = NULL;
#line 551 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	g_return_if_fail (self != NULL);
#line 551 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	g_return_if_fail (destination != NULL);
#line 553 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	_tmp0_ = destination;
#line 553 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	_tmp1_ = _g_object_ref0 (G_TYPE_CHECK_INSTANCE_TYPE (_tmp0_, GALA_TYPE_ICON_GROUP) ? ((GalaIconGroup*) _tmp0_) : NULL);
#line 553 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	icon_group = _tmp1_;
#line 554 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	_tmp2_ = destination;
#line 554 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	_tmp3_ = _g_object_ref0 (G_TYPE_CHECK_INSTANCE_TYPE (_tmp2_, GALA_TYPE_WORKSPACE_INSERT_THUMB) ? ((GalaWorkspaceInsertThumb*) _tmp2_) : NULL);
#line 554 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	insert_thumb = _tmp3_;
#line 557 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	_tmp6_ = icon_group;
#line 557 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	if (_tmp6_ == NULL) {
#line 2209 "WindowClone.c"
		GalaWorkspaceInsertThumb* _tmp7_ = NULL;
#line 557 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
		_tmp7_ = insert_thumb;
#line 557 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
		_tmp5_ = _tmp7_ == NULL;
#line 2215 "WindowClone.c"
	} else {
#line 557 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
		_tmp5_ = FALSE;
#line 2219 "WindowClone.c"
	}
#line 557 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	if (_tmp5_) {
#line 557 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
		_tmp4_ = TRUE;
#line 2225 "WindowClone.c"
	} else {
		gboolean _tmp8_ = FALSE;
		GalaWorkspaceInsertThumb* _tmp9_ = NULL;
#line 558 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
		_tmp9_ = insert_thumb;
#line 558 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
		if (_tmp9_ != NULL) {
#line 2233 "WindowClone.c"
			gboolean _tmp10_ = FALSE;
#line 558 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
			_tmp10_ = meta_prefs_get_dynamic_workspaces ();
#line 558 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
			_tmp8_ = !_tmp10_;
#line 2239 "WindowClone.c"
		} else {
#line 558 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
			_tmp8_ = FALSE;
#line 2243 "WindowClone.c"
		}
#line 558 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
		_tmp4_ = _tmp8_;
#line 2247 "WindowClone.c"
	}
#line 557 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	if (_tmp4_) {
#line 559 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
		_g_object_unref0 (insert_thumb);
#line 559 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
		_g_object_unref0 (icon_group);
#line 559 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
		return;
#line 2257 "WindowClone.c"
	}
#line 562 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	_tmp13_ = icon_group;
#line 562 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	if (_tmp13_ != NULL) {
#line 2263 "WindowClone.c"
		GalaIconGroup* _tmp14_ = NULL;
		MetaWorkspace* _tmp15_ = NULL;
		MetaWorkspace* _tmp16_ = NULL;
		MetaWindow* _tmp17_ = NULL;
		MetaWorkspace* _tmp18_ = NULL;
#line 563 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
		_tmp14_ = icon_group;
#line 563 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
		_tmp15_ = gala_icon_group_get_workspace (_tmp14_);
#line 563 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
		_tmp16_ = _tmp15_;
#line 563 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
		_tmp17_ = self->priv->_window;
#line 563 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
		_tmp18_ = meta_window_get_workspace (_tmp17_);
#line 563 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
		_tmp12_ = _tmp16_ == _tmp18_;
#line 2281 "WindowClone.c"
	} else {
#line 562 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
		_tmp12_ = FALSE;
#line 2285 "WindowClone.c"
	}
#line 562 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	if (_tmp12_) {
#line 2289 "WindowClone.c"
		MetaWindow* _tmp19_ = NULL;
		gint _tmp20_ = 0;
		MetaWindow* _tmp21_ = NULL;
		MetaScreen* _tmp22_ = NULL;
		gint _tmp23_ = 0;
#line 564 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
		_tmp19_ = self->priv->_window;
#line 564 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
		_tmp20_ = meta_window_get_monitor (_tmp19_);
#line 564 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
		_tmp21_ = self->priv->_window;
#line 564 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
		_tmp22_ = meta_window_get_screen (_tmp21_);
#line 564 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
		_tmp23_ = meta_screen_get_primary_monitor (_tmp22_);
#line 564 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
		_tmp11_ = _tmp20_ == _tmp23_;
#line 2307 "WindowClone.c"
	} else {
#line 562 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
		_tmp11_ = FALSE;
#line 2311 "WindowClone.c"
	}
#line 562 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	if (_tmp11_) {
#line 565 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
		_g_object_unref0 (insert_thumb);
#line 565 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
		_g_object_unref0 (icon_group);
#line 565 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
		return;
#line 2321 "WindowClone.c"
	}
#line 567 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	_tmp25_ = hovered;
#line 567 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	if (_tmp25_) {
#line 567 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
		_tmp24_ = 0.4;
#line 2329 "WindowClone.c"
	} else {
#line 567 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
		_tmp24_ = 1.0;
#line 2333 "WindowClone.c"
	}
#line 567 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	scale = _tmp24_;
#line 568 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	_tmp27_ = hovered;
#line 568 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	if (_tmp27_) {
#line 568 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
		_tmp26_ = 0;
#line 2343 "WindowClone.c"
	} else {
#line 568 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
		_tmp26_ = 255;
#line 2347 "WindowClone.c"
	}
#line 568 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	opacity = _tmp26_;
#line 569 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	_tmp30_ = hovered;
#line 569 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	if (_tmp30_) {
#line 2355 "WindowClone.c"
		GalaWorkspaceInsertThumb* _tmp31_ = NULL;
#line 569 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
		_tmp31_ = insert_thumb;
#line 569 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
		_tmp29_ = _tmp31_ != NULL;
#line 2361 "WindowClone.c"
	} else {
#line 569 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
		_tmp29_ = FALSE;
#line 2365 "WindowClone.c"
	}
#line 569 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	if (_tmp29_) {
#line 569 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
		_tmp28_ = GALA_WORKSPACE_INSERT_THUMB_EXPAND_DELAY;
#line 2371 "WindowClone.c"
	} else {
#line 569 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
		_tmp28_ = 100;
#line 2375 "WindowClone.c"
	}
#line 569 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	duration = _tmp28_;
#line 571 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	_tmp32_ = self->priv->window_icon;
#line 571 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	clutter_actor_save_easing_state (_tmp32_);
#line 573 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	_tmp33_ = self->priv->window_icon;
#line 573 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	clutter_actor_set_easing_mode (_tmp33_, CLUTTER_LINEAR);
#line 574 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	_tmp34_ = self->priv->window_icon;
#line 574 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	_tmp35_ = duration;
#line 574 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	clutter_actor_set_easing_duration (_tmp34_, (guint) _tmp35_);
#line 575 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	_tmp36_ = self->priv->window_icon;
#line 575 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	_tmp37_ = scale;
#line 575 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	_tmp38_ = scale;
#line 575 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	clutter_actor_set_scale (_tmp36_, _tmp37_, _tmp38_);
#line 576 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	_tmp39_ = self->priv->window_icon;
#line 576 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	_tmp40_ = opacity;
#line 576 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	clutter_actor_set_opacity (_tmp39_, (guint8) _tmp40_);
#line 578 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	_tmp41_ = self->priv->window_icon;
#line 578 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	clutter_actor_restore_easing_state (_tmp41_);
#line 580 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	_tmp42_ = insert_thumb;
#line 580 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	if (_tmp42_ != NULL) {
#line 2415 "WindowClone.c"
		GalaWorkspaceInsertThumb* _tmp43_ = NULL;
		MetaWindow* _tmp44_ = NULL;
#line 581 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
		_tmp43_ = insert_thumb;
#line 581 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
		_tmp44_ = self->priv->_window;
#line 581 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
		gala_workspace_insert_thumb_set_window_thumb (_tmp43_, _tmp44_);
#line 2424 "WindowClone.c"
	}
#line 584 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	_tmp45_ = icon_group;
#line 584 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	if (_tmp45_ != NULL) {
#line 2430 "WindowClone.c"
		gboolean _tmp46_ = FALSE;
#line 585 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
		_tmp46_ = hovered;
#line 585 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
		if (_tmp46_) {
#line 2436 "WindowClone.c"
			GalaIconGroup* _tmp47_ = NULL;
			MetaWindow* _tmp48_ = NULL;
#line 586 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
			_tmp47_ = icon_group;
#line 586 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
			_tmp48_ = self->priv->_window;
#line 586 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
			gala_icon_group_add_window (_tmp47_, _tmp48_, FALSE, TRUE);
#line 2445 "WindowClone.c"
		} else {
			GalaIconGroup* _tmp49_ = NULL;
			MetaWindow* _tmp50_ = NULL;
#line 588 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
			_tmp49_ = icon_group;
#line 588 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
			_tmp50_ = self->priv->_window;
#line 588 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
			gala_icon_group_remove_window (_tmp49_, _tmp50_, TRUE);
#line 2455 "WindowClone.c"
		}
	}
#line 551 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	_g_object_unref0 (insert_thumb);
#line 551 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	_g_object_unref0 (icon_group);
#line 2462 "WindowClone.c"
}


/**
 * Depending on the destination we have different ways to find the correct destination.
 * After we found one we destroy ourselves so the dragged clone immediately disappears,
 * otherwise we cancel the drag and animate back to our old place.
 */
static void gala_window_clone_drag_end (GalaWindowClone* self, ClutterActor* destination) {
	MetaWorkspace* workspace = NULL;
	gint primary = 0;
	MetaWindow* _tmp0_ = NULL;
	MetaScreen* _tmp1_ = NULL;
	gint _tmp2_ = 0;
	ClutterActor* _tmp3_ = NULL;
	gboolean did_move = FALSE;
	gboolean _tmp44_ = FALSE;
	gboolean _tmp45_ = FALSE;
	gboolean _tmp51_ = FALSE;
	MetaWorkspace* _tmp52_ = NULL;
	gboolean _tmp58_ = FALSE;
#line 597 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	g_return_if_fail (self != NULL);
#line 597 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	g_return_if_fail (destination != NULL);
#line 599 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	workspace = NULL;
#line 600 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	_tmp0_ = self->priv->_window;
#line 600 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	_tmp1_ = meta_window_get_screen (_tmp0_);
#line 600 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	_tmp2_ = meta_screen_get_primary_monitor (_tmp1_);
#line 600 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	primary = _tmp2_;
#line 602 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	_tmp3_ = destination;
#line 602 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	if (G_TYPE_CHECK_INSTANCE_TYPE (_tmp3_, GALA_TYPE_ICON_GROUP)) {
#line 2502 "WindowClone.c"
		ClutterActor* _tmp4_ = NULL;
		MetaWorkspace* _tmp5_ = NULL;
		MetaWorkspace* _tmp6_ = NULL;
		MetaWorkspace* _tmp7_ = NULL;
#line 603 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
		_tmp4_ = destination;
#line 603 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
		_tmp5_ = gala_icon_group_get_workspace (G_TYPE_CHECK_INSTANCE_CAST (_tmp4_, GALA_TYPE_ICON_GROUP, GalaIconGroup));
#line 603 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
		_tmp6_ = _tmp5_;
#line 603 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
		_tmp7_ = _g_object_ref0 (_tmp6_);
#line 603 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
		_g_object_unref0 (workspace);
#line 603 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
		workspace = _tmp7_;
#line 2519 "WindowClone.c"
	} else {
		ClutterActor* _tmp8_ = NULL;
#line 604 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
		_tmp8_ = destination;
#line 604 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
		if (G_TYPE_CHECK_INSTANCE_TYPE (_tmp8_, GALA_TYPE_FRAMED_BACKGROUND)) {
#line 2526 "WindowClone.c"
			ClutterActor* _tmp9_ = NULL;
			ClutterActor* _tmp10_ = NULL;
			MetaWorkspace* _tmp11_ = NULL;
			MetaWorkspace* _tmp12_ = NULL;
			MetaWorkspace* _tmp13_ = NULL;
#line 605 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
			_tmp9_ = destination;
#line 605 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
			_tmp10_ = clutter_actor_get_parent (_tmp9_);
#line 605 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
			_tmp11_ = gala_workspace_clone_get_workspace (G_TYPE_CHECK_INSTANCE_CAST (_tmp10_, GALA_TYPE_WORKSPACE_CLONE, GalaWorkspaceClone));
#line 605 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
			_tmp12_ = _tmp11_;
#line 605 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
			_tmp13_ = _g_object_ref0 (_tmp12_);
#line 605 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
			_g_object_unref0 (workspace);
#line 605 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
			workspace = _tmp13_;
#line 2546 "WindowClone.c"
		} else {
			ClutterActor* _tmp14_ = NULL;
#line 606 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
			_tmp14_ = destination;
#line 606 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
			if (G_TYPE_CHECK_INSTANCE_TYPE (_tmp14_, GALA_TYPE_WORKSPACE_INSERT_THUMB)) {
#line 2553 "WindowClone.c"
				gboolean _tmp15_ = FALSE;
				GalaWorkspaceInsertThumb* inserter = NULL;
				ClutterActor* _tmp16_ = NULL;
				gboolean will_move = FALSE;
				MetaWindow* _tmp17_ = NULL;
				MetaWorkspace* _tmp18_ = NULL;
				gint _tmp19_ = 0;
				GalaWorkspaceInsertThumb* _tmp20_ = NULL;
				gint _tmp21_ = 0;
				gint _tmp22_ = 0;
				gboolean _tmp23_ = FALSE;
				gboolean _tmp24_ = FALSE;
				GalaWorkspaceInsertThumb* _tmp30_ = NULL;
				gint _tmp31_ = 0;
				gint _tmp32_ = 0;
				MetaWindow* _tmp33_ = NULL;
				gboolean _tmp34_ = FALSE;
#line 607 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
				_tmp15_ = meta_prefs_get_dynamic_workspaces ();
#line 607 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
				if (!_tmp15_) {
#line 608 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
					gala_window_clone_drag_canceled (self);
#line 609 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
					_g_object_unref0 (workspace);
#line 609 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
					return;
#line 2581 "WindowClone.c"
				}
#line 612 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
				_tmp16_ = destination;
#line 612 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
				inserter = G_TYPE_CHECK_INSTANCE_CAST (_tmp16_, GALA_TYPE_WORKSPACE_INSERT_THUMB, GalaWorkspaceInsertThumb);
#line 614 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
				_tmp17_ = self->priv->_window;
#line 614 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
				_tmp18_ = meta_window_get_workspace (_tmp17_);
#line 614 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
				_tmp19_ = meta_workspace_index (_tmp18_);
#line 614 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
				_tmp20_ = inserter;
#line 614 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
				_tmp21_ = gala_workspace_insert_thumb_get_workspace_index (_tmp20_);
#line 614 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
				_tmp22_ = _tmp21_;
#line 614 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
				will_move = _tmp19_ != _tmp22_;
#line 616 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
				_tmp24_ = meta_prefs_get_workspaces_only_on_primary ();
#line 616 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
				if (_tmp24_) {
#line 2605 "WindowClone.c"
					MetaWindow* _tmp25_ = NULL;
					gint _tmp26_ = 0;
					gint _tmp27_ = 0;
#line 616 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
					_tmp25_ = self->priv->_window;
#line 616 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
					_tmp26_ = meta_window_get_monitor (_tmp25_);
#line 616 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
					_tmp27_ = primary;
#line 616 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
					_tmp23_ = _tmp26_ != _tmp27_;
#line 2617 "WindowClone.c"
				} else {
#line 616 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
					_tmp23_ = FALSE;
#line 2621 "WindowClone.c"
				}
#line 616 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
				if (_tmp23_) {
#line 2625 "WindowClone.c"
					MetaWindow* _tmp28_ = NULL;
					gint _tmp29_ = 0;
#line 617 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
					_tmp28_ = self->priv->_window;
#line 617 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
					_tmp29_ = primary;
#line 617 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
					meta_window_move_to_monitor (_tmp28_, _tmp29_);
#line 618 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
					will_move = TRUE;
#line 2636 "WindowClone.c"
				}
#line 621 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
				_tmp30_ = inserter;
#line 621 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
				_tmp31_ = gala_workspace_insert_thumb_get_workspace_index (_tmp30_);
#line 621 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
				_tmp32_ = _tmp31_;
#line 621 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
				_tmp33_ = self->priv->_window;
#line 621 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
				gala_internal_utils_insert_workspace_with_window (_tmp32_, _tmp33_);
#line 625 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
				_tmp34_ = will_move;
#line 625 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
				if (!_tmp34_) {
#line 626 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
					gala_window_clone_drag_canceled (self);
#line 2654 "WindowClone.c"
				} else {
#line 628 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
					gala_window_clone_unmanaged (self);
#line 2658 "WindowClone.c"
				}
#line 630 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
				_g_object_unref0 (workspace);
#line 630 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
				return;
#line 2664 "WindowClone.c"
			} else {
				ClutterActor* _tmp35_ = NULL;
#line 631 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
				_tmp35_ = destination;
#line 631 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
				if (G_TYPE_CHECK_INSTANCE_TYPE (_tmp35_, GALA_TYPE_MONITOR_CLONE)) {
#line 2671 "WindowClone.c"
					gint monitor = 0;
					ClutterActor* _tmp36_ = NULL;
					gint _tmp37_ = 0;
					gint _tmp38_ = 0;
					MetaWindow* _tmp39_ = NULL;
					gint _tmp40_ = 0;
					gint _tmp41_ = 0;
#line 632 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
					_tmp36_ = destination;
#line 632 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
					_tmp37_ = gala_monitor_clone_get_monitor (G_TYPE_CHECK_INSTANCE_CAST (_tmp36_, GALA_TYPE_MONITOR_CLONE, GalaMonitorClone));
#line 632 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
					_tmp38_ = _tmp37_;
#line 632 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
					monitor = _tmp38_;
#line 633 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
					_tmp39_ = self->priv->_window;
#line 633 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
					_tmp40_ = meta_window_get_monitor (_tmp39_);
#line 633 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
					_tmp41_ = monitor;
#line 633 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
					if (_tmp40_ != _tmp41_) {
#line 2695 "WindowClone.c"
						MetaWindow* _tmp42_ = NULL;
						gint _tmp43_ = 0;
#line 634 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
						_tmp42_ = self->priv->_window;
#line 634 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
						_tmp43_ = monitor;
#line 634 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
						meta_window_move_to_monitor (_tmp42_, _tmp43_);
#line 635 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
						gala_window_clone_unmanaged (self);
#line 2706 "WindowClone.c"
					} else {
#line 637 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
						gala_window_clone_drag_canceled (self);
#line 2710 "WindowClone.c"
					}
#line 639 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
					_g_object_unref0 (workspace);
#line 639 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
					return;
#line 2716 "WindowClone.c"
				}
			}
		}
	}
#line 642 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	did_move = FALSE;
#line 644 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	_tmp45_ = meta_prefs_get_workspaces_only_on_primary ();
#line 644 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	if (_tmp45_) {
#line 2727 "WindowClone.c"
		MetaWindow* _tmp46_ = NULL;
		gint _tmp47_ = 0;
		gint _tmp48_ = 0;
#line 644 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
		_tmp46_ = self->priv->_window;
#line 644 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
		_tmp47_ = meta_window_get_monitor (_tmp46_);
#line 644 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
		_tmp48_ = primary;
#line 644 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
		_tmp44_ = _tmp47_ != _tmp48_;
#line 2739 "WindowClone.c"
	} else {
#line 644 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
		_tmp44_ = FALSE;
#line 2743 "WindowClone.c"
	}
#line 644 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	if (_tmp44_) {
#line 2747 "WindowClone.c"
		MetaWindow* _tmp49_ = NULL;
		gint _tmp50_ = 0;
#line 645 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
		_tmp49_ = self->priv->_window;
#line 645 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
		_tmp50_ = primary;
#line 645 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
		meta_window_move_to_monitor (_tmp49_, _tmp50_);
#line 646 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
		did_move = TRUE;
#line 2758 "WindowClone.c"
	}
#line 649 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	_tmp52_ = workspace;
#line 649 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	if (_tmp52_ != NULL) {
#line 2764 "WindowClone.c"
		MetaWorkspace* _tmp53_ = NULL;
		MetaWindow* _tmp54_ = NULL;
		MetaWorkspace* _tmp55_ = NULL;
#line 649 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
		_tmp53_ = workspace;
#line 649 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
		_tmp54_ = self->priv->_window;
#line 649 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
		_tmp55_ = meta_window_get_workspace (_tmp54_);
#line 649 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
		_tmp51_ = _tmp53_ != _tmp55_;
#line 2776 "WindowClone.c"
	} else {
#line 649 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
		_tmp51_ = FALSE;
#line 2780 "WindowClone.c"
	}
#line 649 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	if (_tmp51_) {
#line 2784 "WindowClone.c"
		MetaWindow* _tmp56_ = NULL;
		MetaWorkspace* _tmp57_ = NULL;
#line 650 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
		_tmp56_ = self->priv->_window;
#line 650 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
		_tmp57_ = workspace;
#line 650 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
		meta_window_change_workspace (_tmp56_, _tmp57_);
#line 651 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
		did_move = TRUE;
#line 2795 "WindowClone.c"
	}
#line 654 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	_tmp58_ = did_move;
#line 654 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	if (_tmp58_) {
#line 655 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
		gala_window_clone_unmanaged (self);
#line 2803 "WindowClone.c"
	} else {
#line 658 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
		gala_window_clone_drag_canceled (self);
#line 2807 "WindowClone.c"
	}
#line 597 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	_g_object_unref0 (workspace);
#line 2811 "WindowClone.c"
}


/**
 * Animate back to our previous position with a bouncing animation.
 */
static void gala_window_clone_drag_canceled (GalaWindowClone* self) {
	ClutterActor* _tmp0_ = NULL;
	ClutterActor* _tmp1_ = NULL;
	gint _tmp2_ = 0;
	ClutterClone* _tmp3_ = NULL;
	ClutterClone* _tmp4_ = NULL;
	ClutterClone* _tmp5_ = NULL;
	ClutterClone* _tmp6_ = NULL;
	ClutterClone* _tmp7_ = NULL;
	ClutterClone* _tmp8_ = NULL;
	ClutterClone* _tmp9_ = NULL;
	ClutterActor* _tmp10_ = NULL;
	ClutterActor* _tmp11_ = NULL;
	ClutterActor* _tmp12_ = NULL;
	ClutterActor* _tmp13_ = NULL;
	MetaRectangle* _tmp14_ = NULL;
	gint _tmp15_ = 0;
	MetaRectangle* _tmp16_ = NULL;
	gint _tmp17_ = 0;
	ClutterActor* _tmp18_ = NULL;
#line 664 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	g_return_if_fail (self != NULL);
#line 666 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	_tmp0_ = clutter_actor_get_parent ((ClutterActor*) self);
#line 666 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	clutter_actor_remove_child (_tmp0_, (ClutterActor*) self);
#line 667 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	_tmp1_ = self->priv->prev_parent;
#line 667 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	_tmp2_ = self->priv->prev_index;
#line 667 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	clutter_actor_insert_child_at_index (_tmp1_, (ClutterActor*) self, _tmp2_);
#line 669 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	_tmp3_ = self->priv->clone;
#line 669 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	clutter_actor_set_pivot_point ((ClutterActor*) _tmp3_, (gfloat) 0, (gfloat) 0);
#line 671 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	_tmp4_ = self->priv->clone;
#line 671 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	clutter_actor_save_easing_state ((ClutterActor*) _tmp4_);
#line 672 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	_tmp5_ = self->priv->clone;
#line 672 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	clutter_actor_set_easing_duration ((ClutterActor*) _tmp5_, (guint) 250);
#line 673 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	_tmp6_ = self->priv->clone;
#line 673 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	clutter_actor_set_easing_mode ((ClutterActor*) _tmp6_, CLUTTER_EASE_OUT_QUAD);
#line 674 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	_tmp7_ = self->priv->clone;
#line 674 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	clutter_actor_set_scale ((ClutterActor*) _tmp7_, (gdouble) 1, (gdouble) 1);
#line 675 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	_tmp8_ = self->priv->clone;
#line 675 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	clutter_actor_set_opacity ((ClutterActor*) _tmp8_, (guint) 255);
#line 676 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	_tmp9_ = self->priv->clone;
#line 676 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	clutter_actor_restore_easing_state ((ClutterActor*) _tmp9_);
#line 678 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	g_signal_emit_by_name (self, "request-reposition");
#line 681 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	clutter_actor_restore_easing_state ((ClutterActor*) self);
#line 683 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	_tmp10_ = self->priv->window_icon;
#line 683 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	clutter_actor_save_easing_state (_tmp10_);
#line 684 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	_tmp11_ = self->priv->window_icon;
#line 684 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	clutter_actor_set_easing_duration (_tmp11_, (guint) 250);
#line 685 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	_tmp12_ = self->priv->window_icon;
#line 685 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	clutter_actor_set_easing_mode (_tmp12_, CLUTTER_EASE_OUT_QUAD);
#line 686 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	_tmp13_ = self->priv->window_icon;
#line 686 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	_tmp14_ = self->priv->_slot;
#line 686 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	_tmp15_ = (*_tmp14_).width;
#line 686 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	_tmp16_ = self->priv->_slot;
#line 686 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	_tmp17_ = (*_tmp16_).height;
#line 686 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	clutter_actor_set_position (_tmp13_, (gfloat) ((_tmp15_ - GALA_WINDOW_CLONE_WINDOW_ICON_SIZE) / 2), _tmp17_ - (GALA_WINDOW_CLONE_WINDOW_ICON_SIZE * 0.75f));
#line 687 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	_tmp18_ = self->priv->window_icon;
#line 687 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	clutter_actor_restore_easing_state (_tmp18_);
#line 689 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	gala_window_clone_set_dragging (self, FALSE);
#line 2912 "WindowClone.c"
}


MetaWindow* gala_window_clone_get_window (GalaWindowClone* self) {
	MetaWindow* result;
	MetaWindow* _tmp0_ = NULL;
#line 69 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	g_return_val_if_fail (self != NULL, NULL);
#line 69 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	_tmp0_ = self->priv->_window;
#line 69 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	result = _tmp0_;
#line 69 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	return result;
#line 2927 "WindowClone.c"
}


static void gala_window_clone_set_window (GalaWindowClone* self, MetaWindow* value) {
	MetaWindow* _tmp0_ = NULL;
	MetaWindow* _tmp1_ = NULL;
#line 69 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	g_return_if_fail (self != NULL);
#line 69 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	_tmp0_ = value;
#line 69 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	_tmp1_ = _g_object_ref0 (_tmp0_);
#line 69 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	_g_object_unref0 (self->priv->_window);
#line 69 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	self->priv->_window = _tmp1_;
#line 69 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	g_object_notify ((GObject *) self, "window");
#line 2946 "WindowClone.c"
}


MetaRectangle* gala_window_clone_get_slot (GalaWindowClone* self) {
	MetaRectangle* result;
	MetaRectangle* _tmp0_ = NULL;
#line 74 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	g_return_val_if_fail (self != NULL, NULL);
#line 74 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	_tmp0_ = self->priv->_slot;
#line 74 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	result = _tmp0_;
#line 74 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	return result;
#line 2961 "WindowClone.c"
}


static MetaRectangle* _meta_rectangle_dup (MetaRectangle* self) {
	MetaRectangle* dup;
#line 74 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	dup = g_new0 (MetaRectangle, 1);
#line 74 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	memcpy (dup, self, sizeof (MetaRectangle));
#line 74 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	return dup;
#line 2973 "WindowClone.c"
}


static gpointer __meta_rectangle_dup0 (gpointer self) {
#line 74 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	return self ? _meta_rectangle_dup (self) : NULL;
#line 2980 "WindowClone.c"
}


static void gala_window_clone_set_slot (GalaWindowClone* self, MetaRectangle* value) {
	MetaRectangle* _tmp0_ = NULL;
	MetaRectangle* _tmp1_ = NULL;
#line 74 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	g_return_if_fail (self != NULL);
#line 74 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	_tmp0_ = value;
#line 74 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	_tmp1_ = __meta_rectangle_dup0 (_tmp0_);
#line 74 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	_g_free0 (self->priv->_slot);
#line 74 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	self->priv->_slot = _tmp1_;
#line 2997 "WindowClone.c"
}


gboolean gala_window_clone_get_dragging (GalaWindowClone* self) {
	gboolean result;
	gboolean _tmp0_ = FALSE;
#line 76 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	g_return_val_if_fail (self != NULL, FALSE);
#line 76 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	_tmp0_ = self->priv->_dragging;
#line 76 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	result = _tmp0_;
#line 76 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	return result;
#line 3012 "WindowClone.c"
}


static void gala_window_clone_set_dragging (GalaWindowClone* self, gboolean value) {
	gboolean _tmp0_ = FALSE;
#line 76 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	g_return_if_fail (self != NULL);
#line 76 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	_tmp0_ = value;
#line 76 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	self->priv->_dragging = _tmp0_;
#line 76 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	g_object_notify ((GObject *) self, "dragging");
#line 3026 "WindowClone.c"
}


gboolean gala_window_clone_get_active (GalaWindowClone* self) {
	gboolean result;
	gboolean _tmp0_ = FALSE;
#line 84 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	g_return_val_if_fail (self != NULL, FALSE);
#line 85 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	_tmp0_ = self->priv->_active;
#line 85 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	result = _tmp0_;
#line 85 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	return result;
#line 3041 "WindowClone.c"
}


void gala_window_clone_set_active (GalaWindowClone* self, gboolean value) {
	gboolean _tmp0_ = FALSE;
	ClutterActor* _tmp1_ = NULL;
	ClutterActor* _tmp2_ = NULL;
	gint _tmp3_ = 0;
	gboolean _tmp4_ = FALSE;
	ClutterActor* _tmp5_ = NULL;
	ClutterActor* _tmp6_ = NULL;
#line 87 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	g_return_if_fail (self != NULL);
#line 88 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	_tmp0_ = value;
#line 88 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	self->priv->_active = _tmp0_;
#line 90 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	_tmp1_ = self->priv->active_shape;
#line 90 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	clutter_actor_save_easing_state (_tmp1_);
#line 91 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	_tmp2_ = self->priv->active_shape;
#line 91 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	clutter_actor_set_easing_duration (_tmp2_, (guint) 200);
#line 93 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	_tmp4_ = self->priv->_active;
#line 93 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	if (_tmp4_) {
#line 93 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
		_tmp3_ = 255;
#line 3073 "WindowClone.c"
	} else {
#line 93 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
		_tmp3_ = 0;
#line 3077 "WindowClone.c"
	}
#line 93 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	_tmp5_ = self->priv->active_shape;
#line 93 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	clutter_actor_set_opacity (_tmp5_, (guint) _tmp3_);
#line 95 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	_tmp6_ = self->priv->active_shape;
#line 95 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	clutter_actor_restore_easing_state (_tmp6_);
#line 87 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	g_object_notify ((GObject *) self, "active");
#line 3089 "WindowClone.c"
}


gboolean gala_window_clone_get_overview_mode (GalaWindowClone* self) {
	gboolean result;
	gboolean _tmp0_ = FALSE;
#line 99 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	g_return_val_if_fail (self != NULL, FALSE);
#line 99 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	_tmp0_ = self->priv->_overview_mode;
#line 99 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	result = _tmp0_;
#line 99 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	return result;
#line 3104 "WindowClone.c"
}


static void gala_window_clone_set_overview_mode (GalaWindowClone* self, gboolean value) {
	gboolean _tmp0_ = FALSE;
#line 99 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	g_return_if_fail (self != NULL);
#line 99 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	_tmp0_ = value;
#line 99 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	self->priv->_overview_mode = _tmp0_;
#line 99 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	g_object_notify ((GObject *) self, "overview-mode");
#line 3118 "WindowClone.c"
}


guint8 gala_window_clone_get_shadow_opacity (GalaWindowClone* self) {
	guint8 result;
	guint8 _tmp0_ = 0U;
	GalaShadowEffect* _tmp1_ = NULL;
#line 103 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	g_return_val_if_fail (self != NULL, 0U);
#line 104 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	_tmp1_ = self->priv->shadow_effect;
#line 104 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	if (_tmp1_ != NULL) {
#line 3132 "WindowClone.c"
		GalaShadowEffect* _tmp2_ = NULL;
		guint8 _tmp3_ = 0U;
		guint8 _tmp4_ = 0U;
#line 104 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
		_tmp2_ = self->priv->shadow_effect;
#line 104 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
		_tmp3_ = gala_shadow_effect_get_shadow_opacity (_tmp2_);
#line 104 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
		_tmp4_ = _tmp3_;
#line 104 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
		_tmp0_ = _tmp4_;
#line 3144 "WindowClone.c"
	} else {
#line 104 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
		_tmp0_ = (guint8) 255;
#line 3148 "WindowClone.c"
	}
#line 104 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	result = _tmp0_;
#line 104 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	return result;
#line 3154 "WindowClone.c"
}


void gala_window_clone_set_shadow_opacity (GalaWindowClone* self, guint8 value) {
	GalaShadowEffect* _tmp0_ = NULL;
#line 106 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	g_return_if_fail (self != NULL);
#line 107 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	_tmp0_ = self->priv->shadow_effect;
#line 107 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	if (_tmp0_ != NULL) {
#line 3166 "WindowClone.c"
		GalaShadowEffect* _tmp1_ = NULL;
		guint8 _tmp2_ = 0U;
#line 108 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
		_tmp1_ = self->priv->shadow_effect;
#line 108 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
		_tmp2_ = value;
#line 108 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
		gala_shadow_effect_set_shadow_opacity (_tmp1_, _tmp2_);
#line 109 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
		clutter_actor_queue_redraw ((ClutterActor*) self);
#line 3177 "WindowClone.c"
	}
}


static Block38Data* block38_data_ref (Block38Data* _data38_) {
#line 139 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	g_atomic_int_inc (&_data38_->_ref_count_);
#line 139 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	return _data38_;
#line 3187 "WindowClone.c"
}


static void block38_data_unref (void * _userdata_) {
	Block38Data* _data38_;
	_data38_ = (Block38Data*) _userdata_;
#line 139 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	if (g_atomic_int_dec_and_test (&_data38_->_ref_count_)) {
#line 3196 "WindowClone.c"
		GalaWindowClone* self;
#line 139 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
		self = _data38_->self;
#line 139 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
		_g_object_unref0 (_data38_->click_action);
#line 139 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
		_g_object_unref0 (self);
#line 139 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
		g_slice_free (Block38Data, _data38_);
#line 3206 "WindowClone.c"
	}
}


static void _gala_window_clone____lambda71_ (Block38Data* _data38_) {
	GalaWindowClone* self;
	ClutterClickAction* _tmp0_ = NULL;
	guint _tmp1_ = 0U;
#line 141 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	self = _data38_->self;
#line 142 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	_tmp0_ = _data38_->click_action;
#line 142 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	_tmp1_ = clutter_click_action_get_button (_tmp0_);
#line 142 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	gala_window_clone_actor_clicked (self, (guint32) _tmp1_);
#line 3223 "WindowClone.c"
}


static void __gala_window_clone____lambda71__clutter_click_action_clicked (ClutterClickAction* _sender, ClutterActor* actor, gpointer self) {
#line 141 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	_gala_window_clone____lambda71_ (self);
#line 3230 "WindowClone.c"
}


static ClutterActor* _gala_window_clone_drag_begin_gala_drag_drop_action_drag_begin (GalaDragDropAction* _sender, gfloat x, gfloat y, gpointer self) {
	ClutterActor* result;
	result = gala_window_clone_drag_begin ((GalaWindowClone*) self, x, y);
#line 148 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	return result;
#line 3239 "WindowClone.c"
}


static void _gala_window_clone_drag_destination_crossed_gala_drag_drop_action_destination_crossed (GalaDragDropAction* _sender, ClutterActor* destination, gboolean hovered, gpointer self) {
#line 149 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	gala_window_clone_drag_destination_crossed ((GalaWindowClone*) self, destination, hovered);
#line 3246 "WindowClone.c"
}


static void _gala_window_clone_drag_end_gala_drag_drop_action_drag_end (GalaDragDropAction* _sender, ClutterActor* actor, gpointer self) {
#line 150 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	gala_window_clone_drag_end ((GalaWindowClone*) self, actor);
#line 3253 "WindowClone.c"
}


static void _gala_window_clone_drag_canceled_gala_drag_drop_action_drag_canceled (GalaDragDropAction* _sender, gpointer self) {
#line 151 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	gala_window_clone_drag_canceled ((GalaWindowClone*) self);
#line 3260 "WindowClone.c"
}


static void _gala_window_clone_actor_clicked_gala_drag_drop_action_actor_clicked (GalaDragDropAction* _sender, guint32 button, gpointer self) {
#line 152 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	gala_window_clone_actor_clicked ((GalaWindowClone*) self, button);
#line 3267 "WindowClone.c"
}


static gboolean _gala_window_clone___lambda72_ (GalaWindowClone* self) {
	gboolean result = FALSE;
#line 161 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	gala_window_clone_close_window (self);
#line 162 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	result = TRUE;
#line 162 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	return result;
#line 3279 "WindowClone.c"
}


static gboolean __gala_window_clone___lambda72__clutter_actor_button_press_event (ClutterActor* _sender, ClutterButtonEvent* event, gpointer self) {
	gboolean result;
	result = _gala_window_clone___lambda72_ ((GalaWindowClone*) self);
#line 160 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	return result;
#line 3288 "WindowClone.c"
}


static GObject * gala_window_clone_constructor (GType type, guint n_construct_properties, GObjectConstructParam * construct_properties) {
	GObject * obj;
	GObjectClass * parent_class;
	GalaWindowClone * self;
	MetaWindow* _tmp0_ = NULL;
	MetaWindow* _tmp1_ = NULL;
	gboolean _tmp2_ = FALSE;
	ClutterActor* _tmp13_ = NULL;
	ClutterActor* _tmp14_ = NULL;
	ClutterActor* _tmp15_ = NULL;
	ClutterActor* _tmp16_ = NULL;
	MetaWindow* _tmp17_ = NULL;
	GalaWindowIcon* _tmp18_ = NULL;
	ClutterActor* _tmp19_ = NULL;
	ClutterActor* _tmp20_ = NULL;
	ClutterActor* _tmp21_ = NULL;
	ClutterActor* _tmp22_ = NULL;
	ClutterColor _tmp23_ = {0};
	ClutterActor* _tmp24_ = NULL;
	ClutterActor* _tmp25_ = NULL;
	ClutterActor* _tmp26_ = NULL;
	ClutterActor* _tmp27_ = NULL;
#line 132 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	parent_class = G_OBJECT_CLASS (gala_window_clone_parent_class);
#line 132 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	obj = parent_class->constructor (type, n_construct_properties, construct_properties);
#line 132 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	self = G_TYPE_CHECK_INSTANCE_CAST (obj, GALA_TYPE_WINDOW_CLONE, GalaWindowClone);
#line 134 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	clutter_actor_set_reactive ((ClutterActor*) self, TRUE);
#line 136 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	_tmp0_ = self->priv->_window;
#line 136 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	g_signal_connect_object (_tmp0_, "unmanaged", (GCallback) _gala_window_clone_unmanaged_meta_window_unmanaged, self, 0);
#line 137 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	_tmp1_ = self->priv->_window;
#line 137 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	g_signal_connect_object ((GObject*) _tmp1_, "notify::on-all-workspaces", (GCallback) _gala_window_clone_on_all_workspaces_changed_g_object_notify, self, 0);
#line 139 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	_tmp2_ = self->priv->_overview_mode;
#line 139 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	if (_tmp2_) {
#line 3334 "WindowClone.c"
		Block38Data* _data38_;
		ClutterClickAction* _tmp3_ = NULL;
		ClutterClickAction* _tmp4_ = NULL;
		ClutterClickAction* _tmp5_ = NULL;
#line 139 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
		_data38_ = g_slice_new0 (Block38Data);
#line 139 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
		_data38_->_ref_count_ = 1;
#line 139 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
		_data38_->self = g_object_ref (self);
#line 140 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
		_tmp3_ = (ClutterClickAction*) clutter_click_action_new ();
#line 140 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
		g_object_ref_sink (_tmp3_);
#line 140 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
		_data38_->click_action = _tmp3_;
#line 141 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
		_tmp4_ = _data38_->click_action;
#line 141 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
		g_signal_connect_data (_tmp4_, "clicked", (GCallback) __gala_window_clone____lambda71__clutter_click_action_clicked, block38_data_ref (_data38_), (GClosureNotify) block38_data_unref, 0);
#line 145 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
		_tmp5_ = _data38_->click_action;
#line 145 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
		clutter_actor_add_action ((ClutterActor*) self, (ClutterAction*) _tmp5_);
#line 139 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
		block38_data_unref (_data38_);
#line 139 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
		_data38_ = NULL;
#line 3363 "WindowClone.c"
	} else {
		GalaDragDropAction* _tmp6_ = NULL;
		GalaDragDropAction* _tmp7_ = NULL;
		GalaDragDropAction* _tmp8_ = NULL;
		GalaDragDropAction* _tmp9_ = NULL;
		GalaDragDropAction* _tmp10_ = NULL;
		GalaDragDropAction* _tmp11_ = NULL;
		GalaDragDropAction* _tmp12_ = NULL;
#line 147 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
		_tmp6_ = gala_drag_drop_action_new (GALA_DRAG_DROP_ACTION_TYPE_SOURCE, "multitaskingview-window");
#line 147 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
		g_object_ref_sink (_tmp6_);
#line 147 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
		_g_object_unref0 (self->priv->drag_action);
#line 147 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
		self->priv->drag_action = _tmp6_;
#line 148 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
		_tmp7_ = self->priv->drag_action;
#line 148 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
		g_signal_connect_object (_tmp7_, "drag-begin", (GCallback) _gala_window_clone_drag_begin_gala_drag_drop_action_drag_begin, self, 0);
#line 149 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
		_tmp8_ = self->priv->drag_action;
#line 149 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
		g_signal_connect_object (_tmp8_, "destination-crossed", (GCallback) _gala_window_clone_drag_destination_crossed_gala_drag_drop_action_destination_crossed, self, 0);
#line 150 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
		_tmp9_ = self->priv->drag_action;
#line 150 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
		g_signal_connect_object (_tmp9_, "drag-end", (GCallback) _gala_window_clone_drag_end_gala_drag_drop_action_drag_end, self, 0);
#line 151 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
		_tmp10_ = self->priv->drag_action;
#line 151 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
		g_signal_connect_object (_tmp10_, "drag-canceled", (GCallback) _gala_window_clone_drag_canceled_gala_drag_drop_action_drag_canceled, self, 0);
#line 152 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
		_tmp11_ = self->priv->drag_action;
#line 152 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
		g_signal_connect_object (_tmp11_, "actor-clicked", (GCallback) _gala_window_clone_actor_clicked_gala_drag_drop_action_actor_clicked, self, 0);
#line 154 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
		_tmp12_ = self->priv->drag_action;
#line 154 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
		clutter_actor_add_action ((ClutterActor*) self, (ClutterAction*) _tmp12_);
#line 3404 "WindowClone.c"
	}
#line 157 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	_tmp13_ = gala_utils_create_close_button ();
#line 157 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	_g_object_unref0 (self->priv->close_button);
#line 157 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	self->priv->close_button = _tmp13_;
#line 158 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	_tmp14_ = self->priv->close_button;
#line 158 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	clutter_actor_set_opacity (_tmp14_, (guint) 0);
#line 159 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	_tmp15_ = self->priv->close_button;
#line 159 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	clutter_actor_set_easing_duration (_tmp15_, (guint) 200);
#line 160 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	_tmp16_ = self->priv->close_button;
#line 160 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	g_signal_connect_object (_tmp16_, "button-press-event", (GCallback) __gala_window_clone___lambda72__clutter_actor_button_press_event, self, 0);
#line 165 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	_tmp17_ = self->priv->_window;
#line 165 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	_tmp18_ = gala_window_icon_new (_tmp17_, GALA_WINDOW_CLONE_WINDOW_ICON_SIZE, FALSE);
#line 165 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	g_object_ref_sink (_tmp18_);
#line 165 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	_g_object_unref0 (self->priv->window_icon);
#line 165 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	self->priv->window_icon = (ClutterActor*) _tmp18_;
#line 166 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	_tmp19_ = self->priv->window_icon;
#line 166 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	clutter_actor_set_opacity (_tmp19_, (guint) 0);
#line 167 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	_tmp20_ = self->priv->window_icon;
#line 167 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	clutter_actor_set_pivot_point (_tmp20_, 0.5f, 0.5f);
#line 169 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	_tmp21_ = clutter_actor_new ();
#line 169 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	g_object_ref_sink (_tmp21_);
#line 169 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	_g_object_unref0 (self->priv->active_shape);
#line 169 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	self->priv->active_shape = _tmp21_;
#line 170 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	_tmp22_ = self->priv->active_shape;
#line 170 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	_tmp23_.red = (guint8) 255;
#line 170 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	_tmp23_.green = (guint8) 255;
#line 170 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	_tmp23_.blue = (guint8) 255;
#line 170 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	_tmp23_.alpha = (guint8) 200;
#line 170 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	clutter_actor_set_background_color (_tmp22_, &_tmp23_);
#line 171 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	_tmp24_ = self->priv->active_shape;
#line 171 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	clutter_actor_set_opacity (_tmp24_, (guint) 0);
#line 173 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	_tmp25_ = self->priv->active_shape;
#line 173 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	clutter_actor_add_child ((ClutterActor*) self, _tmp25_);
#line 174 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	_tmp26_ = self->priv->window_icon;
#line 174 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	clutter_actor_add_child ((ClutterActor*) self, _tmp26_);
#line 175 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	_tmp27_ = self->priv->close_button;
#line 175 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	clutter_actor_add_child ((ClutterActor*) self, _tmp27_);
#line 177 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	gala_window_clone_load_clone (self, FALSE);
#line 132 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	return obj;
#line 3482 "WindowClone.c"
}


static void gala_window_clone_class_init (GalaWindowCloneClass * klass) {
#line 52 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	gala_window_clone_parent_class = g_type_class_peek_parent (klass);
#line 52 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	g_type_class_add_private (klass, sizeof (GalaWindowClonePrivate));
#line 52 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	((ClutterActorClass *) klass)->allocate = gala_window_clone_real_allocate;
#line 52 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	((ClutterActorClass *) klass)->button_press_event = gala_window_clone_real_button_press_event;
#line 52 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	((ClutterActorClass *) klass)->enter_event = gala_window_clone_real_enter_event;
#line 52 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	((ClutterActorClass *) klass)->leave_event = gala_window_clone_real_leave_event;
#line 52 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	G_OBJECT_CLASS (klass)->get_property = _vala_gala_window_clone_get_property;
#line 52 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	G_OBJECT_CLASS (klass)->set_property = _vala_gala_window_clone_set_property;
#line 52 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	G_OBJECT_CLASS (klass)->constructor = gala_window_clone_constructor;
#line 52 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	G_OBJECT_CLASS (klass)->finalize = gala_window_clone_finalize;
#line 52 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	g_object_class_install_property (G_OBJECT_CLASS (klass), GALA_WINDOW_CLONE_WINDOW, g_param_spec_object ("window", "window", "window", meta_window_get_type (), G_PARAM_STATIC_NAME | G_PARAM_STATIC_NICK | G_PARAM_STATIC_BLURB | G_PARAM_READABLE | G_PARAM_WRITABLE | G_PARAM_CONSTRUCT_ONLY));
#line 52 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	g_object_class_install_property (G_OBJECT_CLASS (klass), GALA_WINDOW_CLONE_DRAGGING, g_param_spec_boolean ("dragging", "dragging", "dragging", FALSE, G_PARAM_STATIC_NAME | G_PARAM_STATIC_NICK | G_PARAM_STATIC_BLURB | G_PARAM_READABLE));
#line 3511 "WindowClone.c"
	/**
	 * When active fades a white border around the window in. Used for the visually
	 * indicating the WindowCloneContainer's current_window.
	 */
#line 52 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	g_object_class_install_property (G_OBJECT_CLASS (klass), GALA_WINDOW_CLONE_ACTIVE, g_param_spec_boolean ("active", "active", "active", FALSE, G_PARAM_STATIC_NAME | G_PARAM_STATIC_NICK | G_PARAM_STATIC_BLURB | G_PARAM_READABLE | G_PARAM_WRITABLE));
#line 52 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	g_object_class_install_property (G_OBJECT_CLASS (klass), GALA_WINDOW_CLONE_OVERVIEW_MODE, g_param_spec_boolean ("overview-mode", "overview-mode", "overview-mode", FALSE, G_PARAM_STATIC_NAME | G_PARAM_STATIC_NICK | G_PARAM_STATIC_BLURB | G_PARAM_READABLE | G_PARAM_WRITABLE | G_PARAM_CONSTRUCT_ONLY));
#line 52 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	g_object_class_install_property (G_OBJECT_CLASS (klass), GALA_WINDOW_CLONE_SHADOW_OPACITY, g_param_spec_uchar ("shadow-opacity", "shadow-opacity", "shadow-opacity", 0, G_MAXUINT8, 0, G_PARAM_STATIC_NAME | G_PARAM_STATIC_NICK | G_PARAM_STATIC_BLURB | G_PARAM_READABLE | G_PARAM_WRITABLE));
#line 3522 "WindowClone.c"
	/**
	 * The window was selected. The MultitaskingView should consider activating
	 * the window and closing the view.
	 */
#line 52 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	g_signal_new ("selected", GALA_TYPE_WINDOW_CLONE, G_SIGNAL_RUN_LAST, 0, NULL, NULL, g_cclosure_marshal_VOID__VOID, G_TYPE_NONE, 0);
#line 3529 "WindowClone.c"
	/**
	 * The window was moved or resized and a relayout of the tiling layout may
	 * be sensible right now.
	 */
#line 52 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	g_signal_new ("request_reposition", GALA_TYPE_WINDOW_CLONE, G_SIGNAL_RUN_LAST, 0, NULL, NULL, g_cclosure_marshal_VOID__VOID, G_TYPE_NONE, 0);
#line 3536 "WindowClone.c"
}


static void gala_window_clone_instance_init (GalaWindowClone * self) {
#line 52 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	self->priv = GALA_WINDOW_CLONE_GET_PRIVATE (self);
#line 74 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	self->priv->_slot = NULL;
#line 76 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	self->priv->_dragging = FALSE;
#line 78 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	self->priv->_active = FALSE;
#line 114 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	self->priv->drag_action = NULL;
#line 115 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	self->priv->clone = NULL;
#line 116 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	self->priv->shadow_effect = NULL;
#line 118 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	self->priv->prev_parent = NULL;
#line 119 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	self->priv->prev_index = -1;
#line 120 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	self->priv->check_confirm_dialog_cb = (gulong) 0;
#line 121 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	self->priv->shadow_update_timeout = (guint) 0;
#line 3563 "WindowClone.c"
}


static void gala_window_clone_finalize (GObject* obj) {
	GalaWindowClone * self;
	MetaWindow* _tmp0_ = NULL;
	guint _tmp1_ = 0U;
	MetaWindow* _tmp2_ = NULL;
	guint _tmp3_ = 0U;
	GQuark _tmp4_ = 0U;
	guint _tmp5_ = 0U;
#line 52 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	self = G_TYPE_CHECK_INSTANCE_CAST (obj, GALA_TYPE_WINDOW_CLONE, GalaWindowClone);
#line 182 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	_tmp0_ = self->priv->_window;
#line 182 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	g_signal_parse_name ("unmanaged", meta_window_get_type (), &_tmp1_, NULL, FALSE);
#line 182 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	g_signal_handlers_disconnect_matched (_tmp0_, G_SIGNAL_MATCH_ID | G_SIGNAL_MATCH_FUNC | G_SIGNAL_MATCH_DATA, _tmp1_, 0, NULL, (GCallback) _gala_window_clone_unmanaged_meta_window_unmanaged, self);
#line 183 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	_tmp2_ = self->priv->_window;
#line 183 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	g_signal_parse_name ("notify::on-all-workspaces", G_TYPE_OBJECT, &_tmp3_, &_tmp4_, TRUE);
#line 183 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	g_signal_handlers_disconnect_matched ((GObject*) _tmp2_, G_SIGNAL_MATCH_ID | G_SIGNAL_MATCH_DETAIL | G_SIGNAL_MATCH_FUNC | G_SIGNAL_MATCH_DATA, _tmp3_, _tmp4_, NULL, (GCallback) _gala_window_clone_on_all_workspaces_changed_g_object_notify, self);
#line 185 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	_tmp5_ = self->priv->shadow_update_timeout;
#line 185 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	if (_tmp5_ != ((guint) 0)) {
#line 3593 "WindowClone.c"
		guint _tmp6_ = 0U;
#line 186 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
		_tmp6_ = self->priv->shadow_update_timeout;
#line 186 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
		g_source_remove (_tmp6_);
#line 3599 "WindowClone.c"
	}
#line 69 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	_g_object_unref0 (self->priv->_window);
#line 74 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	_g_free0 (self->priv->_slot);
#line 114 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	_g_object_unref0 (self->priv->drag_action);
#line 115 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	_g_object_unref0 (self->priv->clone);
#line 116 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	_g_object_unref0 (self->priv->shadow_effect);
#line 118 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	_g_object_unref0 (self->priv->prev_parent);
#line 123 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	_g_object_unref0 (self->priv->close_button);
#line 124 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	_g_object_unref0 (self->priv->active_shape);
#line 125 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	_g_object_unref0 (self->priv->window_icon);
#line 52 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	G_OBJECT_CLASS (gala_window_clone_parent_class)->finalize (obj);
#line 3621 "WindowClone.c"
}


/**
 * A container for a clone of the texture of a MetaWindow, a WindowIcon,
 * a close button and a shadow. Used together with the WindowCloneContainer.
 */
GType gala_window_clone_get_type (void) {
	static volatile gsize gala_window_clone_type_id__volatile = 0;
	if (g_once_init_enter (&gala_window_clone_type_id__volatile)) {
		static const GTypeInfo g_define_type_info = { sizeof (GalaWindowCloneClass), (GBaseInitFunc) NULL, (GBaseFinalizeFunc) NULL, (GClassInitFunc) gala_window_clone_class_init, (GClassFinalizeFunc) NULL, NULL, sizeof (GalaWindowClone), 0, (GInstanceInitFunc) gala_window_clone_instance_init, NULL };
		GType gala_window_clone_type_id;
		gala_window_clone_type_id = g_type_register_static (clutter_actor_get_type (), "GalaWindowClone", &g_define_type_info, 0);
		g_once_init_leave (&gala_window_clone_type_id__volatile, gala_window_clone_type_id);
	}
	return gala_window_clone_type_id__volatile;
}


static void _vala_gala_window_clone_get_property (GObject * object, guint property_id, GValue * value, GParamSpec * pspec) {
	GalaWindowClone * self;
	self = G_TYPE_CHECK_INSTANCE_CAST (object, GALA_TYPE_WINDOW_CLONE, GalaWindowClone);
#line 52 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	switch (property_id) {
#line 52 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
		case GALA_WINDOW_CLONE_WINDOW:
#line 52 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
		g_value_set_object (value, gala_window_clone_get_window (self));
#line 52 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
		break;
#line 52 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
		case GALA_WINDOW_CLONE_DRAGGING:
#line 52 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
		g_value_set_boolean (value, gala_window_clone_get_dragging (self));
#line 52 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
		break;
#line 52 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
		case GALA_WINDOW_CLONE_ACTIVE:
#line 52 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
		g_value_set_boolean (value, gala_window_clone_get_active (self));
#line 52 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
		break;
#line 52 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
		case GALA_WINDOW_CLONE_OVERVIEW_MODE:
#line 52 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
		g_value_set_boolean (value, gala_window_clone_get_overview_mode (self));
#line 52 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
		break;
#line 52 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
		case GALA_WINDOW_CLONE_SHADOW_OPACITY:
#line 52 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
		g_value_set_uchar (value, gala_window_clone_get_shadow_opacity (self));
#line 52 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
		break;
#line 3676 "WindowClone.c"
		default:
#line 52 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
		G_OBJECT_WARN_INVALID_PROPERTY_ID (object, property_id, pspec);
#line 52 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
		break;
#line 3682 "WindowClone.c"
	}
}


static void _vala_gala_window_clone_set_property (GObject * object, guint property_id, const GValue * value, GParamSpec * pspec) {
	GalaWindowClone * self;
	self = G_TYPE_CHECK_INSTANCE_CAST (object, GALA_TYPE_WINDOW_CLONE, GalaWindowClone);
#line 52 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
	switch (property_id) {
#line 52 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
		case GALA_WINDOW_CLONE_WINDOW:
#line 52 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
		gala_window_clone_set_window (self, g_value_get_object (value));
#line 52 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
		break;
#line 52 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
		case GALA_WINDOW_CLONE_DRAGGING:
#line 52 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
		gala_window_clone_set_dragging (self, g_value_get_boolean (value));
#line 52 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
		break;
#line 52 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
		case GALA_WINDOW_CLONE_ACTIVE:
#line 52 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
		gala_window_clone_set_active (self, g_value_get_boolean (value));
#line 52 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
		break;
#line 52 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
		case GALA_WINDOW_CLONE_OVERVIEW_MODE:
#line 52 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
		gala_window_clone_set_overview_mode (self, g_value_get_boolean (value));
#line 52 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
		break;
#line 52 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
		case GALA_WINDOW_CLONE_SHADOW_OPACITY:
#line 52 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
		gala_window_clone_set_shadow_opacity (self, g_value_get_uchar (value));
#line 52 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
		break;
#line 3722 "WindowClone.c"
		default:
#line 52 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
		G_OBJECT_WARN_INVALID_PROPERTY_ID (object, property_id, pspec);
#line 52 "/home/nick/work/Enso-OS/galal/src/Widgets/WindowClone.vala"
		break;
#line 3728 "WindowClone.c"
	}
}



