/* DBusAccelerator.c generated by valac 0.30.1, the Vala compiler
 * generated from DBusAccelerator.vala, do not modify */

/**/
/*  Copyright (C) 2015 Nicolas Bruguier, Corentin NoÃ«l*/
/**/
/*  This program is free software: you can redistribute it and/or modify*/
/*  it under the terms of the GNU General Public License as published by*/
/*  the Free Software Foundation, either version 3 of the License, or*/
/*  (at your option) any later version.*/
/**/
/*  This program is distributed in the hope that it will be useful,*/
/*  but WITHOUT ANY WARRANTY; without even the implied warranty of*/
/*  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the*/
/*  GNU General Public License for more details.*/
/**/
/*  You should have received a copy of the GNU General Public License*/
/*  along with this program.  If not, see <http://www.gnu.org/licenses/>.*/
/**/

#include <glib.h>
#include <glib-object.h>
#include <stdlib.h>
#include <string.h>
#include <gio/gio.h>
#include "gala.h"
#include <meta/meta-plugin.h>
#include <meta/screen.h>
#include <meta/display.h>
#include <gobject/gvaluecollector.h>


#define GALA_TYPE_ACCELERATOR (gala_accelerator_get_type ())
typedef struct _GalaAccelerator GalaAccelerator;
#define _g_free0(var) (var = (g_free (var), NULL))

#define GALA_TYPE_DBUS_ACCELERATOR (gala_dbus_accelerator_get_type ())
#define GALA_DBUS_ACCELERATOR(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), GALA_TYPE_DBUS_ACCELERATOR, GalaDBusAccelerator))
#define GALA_DBUS_ACCELERATOR_CLASS(klass) (G_TYPE_CHECK_CLASS_CAST ((klass), GALA_TYPE_DBUS_ACCELERATOR, GalaDBusAcceleratorClass))
#define GALA_IS_DBUS_ACCELERATOR(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), GALA_TYPE_DBUS_ACCELERATOR))
#define GALA_IS_DBUS_ACCELERATOR_CLASS(klass) (G_TYPE_CHECK_CLASS_TYPE ((klass), GALA_TYPE_DBUS_ACCELERATOR))
#define GALA_DBUS_ACCELERATOR_GET_CLASS(obj) (G_TYPE_INSTANCE_GET_CLASS ((obj), GALA_TYPE_DBUS_ACCELERATOR, GalaDBusAcceleratorClass))

typedef struct _GalaDBusAccelerator GalaDBusAccelerator;
typedef struct _GalaDBusAcceleratorClass GalaDBusAcceleratorClass;
typedef struct _GalaDBusAcceleratorPrivate GalaDBusAcceleratorPrivate;
#define _g_object_unref0(var) ((var == NULL) ? NULL : (var = (g_object_unref (var), NULL)))
#define _g_hash_table_unref0(var) ((var == NULL) ? NULL : (var = (g_hash_table_unref (var), NULL)))
#define _gala_dbus_accelerator_unref0(var) ((var == NULL) ? NULL : (var = (gala_dbus_accelerator_unref (var), NULL)))
#define _g_list_free0(var) ((var == NULL) ? NULL : (var = (g_list_free (var), NULL)))
typedef struct _GalaParamSpecDBusAccelerator GalaParamSpecDBusAccelerator;

struct _GalaAccelerator {
	gchar* name;
	guint flags;
};

struct _GalaDBusAccelerator {
	GTypeInstance parent_instance;
	volatile int ref_count;
	GalaDBusAcceleratorPrivate * priv;
};

struct _GalaDBusAcceleratorClass {
	GTypeClass parent_class;
	void (*finalize) (GalaDBusAccelerator *self);
};

struct _GalaDBusAcceleratorPrivate {
	GalaWindowManager* wm;
	GHashTable* grabbed_accelerators;
};

struct _GalaParamSpecDBusAccelerator {
	GParamSpec parent_instance;
};


static gpointer gala_dbus_accelerator_parent_class = NULL;
static GalaDBusAccelerator* gala_dbus_accelerator_instance;
static GalaDBusAccelerator* gala_dbus_accelerator_instance = NULL;

GType gala_accelerator_get_type (void) G_GNUC_CONST;
GalaAccelerator* gala_accelerator_dup (const GalaAccelerator* self);
void gala_accelerator_free (GalaAccelerator* self);
void gala_accelerator_copy (const GalaAccelerator* self, GalaAccelerator* dest);
void gala_accelerator_destroy (GalaAccelerator* self);
gpointer gala_dbus_accelerator_ref (gpointer instance);
void gala_dbus_accelerator_unref (gpointer instance);
GParamSpec* gala_param_spec_dbus_accelerator (const gchar* name, const gchar* nick, const gchar* blurb, GType object_type, GParamFlags flags);
void gala_value_set_dbus_accelerator (GValue* value, gpointer v_object);
void gala_value_take_dbus_accelerator (GValue* value, gpointer v_object);
gpointer gala_value_get_dbus_accelerator (const GValue* value);
GType gala_dbus_accelerator_get_type (void) G_GNUC_CONST;
guint gala_dbus_accelerator_register_object (void* object, GDBusConnection* connection, const gchar* path, GError** error);
#define GALA_DBUS_ACCELERATOR_GET_PRIVATE(o) (G_TYPE_INSTANCE_GET_PRIVATE ((o), GALA_TYPE_DBUS_ACCELERATOR, GalaDBusAcceleratorPrivate))
enum  {
	GALA_DBUS_ACCELERATOR_DUMMY_PROPERTY
};
GalaDBusAccelerator* gala_dbus_accelerator_init (GalaWindowManager* wm);
static GalaDBusAccelerator* gala_dbus_accelerator_new (GalaWindowManager* _wm);
static GalaDBusAccelerator* gala_dbus_accelerator_construct (GType object_type, GalaWindowManager* _wm);
static void _g_free0_ (gpointer var);
static void gala_dbus_accelerator_on_accelerator_activated (GalaDBusAccelerator* self, guint action, guint device_id, guint timestamp);
static void _gala_dbus_accelerator_on_accelerator_activated_meta_display_accelerator_activated (MetaDisplay* _sender, guint object, guint p0, guint p1, gpointer self);
static gboolean _uint_equal (const guint* s1, const guint* s2);
guint gala_dbus_accelerator_grab_accelerator (GalaDBusAccelerator* self, const gchar* accelerator, guint flags);
static guint* _uint_dup (guint* self);
guint* gala_dbus_accelerator_grab_accelerators (GalaDBusAccelerator* self, GalaAccelerator* accelerators, int accelerators_length1, int* result_length1);
static void _vala_array_add1 (guint** array, int* length, int* size, guint value);
gboolean gala_dbus_accelerator_ungrab_accelerator (GalaDBusAccelerator* self, guint action);
void gala_dbus_accelerator_show_osd (GalaDBusAccelerator* self, GHashTable* parameters);
void gala_media_feedback_send (const gchar* icon, gint val);
static void g_cclosure_user_marshal_VOID__UINT_UINT_UINT (GClosure * closure, GValue * return_value, guint n_param_values, const GValue * param_values, gpointer invocation_hint, gpointer marshal_data);
static void gala_dbus_accelerator_finalize (GalaDBusAccelerator* obj);
static void _dbus_gala_dbus_accelerator_grab_accelerator (GalaDBusAccelerator* self, GVariant* _parameters_, GDBusMethodInvocation* invocation);
static void _vala_GalaAccelerator_array_free (GalaAccelerator* array, gint array_length);
static void _dbus_gala_dbus_accelerator_grab_accelerators (GalaDBusAccelerator* self, GVariant* _parameters_, GDBusMethodInvocation* invocation);
static void _dbus_gala_dbus_accelerator_ungrab_accelerator (GalaDBusAccelerator* self, GVariant* _parameters_, GDBusMethodInvocation* invocation);
static void _dbus_gala_dbus_accelerator_show_osd (GalaDBusAccelerator* self, GVariant* _parameters_, GDBusMethodInvocation* invocation);
static void gala_dbus_accelerator_dbus_interface_method_call (GDBusConnection* connection, const gchar* sender, const gchar* object_path, const gchar* interface_name, const gchar* method_name, GVariant* parameters, GDBusMethodInvocation* invocation, gpointer user_data);
static GVariant* gala_dbus_accelerator_dbus_interface_get_property (GDBusConnection* connection, const gchar* sender, const gchar* object_path, const gchar* interface_name, const gchar* property_name, GError** error, gpointer user_data);
static gboolean gala_dbus_accelerator_dbus_interface_set_property (GDBusConnection* connection, const gchar* sender, const gchar* object_path, const gchar* interface_name, const gchar* property_name, GVariant* value, GError** error, gpointer user_data);
static void _dbus_gala_dbus_accelerator_accelerator_activated (GObject* _sender, guint action, guint device_id, guint timestamp, gpointer* _data);
static void _gala_dbus_accelerator_unregister_object (gpointer user_data);

static const GDBusArgInfo _gala_dbus_accelerator_dbus_arg_info_grab_accelerator_accelerator = {-1, "accelerator", "s"};
static const GDBusArgInfo _gala_dbus_accelerator_dbus_arg_info_grab_accelerator_flags = {-1, "flags", "u"};
static const GDBusArgInfo _gala_dbus_accelerator_dbus_arg_info_grab_accelerator_result = {-1, "result", "u"};
static const GDBusArgInfo * const _gala_dbus_accelerator_dbus_arg_info_grab_accelerator_in[] = {&_gala_dbus_accelerator_dbus_arg_info_grab_accelerator_accelerator, &_gala_dbus_accelerator_dbus_arg_info_grab_accelerator_flags, NULL};
static const GDBusArgInfo * const _gala_dbus_accelerator_dbus_arg_info_grab_accelerator_out[] = {&_gala_dbus_accelerator_dbus_arg_info_grab_accelerator_result, NULL};
static const GDBusMethodInfo _gala_dbus_accelerator_dbus_method_info_grab_accelerator = {-1, "GrabAccelerator", (GDBusArgInfo **) (&_gala_dbus_accelerator_dbus_arg_info_grab_accelerator_in), (GDBusArgInfo **) (&_gala_dbus_accelerator_dbus_arg_info_grab_accelerator_out)};
static const GDBusArgInfo _gala_dbus_accelerator_dbus_arg_info_grab_accelerators_accelerators = {-1, "accelerators", "a(su)"};
static const GDBusArgInfo _gala_dbus_accelerator_dbus_arg_info_grab_accelerators_result = {-1, "result", "au"};
static const GDBusArgInfo * const _gala_dbus_accelerator_dbus_arg_info_grab_accelerators_in[] = {&_gala_dbus_accelerator_dbus_arg_info_grab_accelerators_accelerators, NULL};
static const GDBusArgInfo * const _gala_dbus_accelerator_dbus_arg_info_grab_accelerators_out[] = {&_gala_dbus_accelerator_dbus_arg_info_grab_accelerators_result, NULL};
static const GDBusMethodInfo _gala_dbus_accelerator_dbus_method_info_grab_accelerators = {-1, "GrabAccelerators", (GDBusArgInfo **) (&_gala_dbus_accelerator_dbus_arg_info_grab_accelerators_in), (GDBusArgInfo **) (&_gala_dbus_accelerator_dbus_arg_info_grab_accelerators_out)};
static const GDBusArgInfo _gala_dbus_accelerator_dbus_arg_info_ungrab_accelerator_action = {-1, "action", "u"};
static const GDBusArgInfo _gala_dbus_accelerator_dbus_arg_info_ungrab_accelerator_result = {-1, "result", "b"};
static const GDBusArgInfo * const _gala_dbus_accelerator_dbus_arg_info_ungrab_accelerator_in[] = {&_gala_dbus_accelerator_dbus_arg_info_ungrab_accelerator_action, NULL};
static const GDBusArgInfo * const _gala_dbus_accelerator_dbus_arg_info_ungrab_accelerator_out[] = {&_gala_dbus_accelerator_dbus_arg_info_ungrab_accelerator_result, NULL};
static const GDBusMethodInfo _gala_dbus_accelerator_dbus_method_info_ungrab_accelerator = {-1, "UngrabAccelerator", (GDBusArgInfo **) (&_gala_dbus_accelerator_dbus_arg_info_ungrab_accelerator_in), (GDBusArgInfo **) (&_gala_dbus_accelerator_dbus_arg_info_ungrab_accelerator_out)};
static const GDBusArgInfo _gala_dbus_accelerator_dbus_arg_info_show_osd_parameters = {-1, "parameters", "a{sv}"};
static const GDBusArgInfo * const _gala_dbus_accelerator_dbus_arg_info_show_osd_in[] = {&_gala_dbus_accelerator_dbus_arg_info_show_osd_parameters, NULL};
static const GDBusArgInfo * const _gala_dbus_accelerator_dbus_arg_info_show_osd_out[] = {NULL};
static const GDBusMethodInfo _gala_dbus_accelerator_dbus_method_info_show_osd = {-1, "ShowOSD", (GDBusArgInfo **) (&_gala_dbus_accelerator_dbus_arg_info_show_osd_in), (GDBusArgInfo **) (&_gala_dbus_accelerator_dbus_arg_info_show_osd_out)};
static const GDBusMethodInfo * const _gala_dbus_accelerator_dbus_method_info[] = {&_gala_dbus_accelerator_dbus_method_info_grab_accelerator, &_gala_dbus_accelerator_dbus_method_info_grab_accelerators, &_gala_dbus_accelerator_dbus_method_info_ungrab_accelerator, &_gala_dbus_accelerator_dbus_method_info_show_osd, NULL};
static const GDBusArgInfo _gala_dbus_accelerator_dbus_arg_info_accelerator_activated_action = {-1, "action", "u"};
static const GDBusArgInfo _gala_dbus_accelerator_dbus_arg_info_accelerator_activated_device_id = {-1, "device_id", "u"};
static const GDBusArgInfo _gala_dbus_accelerator_dbus_arg_info_accelerator_activated_timestamp = {-1, "timestamp", "u"};
static const GDBusArgInfo * const _gala_dbus_accelerator_dbus_arg_info_accelerator_activated[] = {&_gala_dbus_accelerator_dbus_arg_info_accelerator_activated_action, &_gala_dbus_accelerator_dbus_arg_info_accelerator_activated_device_id, &_gala_dbus_accelerator_dbus_arg_info_accelerator_activated_timestamp, NULL};
static const GDBusSignalInfo _gala_dbus_accelerator_dbus_signal_info_accelerator_activated = {-1, "AcceleratorActivated", (GDBusArgInfo **) (&_gala_dbus_accelerator_dbus_arg_info_accelerator_activated)};
static const GDBusSignalInfo * const _gala_dbus_accelerator_dbus_signal_info[] = {&_gala_dbus_accelerator_dbus_signal_info_accelerator_activated, NULL};
static const GDBusPropertyInfo * const _gala_dbus_accelerator_dbus_property_info[] = {NULL};
static const GDBusInterfaceInfo _gala_dbus_accelerator_dbus_interface_info = {-1, "org.gnome.Shell", (GDBusMethodInfo **) (&_gala_dbus_accelerator_dbus_method_info), (GDBusSignalInfo **) (&_gala_dbus_accelerator_dbus_signal_info), (GDBusPropertyInfo **) (&_gala_dbus_accelerator_dbus_property_info)};
static const GDBusInterfaceVTable _gala_dbus_accelerator_dbus_interface_vtable = {gala_dbus_accelerator_dbus_interface_method_call, gala_dbus_accelerator_dbus_interface_get_property, gala_dbus_accelerator_dbus_interface_set_property};

void gala_accelerator_copy (const GalaAccelerator* self, GalaAccelerator* dest) {
	const gchar* _tmp0_ = NULL;
	gchar* _tmp1_ = NULL;
	guint _tmp2_ = 0U;
#line 20 "/home/nick/work/Enso-OS/galal/src/DBusAccelerator.vala"
	_tmp0_ = (*self).name;
#line 20 "/home/nick/work/Enso-OS/galal/src/DBusAccelerator.vala"
	_tmp1_ = g_strdup (_tmp0_);
#line 20 "/home/nick/work/Enso-OS/galal/src/DBusAccelerator.vala"
	_g_free0 ((*dest).name);
#line 20 "/home/nick/work/Enso-OS/galal/src/DBusAccelerator.vala"
	(*dest).name = _tmp1_;
#line 20 "/home/nick/work/Enso-OS/galal/src/DBusAccelerator.vala"
	_tmp2_ = (*self).flags;
#line 20 "/home/nick/work/Enso-OS/galal/src/DBusAccelerator.vala"
	(*dest).flags = _tmp2_;
#line 175 "DBusAccelerator.c"
}


void gala_accelerator_destroy (GalaAccelerator* self) {
#line 22 "/home/nick/work/Enso-OS/galal/src/DBusAccelerator.vala"
	_g_free0 ((*self).name);
#line 182 "DBusAccelerator.c"
}


GalaAccelerator* gala_accelerator_dup (const GalaAccelerator* self) {
	GalaAccelerator* dup;
#line 20 "/home/nick/work/Enso-OS/galal/src/DBusAccelerator.vala"
	dup = g_new0 (GalaAccelerator, 1);
#line 20 "/home/nick/work/Enso-OS/galal/src/DBusAccelerator.vala"
	gala_accelerator_copy (self, dup);
#line 20 "/home/nick/work/Enso-OS/galal/src/DBusAccelerator.vala"
	return dup;
#line 194 "DBusAccelerator.c"
}


void gala_accelerator_free (GalaAccelerator* self) {
#line 20 "/home/nick/work/Enso-OS/galal/src/DBusAccelerator.vala"
	gala_accelerator_destroy (self);
#line 20 "/home/nick/work/Enso-OS/galal/src/DBusAccelerator.vala"
	g_free (self);
#line 203 "DBusAccelerator.c"
}


GType gala_accelerator_get_type (void) {
	static volatile gsize gala_accelerator_type_id__volatile = 0;
	if (g_once_init_enter (&gala_accelerator_type_id__volatile)) {
		GType gala_accelerator_type_id;
		gala_accelerator_type_id = g_boxed_type_register_static ("GalaAccelerator", (GBoxedCopyFunc) gala_accelerator_dup, (GBoxedFreeFunc) gala_accelerator_free);
		g_once_init_leave (&gala_accelerator_type_id__volatile, gala_accelerator_type_id);
	}
	return gala_accelerator_type_id__volatile;
}


GalaDBusAccelerator* gala_dbus_accelerator_init (GalaWindowManager* wm) {
	GalaDBusAccelerator* result = NULL;
	GalaDBusAccelerator* _tmp0_ = NULL;
	GalaDBusAccelerator* _tmp3_ = NULL;
#line 32 "/home/nick/work/Enso-OS/galal/src/DBusAccelerator.vala"
	g_return_val_if_fail (wm != NULL, NULL);
#line 34 "/home/nick/work/Enso-OS/galal/src/DBusAccelerator.vala"
	_tmp0_ = gala_dbus_accelerator_instance;
#line 34 "/home/nick/work/Enso-OS/galal/src/DBusAccelerator.vala"
	if (_tmp0_ == NULL) {
#line 228 "DBusAccelerator.c"
		GalaWindowManager* _tmp1_ = NULL;
		GalaDBusAccelerator* _tmp2_ = NULL;
#line 35 "/home/nick/work/Enso-OS/galal/src/DBusAccelerator.vala"
		_tmp1_ = wm;
#line 35 "/home/nick/work/Enso-OS/galal/src/DBusAccelerator.vala"
		_tmp2_ = gala_dbus_accelerator_new (_tmp1_);
#line 35 "/home/nick/work/Enso-OS/galal/src/DBusAccelerator.vala"
		_gala_dbus_accelerator_unref0 (gala_dbus_accelerator_instance);
#line 35 "/home/nick/work/Enso-OS/galal/src/DBusAccelerator.vala"
		gala_dbus_accelerator_instance = _tmp2_;
#line 239 "DBusAccelerator.c"
	}
#line 37 "/home/nick/work/Enso-OS/galal/src/DBusAccelerator.vala"
	_tmp3_ = gala_dbus_accelerator_instance;
#line 37 "/home/nick/work/Enso-OS/galal/src/DBusAccelerator.vala"
	result = _tmp3_;
#line 37 "/home/nick/work/Enso-OS/galal/src/DBusAccelerator.vala"
	return result;
#line 247 "DBusAccelerator.c"
}


static gpointer _g_object_ref0 (gpointer self) {
#line 51 "/home/nick/work/Enso-OS/galal/src/DBusAccelerator.vala"
	return self ? g_object_ref (self) : NULL;
#line 254 "DBusAccelerator.c"
}


static void _g_free0_ (gpointer var) {
#line 52 "/home/nick/work/Enso-OS/galal/src/DBusAccelerator.vala"
	var = (g_free (var), NULL);
#line 261 "DBusAccelerator.c"
}


static void _gala_dbus_accelerator_on_accelerator_activated_meta_display_accelerator_activated (MetaDisplay* _sender, guint object, guint p0, guint p1, gpointer self) {
#line 54 "/home/nick/work/Enso-OS/galal/src/DBusAccelerator.vala"
	gala_dbus_accelerator_on_accelerator_activated ((GalaDBusAccelerator*) self, object, p0, p1);
#line 268 "DBusAccelerator.c"
}


static GalaDBusAccelerator* gala_dbus_accelerator_construct (GType object_type, GalaWindowManager* _wm) {
	GalaDBusAccelerator* self = NULL;
	GalaWindowManager* _tmp0_ = NULL;
	GalaWindowManager* _tmp1_ = NULL;
	GHashFunc _tmp2_ = NULL;
	GEqualFunc _tmp3_ = NULL;
	GHashTable* _tmp4_ = NULL;
	GalaWindowManager* _tmp5_ = NULL;
	MetaScreen* _tmp6_ = NULL;
	MetaDisplay* _tmp7_ = NULL;
#line 49 "/home/nick/work/Enso-OS/galal/src/DBusAccelerator.vala"
	g_return_val_if_fail (_wm != NULL, NULL);
#line 49 "/home/nick/work/Enso-OS/galal/src/DBusAccelerator.vala"
	self = (GalaDBusAccelerator*) g_type_create_instance (object_type);
#line 51 "/home/nick/work/Enso-OS/galal/src/DBusAccelerator.vala"
	_tmp0_ = _wm;
#line 51 "/home/nick/work/Enso-OS/galal/src/DBusAccelerator.vala"
	_tmp1_ = _g_object_ref0 (_tmp0_);
#line 51 "/home/nick/work/Enso-OS/galal/src/DBusAccelerator.vala"
	_g_object_unref0 (self->priv->wm);
#line 51 "/home/nick/work/Enso-OS/galal/src/DBusAccelerator.vala"
	self->priv->wm = _tmp1_;
#line 52 "/home/nick/work/Enso-OS/galal/src/DBusAccelerator.vala"
	_tmp2_ = g_str_hash;
#line 52 "/home/nick/work/Enso-OS/galal/src/DBusAccelerator.vala"
	_tmp3_ = g_str_equal;
#line 52 "/home/nick/work/Enso-OS/galal/src/DBusAccelerator.vala"
	_tmp4_ = g_hash_table_new_full (_tmp2_, _tmp3_, _g_free0_, NULL);
#line 52 "/home/nick/work/Enso-OS/galal/src/DBusAccelerator.vala"
	_g_hash_table_unref0 (self->priv->grabbed_accelerators);
#line 52 "/home/nick/work/Enso-OS/galal/src/DBusAccelerator.vala"
	self->priv->grabbed_accelerators = _tmp4_;
#line 54 "/home/nick/work/Enso-OS/galal/src/DBusAccelerator.vala"
	_tmp5_ = self->priv->wm;
#line 54 "/home/nick/work/Enso-OS/galal/src/DBusAccelerator.vala"
	_tmp6_ = meta_plugin_get_screen ((MetaPlugin*) _tmp5_);
#line 54 "/home/nick/work/Enso-OS/galal/src/DBusAccelerator.vala"
	_tmp7_ = meta_screen_get_display (_tmp6_);
#line 54 "/home/nick/work/Enso-OS/galal/src/DBusAccelerator.vala"
	g_signal_connect (_tmp7_, "accelerator-activated", (GCallback) _gala_dbus_accelerator_on_accelerator_activated_meta_display_accelerator_activated, self);
#line 49 "/home/nick/work/Enso-OS/galal/src/DBusAccelerator.vala"
	return self;
#line 314 "DBusAccelerator.c"
}


static GalaDBusAccelerator* gala_dbus_accelerator_new (GalaWindowManager* _wm) {
#line 49 "/home/nick/work/Enso-OS/galal/src/DBusAccelerator.vala"
	return gala_dbus_accelerator_construct (GALA_TYPE_DBUS_ACCELERATOR, _wm);
#line 321 "DBusAccelerator.c"
}


static gboolean _uint_equal (const guint* s1, const guint* s2) {
#line 60 "/home/nick/work/Enso-OS/galal/src/DBusAccelerator.vala"
	if (s1 == s2) {
#line 60 "/home/nick/work/Enso-OS/galal/src/DBusAccelerator.vala"
		return TRUE;
#line 330 "DBusAccelerator.c"
	}
#line 60 "/home/nick/work/Enso-OS/galal/src/DBusAccelerator.vala"
	if (s1 == NULL) {
#line 60 "/home/nick/work/Enso-OS/galal/src/DBusAccelerator.vala"
		return FALSE;
#line 336 "DBusAccelerator.c"
	}
#line 60 "/home/nick/work/Enso-OS/galal/src/DBusAccelerator.vala"
	if (s2 == NULL) {
#line 60 "/home/nick/work/Enso-OS/galal/src/DBusAccelerator.vala"
		return FALSE;
#line 342 "DBusAccelerator.c"
	}
#line 60 "/home/nick/work/Enso-OS/galal/src/DBusAccelerator.vala"
	return (*s1) == (*s2);
#line 346 "DBusAccelerator.c"
}


static void gala_dbus_accelerator_on_accelerator_activated (GalaDBusAccelerator* self, guint action, guint device_id, guint timestamp) {
	GHashTable* _tmp0_ = NULL;
	GList* _tmp1_ = NULL;
#line 57 "/home/nick/work/Enso-OS/galal/src/DBusAccelerator.vala"
	g_return_if_fail (self != NULL);
#line 59 "/home/nick/work/Enso-OS/galal/src/DBusAccelerator.vala"
	_tmp0_ = self->priv->grabbed_accelerators;
#line 59 "/home/nick/work/Enso-OS/galal/src/DBusAccelerator.vala"
	_tmp1_ = g_hash_table_get_keys (_tmp0_);
#line 359 "DBusAccelerator.c"
	{
		GList* accelerator_collection = NULL;
		GList* accelerator_it = NULL;
#line 59 "/home/nick/work/Enso-OS/galal/src/DBusAccelerator.vala"
		accelerator_collection = _tmp1_;
#line 59 "/home/nick/work/Enso-OS/galal/src/DBusAccelerator.vala"
		for (accelerator_it = accelerator_collection; accelerator_it != NULL; accelerator_it = accelerator_it->next) {
#line 367 "DBusAccelerator.c"
			gchar* _tmp2_ = NULL;
			gchar* accelerator = NULL;
#line 59 "/home/nick/work/Enso-OS/galal/src/DBusAccelerator.vala"
			_tmp2_ = g_strdup ((const gchar*) accelerator_it->data);
#line 59 "/home/nick/work/Enso-OS/galal/src/DBusAccelerator.vala"
			accelerator = _tmp2_;
#line 374 "DBusAccelerator.c"
			{
				GHashTable* _tmp3_ = NULL;
				const gchar* _tmp4_ = NULL;
				gconstpointer _tmp5_ = NULL;
				guint _tmp6_ = 0U;
#line 60 "/home/nick/work/Enso-OS/galal/src/DBusAccelerator.vala"
				_tmp3_ = self->priv->grabbed_accelerators;
#line 60 "/home/nick/work/Enso-OS/galal/src/DBusAccelerator.vala"
				_tmp4_ = accelerator;
#line 60 "/home/nick/work/Enso-OS/galal/src/DBusAccelerator.vala"
				_tmp5_ = g_hash_table_lookup (_tmp3_, _tmp4_);
#line 60 "/home/nick/work/Enso-OS/galal/src/DBusAccelerator.vala"
				_tmp6_ = action;
#line 60 "/home/nick/work/Enso-OS/galal/src/DBusAccelerator.vala"
				if (_uint_equal ((guint*) _tmp5_, &_tmp6_) == TRUE) {
#line 390 "DBusAccelerator.c"
					guint _tmp7_ = 0U;
					guint _tmp8_ = 0U;
					guint _tmp9_ = 0U;
#line 68 "/home/nick/work/Enso-OS/galal/src/DBusAccelerator.vala"
					_tmp7_ = action;
#line 68 "/home/nick/work/Enso-OS/galal/src/DBusAccelerator.vala"
					_tmp8_ = device_id;
#line 68 "/home/nick/work/Enso-OS/galal/src/DBusAccelerator.vala"
					_tmp9_ = timestamp;
#line 68 "/home/nick/work/Enso-OS/galal/src/DBusAccelerator.vala"
					g_signal_emit_by_name (self, "accelerator-activated", _tmp7_, _tmp8_, _tmp9_);
#line 402 "DBusAccelerator.c"
				}
#line 59 "/home/nick/work/Enso-OS/galal/src/DBusAccelerator.vala"
				_g_free0 (accelerator);
#line 406 "DBusAccelerator.c"
			}
		}
#line 59 "/home/nick/work/Enso-OS/galal/src/DBusAccelerator.vala"
		_g_list_free0 (accelerator_collection);
#line 411 "DBusAccelerator.c"
	}
}


static guint* _uint_dup (guint* self) {
	guint* dup;
#line 76 "/home/nick/work/Enso-OS/galal/src/DBusAccelerator.vala"
	dup = g_new0 (guint, 1);
#line 76 "/home/nick/work/Enso-OS/galal/src/DBusAccelerator.vala"
	memcpy (dup, self, sizeof (guint));
#line 76 "/home/nick/work/Enso-OS/galal/src/DBusAccelerator.vala"
	return dup;
#line 424 "DBusAccelerator.c"
}


static gpointer __uint_dup0 (gpointer self) {
#line 76 "/home/nick/work/Enso-OS/galal/src/DBusAccelerator.vala"
	return self ? _uint_dup (self) : NULL;
#line 431 "DBusAccelerator.c"
}


guint gala_dbus_accelerator_grab_accelerator (GalaDBusAccelerator* self, const gchar* accelerator, guint flags) {
	guint result = 0U;
	guint* action = NULL;
	GHashTable* _tmp0_ = NULL;
	const gchar* _tmp1_ = NULL;
	gconstpointer _tmp2_ = NULL;
	guint* _tmp3_ = NULL;
	guint* _tmp4_ = NULL;
	guint* _tmp17_ = NULL;
	guint _tmp18_ = 0U;
#line 74 "/home/nick/work/Enso-OS/galal/src/DBusAccelerator.vala"
	g_return_val_if_fail (self != NULL, 0U);
#line 74 "/home/nick/work/Enso-OS/galal/src/DBusAccelerator.vala"
	g_return_val_if_fail (accelerator != NULL, 0U);
#line 76 "/home/nick/work/Enso-OS/galal/src/DBusAccelerator.vala"
	_tmp0_ = self->priv->grabbed_accelerators;
#line 76 "/home/nick/work/Enso-OS/galal/src/DBusAccelerator.vala"
	_tmp1_ = accelerator;
#line 76 "/home/nick/work/Enso-OS/galal/src/DBusAccelerator.vala"
	_tmp2_ = g_hash_table_lookup (_tmp0_, _tmp1_);
#line 76 "/home/nick/work/Enso-OS/galal/src/DBusAccelerator.vala"
	_tmp3_ = __uint_dup0 ((guint*) _tmp2_);
#line 76 "/home/nick/work/Enso-OS/galal/src/DBusAccelerator.vala"
	action = _tmp3_;
#line 78 "/home/nick/work/Enso-OS/galal/src/DBusAccelerator.vala"
	_tmp4_ = action;
#line 78 "/home/nick/work/Enso-OS/galal/src/DBusAccelerator.vala"
	if (_tmp4_ == NULL) {
#line 463 "DBusAccelerator.c"
		GalaWindowManager* _tmp5_ = NULL;
		MetaScreen* _tmp6_ = NULL;
		MetaDisplay* _tmp7_ = NULL;
		const gchar* _tmp8_ = NULL;
		guint _tmp9_ = 0U;
		guint* _tmp10_ = NULL;
		guint* _tmp11_ = NULL;
#line 79 "/home/nick/work/Enso-OS/galal/src/DBusAccelerator.vala"
		_tmp5_ = self->priv->wm;
#line 79 "/home/nick/work/Enso-OS/galal/src/DBusAccelerator.vala"
		_tmp6_ = meta_plugin_get_screen ((MetaPlugin*) _tmp5_);
#line 79 "/home/nick/work/Enso-OS/galal/src/DBusAccelerator.vala"
		_tmp7_ = meta_screen_get_display (_tmp6_);
#line 79 "/home/nick/work/Enso-OS/galal/src/DBusAccelerator.vala"
		_tmp8_ = accelerator;
#line 79 "/home/nick/work/Enso-OS/galal/src/DBusAccelerator.vala"
		_tmp9_ = meta_display_grab_accelerator (_tmp7_, _tmp8_);
#line 79 "/home/nick/work/Enso-OS/galal/src/DBusAccelerator.vala"
		_tmp10_ = __uint_dup0 (&_tmp9_);
#line 79 "/home/nick/work/Enso-OS/galal/src/DBusAccelerator.vala"
		_g_free0 (action);
#line 79 "/home/nick/work/Enso-OS/galal/src/DBusAccelerator.vala"
		action = _tmp10_;
#line 80 "/home/nick/work/Enso-OS/galal/src/DBusAccelerator.vala"
		_tmp11_ = action;
#line 80 "/home/nick/work/Enso-OS/galal/src/DBusAccelerator.vala"
		if ((*_tmp11_) > ((guint) 0)) {
#line 491 "DBusAccelerator.c"
			GHashTable* _tmp12_ = NULL;
			const gchar* _tmp13_ = NULL;
			gchar* _tmp14_ = NULL;
			guint* _tmp15_ = NULL;
			guint* _tmp16_ = NULL;
#line 81 "/home/nick/work/Enso-OS/galal/src/DBusAccelerator.vala"
			_tmp12_ = self->priv->grabbed_accelerators;
#line 81 "/home/nick/work/Enso-OS/galal/src/DBusAccelerator.vala"
			_tmp13_ = accelerator;
#line 81 "/home/nick/work/Enso-OS/galal/src/DBusAccelerator.vala"
			_tmp14_ = g_strdup (_tmp13_);
#line 81 "/home/nick/work/Enso-OS/galal/src/DBusAccelerator.vala"
			_tmp15_ = action;
#line 81 "/home/nick/work/Enso-OS/galal/src/DBusAccelerator.vala"
			_tmp16_ = __uint_dup0 (_tmp15_);
#line 81 "/home/nick/work/Enso-OS/galal/src/DBusAccelerator.vala"
			g_hash_table_insert (_tmp12_, _tmp14_, _tmp16_);
#line 509 "DBusAccelerator.c"
		}
	}
#line 85 "/home/nick/work/Enso-OS/galal/src/DBusAccelerator.vala"
	_tmp17_ = action;
#line 85 "/home/nick/work/Enso-OS/galal/src/DBusAccelerator.vala"
	_tmp18_ = *_tmp17_;
#line 85 "/home/nick/work/Enso-OS/galal/src/DBusAccelerator.vala"
	_g_free0 (_tmp17_);
#line 85 "/home/nick/work/Enso-OS/galal/src/DBusAccelerator.vala"
	result = _tmp18_;
#line 85 "/home/nick/work/Enso-OS/galal/src/DBusAccelerator.vala"
	return result;
#line 522 "DBusAccelerator.c"
}


static void _vala_array_add1 (guint** array, int* length, int* size, guint value) {
#line 93 "/home/nick/work/Enso-OS/galal/src/DBusAccelerator.vala"
	if ((*length) == (*size)) {
#line 93 "/home/nick/work/Enso-OS/galal/src/DBusAccelerator.vala"
		*size = (*size) ? (2 * (*size)) : 4;
#line 93 "/home/nick/work/Enso-OS/galal/src/DBusAccelerator.vala"
		*array = g_renew (guint, *array, *size);
#line 533 "DBusAccelerator.c"
	}
#line 93 "/home/nick/work/Enso-OS/galal/src/DBusAccelerator.vala"
	(*array)[(*length)++] = value;
#line 537 "DBusAccelerator.c"
}


guint* gala_dbus_accelerator_grab_accelerators (GalaDBusAccelerator* self, GalaAccelerator* accelerators, int accelerators_length1, int* result_length1) {
	guint* result = NULL;
	guint* actions = NULL;
	guint* _tmp0_ = NULL;
	gint actions_length1 = 0;
	gint _actions_size_ = 0;
	GalaAccelerator* _tmp1_ = NULL;
	gint _tmp1__length1 = 0;
	guint* _tmp8_ = NULL;
	gint _tmp8__length1 = 0;
#line 88 "/home/nick/work/Enso-OS/galal/src/DBusAccelerator.vala"
	g_return_val_if_fail (self != NULL, NULL);
#line 90 "/home/nick/work/Enso-OS/galal/src/DBusAccelerator.vala"
	_tmp0_ = g_new0 (guint, 0);
#line 90 "/home/nick/work/Enso-OS/galal/src/DBusAccelerator.vala"
	actions = _tmp0_;
#line 90 "/home/nick/work/Enso-OS/galal/src/DBusAccelerator.vala"
	actions_length1 = 0;
#line 90 "/home/nick/work/Enso-OS/galal/src/DBusAccelerator.vala"
	_actions_size_ = actions_length1;
#line 92 "/home/nick/work/Enso-OS/galal/src/DBusAccelerator.vala"
	_tmp1_ = accelerators;
#line 92 "/home/nick/work/Enso-OS/galal/src/DBusAccelerator.vala"
	_tmp1__length1 = accelerators_length1;
#line 565 "DBusAccelerator.c"
	{
		GalaAccelerator* accelerator_collection = NULL;
		gint accelerator_collection_length1 = 0;
		gint _accelerator_collection_size_ = 0;
		gint accelerator_it = 0;
#line 92 "/home/nick/work/Enso-OS/galal/src/DBusAccelerator.vala"
		accelerator_collection = _tmp1_;
#line 92 "/home/nick/work/Enso-OS/galal/src/DBusAccelerator.vala"
		accelerator_collection_length1 = _tmp1__length1;
#line 92 "/home/nick/work/Enso-OS/galal/src/DBusAccelerator.vala"
		for (accelerator_it = 0; accelerator_it < _tmp1__length1; accelerator_it = accelerator_it + 1) {
#line 577 "DBusAccelerator.c"
			GalaAccelerator* accelerator = NULL;
#line 92 "/home/nick/work/Enso-OS/galal/src/DBusAccelerator.vala"
			accelerator = &accelerator_collection[accelerator_it];
#line 581 "DBusAccelerator.c"
			{
				guint* _tmp2_ = NULL;
				gint _tmp2__length1 = 0;
				GalaAccelerator* _tmp3_ = NULL;
				const gchar* _tmp4_ = NULL;
				GalaAccelerator* _tmp5_ = NULL;
				guint _tmp6_ = 0U;
				guint _tmp7_ = 0U;
#line 93 "/home/nick/work/Enso-OS/galal/src/DBusAccelerator.vala"
				_tmp2_ = actions;
#line 93 "/home/nick/work/Enso-OS/galal/src/DBusAccelerator.vala"
				_tmp2__length1 = actions_length1;
#line 93 "/home/nick/work/Enso-OS/galal/src/DBusAccelerator.vala"
				_tmp3_ = accelerator;
#line 93 "/home/nick/work/Enso-OS/galal/src/DBusAccelerator.vala"
				_tmp4_ = (*_tmp3_).name;
#line 93 "/home/nick/work/Enso-OS/galal/src/DBusAccelerator.vala"
				_tmp5_ = accelerator;
#line 93 "/home/nick/work/Enso-OS/galal/src/DBusAccelerator.vala"
				_tmp6_ = (*_tmp5_).flags;
#line 93 "/home/nick/work/Enso-OS/galal/src/DBusAccelerator.vala"
				_tmp7_ = gala_dbus_accelerator_grab_accelerator (self, _tmp4_, _tmp6_);
#line 93 "/home/nick/work/Enso-OS/galal/src/DBusAccelerator.vala"
				_vala_array_add1 (&actions, &actions_length1, &_actions_size_, _tmp7_);
#line 606 "DBusAccelerator.c"
			}
		}
	}
#line 96 "/home/nick/work/Enso-OS/galal/src/DBusAccelerator.vala"
	_tmp8_ = actions;
#line 96 "/home/nick/work/Enso-OS/galal/src/DBusAccelerator.vala"
	_tmp8__length1 = actions_length1;
#line 96 "/home/nick/work/Enso-OS/galal/src/DBusAccelerator.vala"
	if (result_length1) {
#line 96 "/home/nick/work/Enso-OS/galal/src/DBusAccelerator.vala"
		*result_length1 = _tmp8__length1;
#line 618 "DBusAccelerator.c"
	}
#line 96 "/home/nick/work/Enso-OS/galal/src/DBusAccelerator.vala"
	result = _tmp8_;
#line 96 "/home/nick/work/Enso-OS/galal/src/DBusAccelerator.vala"
	return result;
#line 624 "DBusAccelerator.c"
}


gboolean gala_dbus_accelerator_ungrab_accelerator (GalaDBusAccelerator* self, guint action) {
	gboolean result = FALSE;
	gboolean ret = FALSE;
	GHashTable* _tmp0_ = NULL;
	GList* _tmp1_ = NULL;
#line 99 "/home/nick/work/Enso-OS/galal/src/DBusAccelerator.vala"
	g_return_val_if_fail (self != NULL, FALSE);
#line 101 "/home/nick/work/Enso-OS/galal/src/DBusAccelerator.vala"
	ret = FALSE;
#line 103 "/home/nick/work/Enso-OS/galal/src/DBusAccelerator.vala"
	_tmp0_ = self->priv->grabbed_accelerators;
#line 103 "/home/nick/work/Enso-OS/galal/src/DBusAccelerator.vala"
	_tmp1_ = g_hash_table_get_keys (_tmp0_);
#line 641 "DBusAccelerator.c"
	{
		GList* accelerator_collection = NULL;
		GList* accelerator_it = NULL;
#line 103 "/home/nick/work/Enso-OS/galal/src/DBusAccelerator.vala"
		accelerator_collection = _tmp1_;
#line 103 "/home/nick/work/Enso-OS/galal/src/DBusAccelerator.vala"
		for (accelerator_it = accelerator_collection; accelerator_it != NULL; accelerator_it = accelerator_it->next) {
#line 649 "DBusAccelerator.c"
			const gchar* accelerator = NULL;
#line 103 "/home/nick/work/Enso-OS/galal/src/DBusAccelerator.vala"
			accelerator = (const gchar*) accelerator_it->data;
#line 653 "DBusAccelerator.c"
			{
				GHashTable* _tmp2_ = NULL;
				const gchar* _tmp3_ = NULL;
				gconstpointer _tmp4_ = NULL;
				guint _tmp5_ = 0U;
#line 104 "/home/nick/work/Enso-OS/galal/src/DBusAccelerator.vala"
				_tmp2_ = self->priv->grabbed_accelerators;
#line 104 "/home/nick/work/Enso-OS/galal/src/DBusAccelerator.vala"
				_tmp3_ = accelerator;
#line 104 "/home/nick/work/Enso-OS/galal/src/DBusAccelerator.vala"
				_tmp4_ = g_hash_table_lookup (_tmp2_, _tmp3_);
#line 104 "/home/nick/work/Enso-OS/galal/src/DBusAccelerator.vala"
				_tmp5_ = action;
#line 104 "/home/nick/work/Enso-OS/galal/src/DBusAccelerator.vala"
				if (_uint_equal ((guint*) _tmp4_, &_tmp5_) == TRUE) {
#line 669 "DBusAccelerator.c"
					GalaWindowManager* _tmp6_ = NULL;
					MetaScreen* _tmp7_ = NULL;
					MetaDisplay* _tmp8_ = NULL;
					guint _tmp9_ = 0U;
					gboolean _tmp10_ = FALSE;
					GHashTable* _tmp11_ = NULL;
					const gchar* _tmp12_ = NULL;
#line 105 "/home/nick/work/Enso-OS/galal/src/DBusAccelerator.vala"
					_tmp6_ = self->priv->wm;
#line 105 "/home/nick/work/Enso-OS/galal/src/DBusAccelerator.vala"
					_tmp7_ = meta_plugin_get_screen ((MetaPlugin*) _tmp6_);
#line 105 "/home/nick/work/Enso-OS/galal/src/DBusAccelerator.vala"
					_tmp8_ = meta_screen_get_display (_tmp7_);
#line 105 "/home/nick/work/Enso-OS/galal/src/DBusAccelerator.vala"
					_tmp9_ = action;
#line 105 "/home/nick/work/Enso-OS/galal/src/DBusAccelerator.vala"
					_tmp10_ = meta_display_ungrab_accelerator (_tmp8_, _tmp9_);
#line 105 "/home/nick/work/Enso-OS/galal/src/DBusAccelerator.vala"
					ret = _tmp10_;
#line 106 "/home/nick/work/Enso-OS/galal/src/DBusAccelerator.vala"
					_tmp11_ = self->priv->grabbed_accelerators;
#line 106 "/home/nick/work/Enso-OS/galal/src/DBusAccelerator.vala"
					_tmp12_ = accelerator;
#line 106 "/home/nick/work/Enso-OS/galal/src/DBusAccelerator.vala"
					g_hash_table_remove (_tmp11_, _tmp12_);
#line 107 "/home/nick/work/Enso-OS/galal/src/DBusAccelerator.vala"
					break;
#line 697 "DBusAccelerator.c"
				}
			}
		}
#line 103 "/home/nick/work/Enso-OS/galal/src/DBusAccelerator.vala"
		_g_list_free0 (accelerator_collection);
#line 703 "DBusAccelerator.c"
	}
#line 111 "/home/nick/work/Enso-OS/galal/src/DBusAccelerator.vala"
	result = ret;
#line 111 "/home/nick/work/Enso-OS/galal/src/DBusAccelerator.vala"
	return result;
#line 709 "DBusAccelerator.c"
}


void gala_dbus_accelerator_show_osd (GalaDBusAccelerator* self, GHashTable* parameters) {
	gint32 monitor_index = 0;
	GHashTable* _tmp0_ = NULL;
	gboolean _tmp1_ = FALSE;
	gchar* icon = NULL;
	gchar* _tmp5_ = NULL;
	GHashTable* _tmp6_ = NULL;
	gboolean _tmp7_ = FALSE;
	gchar* label = NULL;
	gchar* _tmp12_ = NULL;
	GHashTable* _tmp13_ = NULL;
	gboolean _tmp14_ = FALSE;
	gint32 level = 0;
	GHashTable* _tmp19_ = NULL;
	gboolean _tmp20_ = FALSE;
	const gchar* _tmp24_ = NULL;
	gint32 _tmp25_ = 0;
#line 115 "/home/nick/work/Enso-OS/galal/src/DBusAccelerator.vala"
	g_return_if_fail (self != NULL);
#line 115 "/home/nick/work/Enso-OS/galal/src/DBusAccelerator.vala"
	g_return_if_fail (parameters != NULL);
#line 117 "/home/nick/work/Enso-OS/galal/src/DBusAccelerator.vala"
	monitor_index = (gint32) -1;
#line 118 "/home/nick/work/Enso-OS/galal/src/DBusAccelerator.vala"
	_tmp0_ = parameters;
#line 118 "/home/nick/work/Enso-OS/galal/src/DBusAccelerator.vala"
	_tmp1_ = g_hash_table_contains (_tmp0_, "monitor");
#line 118 "/home/nick/work/Enso-OS/galal/src/DBusAccelerator.vala"
	if (_tmp1_) {
#line 742 "DBusAccelerator.c"
		GHashTable* _tmp2_ = NULL;
		gconstpointer _tmp3_ = NULL;
		gint32 _tmp4_ = 0;
#line 119 "/home/nick/work/Enso-OS/galal/src/DBusAccelerator.vala"
		_tmp2_ = parameters;
#line 119 "/home/nick/work/Enso-OS/galal/src/DBusAccelerator.vala"
		_tmp3_ = g_hash_table_lookup (_tmp2_, "monitor");
#line 119 "/home/nick/work/Enso-OS/galal/src/DBusAccelerator.vala"
		_tmp4_ = g_variant_get_int32 ((GVariant*) _tmp3_);
#line 119 "/home/nick/work/Enso-OS/galal/src/DBusAccelerator.vala"
		monitor_index = _tmp4_;
#line 754 "DBusAccelerator.c"
	}
#line 120 "/home/nick/work/Enso-OS/galal/src/DBusAccelerator.vala"
	_tmp5_ = g_strdup ("");
#line 120 "/home/nick/work/Enso-OS/galal/src/DBusAccelerator.vala"
	icon = _tmp5_;
#line 121 "/home/nick/work/Enso-OS/galal/src/DBusAccelerator.vala"
	_tmp6_ = parameters;
#line 121 "/home/nick/work/Enso-OS/galal/src/DBusAccelerator.vala"
	_tmp7_ = g_hash_table_contains (_tmp6_, "icon");
#line 121 "/home/nick/work/Enso-OS/galal/src/DBusAccelerator.vala"
	if (_tmp7_) {
#line 766 "DBusAccelerator.c"
		GHashTable* _tmp8_ = NULL;
		gconstpointer _tmp9_ = NULL;
		const gchar* _tmp10_ = NULL;
		gchar* _tmp11_ = NULL;
#line 122 "/home/nick/work/Enso-OS/galal/src/DBusAccelerator.vala"
		_tmp8_ = parameters;
#line 122 "/home/nick/work/Enso-OS/galal/src/DBusAccelerator.vala"
		_tmp9_ = g_hash_table_lookup (_tmp8_, "icon");
#line 122 "/home/nick/work/Enso-OS/galal/src/DBusAccelerator.vala"
		_tmp10_ = g_variant_get_string ((GVariant*) _tmp9_, NULL);
#line 122 "/home/nick/work/Enso-OS/galal/src/DBusAccelerator.vala"
		_tmp11_ = g_strdup (_tmp10_);
#line 122 "/home/nick/work/Enso-OS/galal/src/DBusAccelerator.vala"
		_g_free0 (icon);
#line 122 "/home/nick/work/Enso-OS/galal/src/DBusAccelerator.vala"
		icon = _tmp11_;
#line 783 "DBusAccelerator.c"
	}
#line 123 "/home/nick/work/Enso-OS/galal/src/DBusAccelerator.vala"
	_tmp12_ = g_strdup ("");
#line 123 "/home/nick/work/Enso-OS/galal/src/DBusAccelerator.vala"
	label = _tmp12_;
#line 124 "/home/nick/work/Enso-OS/galal/src/DBusAccelerator.vala"
	_tmp13_ = parameters;
#line 124 "/home/nick/work/Enso-OS/galal/src/DBusAccelerator.vala"
	_tmp14_ = g_hash_table_contains (_tmp13_, "label");
#line 124 "/home/nick/work/Enso-OS/galal/src/DBusAccelerator.vala"
	if (_tmp14_) {
#line 795 "DBusAccelerator.c"
		GHashTable* _tmp15_ = NULL;
		gconstpointer _tmp16_ = NULL;
		const gchar* _tmp17_ = NULL;
		gchar* _tmp18_ = NULL;
#line 125 "/home/nick/work/Enso-OS/galal/src/DBusAccelerator.vala"
		_tmp15_ = parameters;
#line 125 "/home/nick/work/Enso-OS/galal/src/DBusAccelerator.vala"
		_tmp16_ = g_hash_table_lookup (_tmp15_, "label");
#line 125 "/home/nick/work/Enso-OS/galal/src/DBusAccelerator.vala"
		_tmp17_ = g_variant_get_string ((GVariant*) _tmp16_, NULL);
#line 125 "/home/nick/work/Enso-OS/galal/src/DBusAccelerator.vala"
		_tmp18_ = g_strdup (_tmp17_);
#line 125 "/home/nick/work/Enso-OS/galal/src/DBusAccelerator.vala"
		_g_free0 (label);
#line 125 "/home/nick/work/Enso-OS/galal/src/DBusAccelerator.vala"
		label = _tmp18_;
#line 812 "DBusAccelerator.c"
	}
#line 126 "/home/nick/work/Enso-OS/galal/src/DBusAccelerator.vala"
	level = (gint32) 0;
#line 127 "/home/nick/work/Enso-OS/galal/src/DBusAccelerator.vala"
	_tmp19_ = parameters;
#line 127 "/home/nick/work/Enso-OS/galal/src/DBusAccelerator.vala"
	_tmp20_ = g_hash_table_contains (_tmp19_, "level");
#line 127 "/home/nick/work/Enso-OS/galal/src/DBusAccelerator.vala"
	if (_tmp20_) {
#line 822 "DBusAccelerator.c"
		GHashTable* _tmp21_ = NULL;
		gconstpointer _tmp22_ = NULL;
		gint32 _tmp23_ = 0;
#line 128 "/home/nick/work/Enso-OS/galal/src/DBusAccelerator.vala"
		_tmp21_ = parameters;
#line 128 "/home/nick/work/Enso-OS/galal/src/DBusAccelerator.vala"
		_tmp22_ = g_hash_table_lookup (_tmp21_, "level");
#line 128 "/home/nick/work/Enso-OS/galal/src/DBusAccelerator.vala"
		_tmp23_ = g_variant_get_int32 ((GVariant*) _tmp22_);
#line 128 "/home/nick/work/Enso-OS/galal/src/DBusAccelerator.vala"
		level = _tmp23_;
#line 834 "DBusAccelerator.c"
	}
#line 133 "/home/nick/work/Enso-OS/galal/src/DBusAccelerator.vala"
	_tmp24_ = icon;
#line 133 "/home/nick/work/Enso-OS/galal/src/DBusAccelerator.vala"
	_tmp25_ = level;
#line 133 "/home/nick/work/Enso-OS/galal/src/DBusAccelerator.vala"
	gala_media_feedback_send (_tmp24_, (gint) _tmp25_);
#line 115 "/home/nick/work/Enso-OS/galal/src/DBusAccelerator.vala"
	_g_free0 (label);
#line 115 "/home/nick/work/Enso-OS/galal/src/DBusAccelerator.vala"
	_g_free0 (icon);
#line 846 "DBusAccelerator.c"
}


static void g_cclosure_user_marshal_VOID__UINT_UINT_UINT (GClosure * closure, GValue * return_value, guint n_param_values, const GValue * param_values, gpointer invocation_hint, gpointer marshal_data) {
	typedef void (*GMarshalFunc_VOID__UINT_UINT_UINT) (gpointer data1, guint arg_1, guint arg_2, guint arg_3, gpointer data2);
	register GMarshalFunc_VOID__UINT_UINT_UINT callback;
	register GCClosure * cc;
	register gpointer data1;
	register gpointer data2;
	cc = (GCClosure *) closure;
#line 27 "/home/nick/work/Enso-OS/galal/src/DBusAccelerator.vala"
	g_return_if_fail (n_param_values == 4);
#line 27 "/home/nick/work/Enso-OS/galal/src/DBusAccelerator.vala"
	if (G_CCLOSURE_SWAP_DATA (closure)) {
#line 27 "/home/nick/work/Enso-OS/galal/src/DBusAccelerator.vala"
		data1 = closure->data;
#line 27 "/home/nick/work/Enso-OS/galal/src/DBusAccelerator.vala"
		data2 = param_values->data[0].v_pointer;
#line 865 "DBusAccelerator.c"
	} else {
#line 27 "/home/nick/work/Enso-OS/galal/src/DBusAccelerator.vala"
		data1 = param_values->data[0].v_pointer;
#line 27 "/home/nick/work/Enso-OS/galal/src/DBusAccelerator.vala"
		data2 = closure->data;
#line 871 "DBusAccelerator.c"
	}
#line 27 "/home/nick/work/Enso-OS/galal/src/DBusAccelerator.vala"
	callback = (GMarshalFunc_VOID__UINT_UINT_UINT) (marshal_data ? marshal_data : cc->callback);
#line 27 "/home/nick/work/Enso-OS/galal/src/DBusAccelerator.vala"
	callback (data1, g_value_get_uint (param_values + 1), g_value_get_uint (param_values + 2), g_value_get_uint (param_values + 3), data2);
#line 877 "DBusAccelerator.c"
}


static void gala_value_dbus_accelerator_init (GValue* value) {
#line 27 "/home/nick/work/Enso-OS/galal/src/DBusAccelerator.vala"
	value->data[0].v_pointer = NULL;
#line 884 "DBusAccelerator.c"
}


static void gala_value_dbus_accelerator_free_value (GValue* value) {
#line 27 "/home/nick/work/Enso-OS/galal/src/DBusAccelerator.vala"
	if (value->data[0].v_pointer) {
#line 27 "/home/nick/work/Enso-OS/galal/src/DBusAccelerator.vala"
		gala_dbus_accelerator_unref (value->data[0].v_pointer);
#line 893 "DBusAccelerator.c"
	}
}


static void gala_value_dbus_accelerator_copy_value (const GValue* src_value, GValue* dest_value) {
#line 27 "/home/nick/work/Enso-OS/galal/src/DBusAccelerator.vala"
	if (src_value->data[0].v_pointer) {
#line 27 "/home/nick/work/Enso-OS/galal/src/DBusAccelerator.vala"
		dest_value->data[0].v_pointer = gala_dbus_accelerator_ref (src_value->data[0].v_pointer);
#line 903 "DBusAccelerator.c"
	} else {
#line 27 "/home/nick/work/Enso-OS/galal/src/DBusAccelerator.vala"
		dest_value->data[0].v_pointer = NULL;
#line 907 "DBusAccelerator.c"
	}
}


static gpointer gala_value_dbus_accelerator_peek_pointer (const GValue* value) {
#line 27 "/home/nick/work/Enso-OS/galal/src/DBusAccelerator.vala"
	return value->data[0].v_pointer;
#line 915 "DBusAccelerator.c"
}


static gchar* gala_value_dbus_accelerator_collect_value (GValue* value, guint n_collect_values, GTypeCValue* collect_values, guint collect_flags) {
#line 27 "/home/nick/work/Enso-OS/galal/src/DBusAccelerator.vala"
	if (collect_values[0].v_pointer) {
#line 922 "DBusAccelerator.c"
		GalaDBusAccelerator* object;
		object = collect_values[0].v_pointer;
#line 27 "/home/nick/work/Enso-OS/galal/src/DBusAccelerator.vala"
		if (object->parent_instance.g_class == NULL) {
#line 27 "/home/nick/work/Enso-OS/galal/src/DBusAccelerator.vala"
			return g_strconcat ("invalid unclassed object pointer for value type `", G_VALUE_TYPE_NAME (value), "'", NULL);
#line 929 "DBusAccelerator.c"
		} else if (!g_value_type_compatible (G_TYPE_FROM_INSTANCE (object), G_VALUE_TYPE (value))) {
#line 27 "/home/nick/work/Enso-OS/galal/src/DBusAccelerator.vala"
			return g_strconcat ("invalid object type `", g_type_name (G_TYPE_FROM_INSTANCE (object)), "' for value type `", G_VALUE_TYPE_NAME (value), "'", NULL);
#line 933 "DBusAccelerator.c"
		}
#line 27 "/home/nick/work/Enso-OS/galal/src/DBusAccelerator.vala"
		value->data[0].v_pointer = gala_dbus_accelerator_ref (object);
#line 937 "DBusAccelerator.c"
	} else {
#line 27 "/home/nick/work/Enso-OS/galal/src/DBusAccelerator.vala"
		value->data[0].v_pointer = NULL;
#line 941 "DBusAccelerator.c"
	}
#line 27 "/home/nick/work/Enso-OS/galal/src/DBusAccelerator.vala"
	return NULL;
#line 945 "DBusAccelerator.c"
}


static gchar* gala_value_dbus_accelerator_lcopy_value (const GValue* value, guint n_collect_values, GTypeCValue* collect_values, guint collect_flags) {
	GalaDBusAccelerator** object_p;
	object_p = collect_values[0].v_pointer;
#line 27 "/home/nick/work/Enso-OS/galal/src/DBusAccelerator.vala"
	if (!object_p) {
#line 27 "/home/nick/work/Enso-OS/galal/src/DBusAccelerator.vala"
		return g_strdup_printf ("value location for `%s' passed as NULL", G_VALUE_TYPE_NAME (value));
#line 956 "DBusAccelerator.c"
	}
#line 27 "/home/nick/work/Enso-OS/galal/src/DBusAccelerator.vala"
	if (!value->data[0].v_pointer) {
#line 27 "/home/nick/work/Enso-OS/galal/src/DBusAccelerator.vala"
		*object_p = NULL;
#line 962 "DBusAccelerator.c"
	} else if (collect_flags & G_VALUE_NOCOPY_CONTENTS) {
#line 27 "/home/nick/work/Enso-OS/galal/src/DBusAccelerator.vala"
		*object_p = value->data[0].v_pointer;
#line 966 "DBusAccelerator.c"
	} else {
#line 27 "/home/nick/work/Enso-OS/galal/src/DBusAccelerator.vala"
		*object_p = gala_dbus_accelerator_ref (value->data[0].v_pointer);
#line 970 "DBusAccelerator.c"
	}
#line 27 "/home/nick/work/Enso-OS/galal/src/DBusAccelerator.vala"
	return NULL;
#line 974 "DBusAccelerator.c"
}


GParamSpec* gala_param_spec_dbus_accelerator (const gchar* name, const gchar* nick, const gchar* blurb, GType object_type, GParamFlags flags) {
	GalaParamSpecDBusAccelerator* spec;
#line 27 "/home/nick/work/Enso-OS/galal/src/DBusAccelerator.vala"
	g_return_val_if_fail (g_type_is_a (object_type, GALA_TYPE_DBUS_ACCELERATOR), NULL);
#line 27 "/home/nick/work/Enso-OS/galal/src/DBusAccelerator.vala"
	spec = g_param_spec_internal (G_TYPE_PARAM_OBJECT, name, nick, blurb, flags);
#line 27 "/home/nick/work/Enso-OS/galal/src/DBusAccelerator.vala"
	G_PARAM_SPEC (spec)->value_type = object_type;
#line 27 "/home/nick/work/Enso-OS/galal/src/DBusAccelerator.vala"
	return G_PARAM_SPEC (spec);
#line 988 "DBusAccelerator.c"
}


gpointer gala_value_get_dbus_accelerator (const GValue* value) {
#line 27 "/home/nick/work/Enso-OS/galal/src/DBusAccelerator.vala"
	g_return_val_if_fail (G_TYPE_CHECK_VALUE_TYPE (value, GALA_TYPE_DBUS_ACCELERATOR), NULL);
#line 27 "/home/nick/work/Enso-OS/galal/src/DBusAccelerator.vala"
	return value->data[0].v_pointer;
#line 997 "DBusAccelerator.c"
}


void gala_value_set_dbus_accelerator (GValue* value, gpointer v_object) {
	GalaDBusAccelerator* old;
#line 27 "/home/nick/work/Enso-OS/galal/src/DBusAccelerator.vala"
	g_return_if_fail (G_TYPE_CHECK_VALUE_TYPE (value, GALA_TYPE_DBUS_ACCELERATOR));
#line 27 "/home/nick/work/Enso-OS/galal/src/DBusAccelerator.vala"
	old = value->data[0].v_pointer;
#line 27 "/home/nick/work/Enso-OS/galal/src/DBusAccelerator.vala"
	if (v_object) {
#line 27 "/home/nick/work/Enso-OS/galal/src/DBusAccelerator.vala"
		g_return_if_fail (G_TYPE_CHECK_INSTANCE_TYPE (v_object, GALA_TYPE_DBUS_ACCELERATOR));
#line 27 "/home/nick/work/Enso-OS/galal/src/DBusAccelerator.vala"
		g_return_if_fail (g_value_type_compatible (G_TYPE_FROM_INSTANCE (v_object), G_VALUE_TYPE (value)));
#line 27 "/home/nick/work/Enso-OS/galal/src/DBusAccelerator.vala"
		value->data[0].v_pointer = v_object;
#line 27 "/home/nick/work/Enso-OS/galal/src/DBusAccelerator.vala"
		gala_dbus_accelerator_ref (value->data[0].v_pointer);
#line 1017 "DBusAccelerator.c"
	} else {
#line 27 "/home/nick/work/Enso-OS/galal/src/DBusAccelerator.vala"
		value->data[0].v_pointer = NULL;
#line 1021 "DBusAccelerator.c"
	}
#line 27 "/home/nick/work/Enso-OS/galal/src/DBusAccelerator.vala"
	if (old) {
#line 27 "/home/nick/work/Enso-OS/galal/src/DBusAccelerator.vala"
		gala_dbus_accelerator_unref (old);
#line 1027 "DBusAccelerator.c"
	}
}


void gala_value_take_dbus_accelerator (GValue* value, gpointer v_object) {
	GalaDBusAccelerator* old;
#line 27 "/home/nick/work/Enso-OS/galal/src/DBusAccelerator.vala"
	g_return_if_fail (G_TYPE_CHECK_VALUE_TYPE (value, GALA_TYPE_DBUS_ACCELERATOR));
#line 27 "/home/nick/work/Enso-OS/galal/src/DBusAccelerator.vala"
	old = value->data[0].v_pointer;
#line 27 "/home/nick/work/Enso-OS/galal/src/DBusAccelerator.vala"
	if (v_object) {
#line 27 "/home/nick/work/Enso-OS/galal/src/DBusAccelerator.vala"
		g_return_if_fail (G_TYPE_CHECK_INSTANCE_TYPE (v_object, GALA_TYPE_DBUS_ACCELERATOR));
#line 27 "/home/nick/work/Enso-OS/galal/src/DBusAccelerator.vala"
		g_return_if_fail (g_value_type_compatible (G_TYPE_FROM_INSTANCE (v_object), G_VALUE_TYPE (value)));
#line 27 "/home/nick/work/Enso-OS/galal/src/DBusAccelerator.vala"
		value->data[0].v_pointer = v_object;
#line 1046 "DBusAccelerator.c"
	} else {
#line 27 "/home/nick/work/Enso-OS/galal/src/DBusAccelerator.vala"
		value->data[0].v_pointer = NULL;
#line 1050 "DBusAccelerator.c"
	}
#line 27 "/home/nick/work/Enso-OS/galal/src/DBusAccelerator.vala"
	if (old) {
#line 27 "/home/nick/work/Enso-OS/galal/src/DBusAccelerator.vala"
		gala_dbus_accelerator_unref (old);
#line 1056 "DBusAccelerator.c"
	}
}


static void gala_dbus_accelerator_class_init (GalaDBusAcceleratorClass * klass) {
#line 27 "/home/nick/work/Enso-OS/galal/src/DBusAccelerator.vala"
	gala_dbus_accelerator_parent_class = g_type_class_peek_parent (klass);
#line 27 "/home/nick/work/Enso-OS/galal/src/DBusAccelerator.vala"
	((GalaDBusAcceleratorClass *) klass)->finalize = gala_dbus_accelerator_finalize;
#line 27 "/home/nick/work/Enso-OS/galal/src/DBusAccelerator.vala"
	g_type_class_add_private (klass, sizeof (GalaDBusAcceleratorPrivate));
#line 27 "/home/nick/work/Enso-OS/galal/src/DBusAccelerator.vala"
	g_signal_new ("accelerator_activated", GALA_TYPE_DBUS_ACCELERATOR, G_SIGNAL_RUN_LAST, 0, NULL, NULL, g_cclosure_user_marshal_VOID__UINT_UINT_UINT, G_TYPE_NONE, 3, G_TYPE_UINT, G_TYPE_UINT, G_TYPE_UINT);
#line 1070 "DBusAccelerator.c"
}


static void gala_dbus_accelerator_instance_init (GalaDBusAccelerator * self) {
#line 27 "/home/nick/work/Enso-OS/galal/src/DBusAccelerator.vala"
	self->priv = GALA_DBUS_ACCELERATOR_GET_PRIVATE (self);
#line 27 "/home/nick/work/Enso-OS/galal/src/DBusAccelerator.vala"
	self->ref_count = 1;
#line 1079 "DBusAccelerator.c"
}


static void gala_dbus_accelerator_finalize (GalaDBusAccelerator* obj) {
	GalaDBusAccelerator * self;
#line 27 "/home/nick/work/Enso-OS/galal/src/DBusAccelerator.vala"
	self = G_TYPE_CHECK_INSTANCE_CAST (obj, GALA_TYPE_DBUS_ACCELERATOR, GalaDBusAccelerator);
#line 27 "/home/nick/work/Enso-OS/galal/src/DBusAccelerator.vala"
	g_signal_handlers_destroy (self);
#line 46 "/home/nick/work/Enso-OS/galal/src/DBusAccelerator.vala"
	_g_object_unref0 (self->priv->wm);
#line 47 "/home/nick/work/Enso-OS/galal/src/DBusAccelerator.vala"
	_g_hash_table_unref0 (self->priv->grabbed_accelerators);
#line 1093 "DBusAccelerator.c"
}


GType gala_dbus_accelerator_get_type (void) {
	static volatile gsize gala_dbus_accelerator_type_id__volatile = 0;
	if (g_once_init_enter (&gala_dbus_accelerator_type_id__volatile)) {
		static const GTypeValueTable g_define_type_value_table = { gala_value_dbus_accelerator_init, gala_value_dbus_accelerator_free_value, gala_value_dbus_accelerator_copy_value, gala_value_dbus_accelerator_peek_pointer, "p", gala_value_dbus_accelerator_collect_value, "p", gala_value_dbus_accelerator_lcopy_value };
		static const GTypeInfo g_define_type_info = { sizeof (GalaDBusAcceleratorClass), (GBaseInitFunc) NULL, (GBaseFinalizeFunc) NULL, (GClassInitFunc) gala_dbus_accelerator_class_init, (GClassFinalizeFunc) NULL, NULL, sizeof (GalaDBusAccelerator), 0, (GInstanceInitFunc) gala_dbus_accelerator_instance_init, &g_define_type_value_table };
		static const GTypeFundamentalInfo g_define_type_fundamental_info = { (G_TYPE_FLAG_CLASSED | G_TYPE_FLAG_INSTANTIATABLE | G_TYPE_FLAG_DERIVABLE | G_TYPE_FLAG_DEEP_DERIVABLE) };
		GType gala_dbus_accelerator_type_id;
		gala_dbus_accelerator_type_id = g_type_register_fundamental (g_type_fundamental_next (), "GalaDBusAccelerator", &g_define_type_info, &g_define_type_fundamental_info, 0);
		g_type_set_qdata (gala_dbus_accelerator_type_id, g_quark_from_static_string ("vala-dbus-register-object"), (void*) gala_dbus_accelerator_register_object);
		g_once_init_leave (&gala_dbus_accelerator_type_id__volatile, gala_dbus_accelerator_type_id);
	}
	return gala_dbus_accelerator_type_id__volatile;
}


gpointer gala_dbus_accelerator_ref (gpointer instance) {
	GalaDBusAccelerator* self;
	self = instance;
#line 27 "/home/nick/work/Enso-OS/galal/src/DBusAccelerator.vala"
	g_atomic_int_inc (&self->ref_count);
#line 27 "/home/nick/work/Enso-OS/galal/src/DBusAccelerator.vala"
	return instance;
#line 1119 "DBusAccelerator.c"
}


void gala_dbus_accelerator_unref (gpointer instance) {
	GalaDBusAccelerator* self;
	self = instance;
#line 27 "/home/nick/work/Enso-OS/galal/src/DBusAccelerator.vala"
	if (g_atomic_int_dec_and_test (&self->ref_count)) {
#line 27 "/home/nick/work/Enso-OS/galal/src/DBusAccelerator.vala"
		GALA_DBUS_ACCELERATOR_GET_CLASS (self)->finalize (self);
#line 27 "/home/nick/work/Enso-OS/galal/src/DBusAccelerator.vala"
		g_type_free_instance ((GTypeInstance *) self);
#line 1132 "DBusAccelerator.c"
	}
}


static void _dbus_gala_dbus_accelerator_grab_accelerator (GalaDBusAccelerator* self, GVariant* _parameters_, GDBusMethodInvocation* invocation) {
	GError* error = NULL;
	GVariantIter _arguments_iter;
	gchar* accelerator = NULL;
	GVariant* _tmp7_;
	guint flags = 0U;
	GVariant* _tmp8_;
	GDBusMessage* _reply_message;
	GVariant* _reply;
	GVariantBuilder _reply_builder;
	guint result;
	g_variant_iter_init (&_arguments_iter, _parameters_);
	_tmp7_ = g_variant_iter_next_value (&_arguments_iter);
	accelerator = g_variant_dup_string (_tmp7_, NULL);
	g_variant_unref (_tmp7_);
	_tmp8_ = g_variant_iter_next_value (&_arguments_iter);
	flags = g_variant_get_uint32 (_tmp8_);
	g_variant_unref (_tmp8_);
	result = gala_dbus_accelerator_grab_accelerator (self, accelerator, flags);
	_reply_message = g_dbus_message_new_method_reply (g_dbus_method_invocation_get_message (invocation));
	g_variant_builder_init (&_reply_builder, G_VARIANT_TYPE_TUPLE);
	g_variant_builder_add_value (&_reply_builder, g_variant_new_uint32 (result));
	_reply = g_variant_builder_end (&_reply_builder);
	g_dbus_message_set_body (_reply_message, _reply);
	_g_free0 (accelerator);
	g_dbus_connection_send_message (g_dbus_method_invocation_get_connection (invocation), _reply_message, G_DBUS_SEND_MESSAGE_FLAGS_NONE, NULL, NULL);
	g_object_unref (invocation);
	g_object_unref (_reply_message);
}


static void _vala_GalaAccelerator_array_free (GalaAccelerator* array, gint array_length) {
	if (array != NULL) {
		int i;
		for (i = 0; i < array_length; i = i + 1) {
			gala_accelerator_destroy (&array[i]);
		}
	}
	g_free (array);
}


static void _dbus_gala_dbus_accelerator_grab_accelerators (GalaDBusAccelerator* self, GVariant* _parameters_, GDBusMethodInvocation* invocation) {
	GError* error = NULL;
	GVariantIter _arguments_iter;
	GalaAccelerator* accelerators = NULL;
	int accelerators_length1 = 0;
	GVariant* _tmp9_;
	GalaAccelerator* _tmp10_;
	int _tmp10__length;
	int _tmp10__size;
	int _tmp10__length1;
	GVariantIter _tmp11_;
	GVariant* _tmp12_;
	GDBusMessage* _reply_message;
	GVariant* _reply;
	GVariantBuilder _reply_builder;
	guint* result;
	int result_length1 = 0;
	guint* _tmp17_;
	GVariantBuilder _tmp18_;
	int _tmp19_;
	g_variant_iter_init (&_arguments_iter, _parameters_);
	_tmp9_ = g_variant_iter_next_value (&_arguments_iter);
	_tmp10_ = g_new (GalaAccelerator, 5);
	_tmp10__length = 0;
	_tmp10__size = 4;
	_tmp10__length1 = 0;
	g_variant_iter_init (&_tmp11_, _tmp9_);
	for (; (_tmp12_ = g_variant_iter_next_value (&_tmp11_)) != NULL; _tmp10__length1++) {
		GalaAccelerator _tmp13_;
		GVariantIter _tmp14_;
		GVariant* _tmp15_;
		GVariant* _tmp16_;
		if (_tmp10__size == _tmp10__length) {
			_tmp10__size = 2 * _tmp10__size;
			_tmp10_ = g_renew (GalaAccelerator, _tmp10_, _tmp10__size + 1);
		}
		g_variant_iter_init (&_tmp14_, _tmp12_);
		_tmp15_ = g_variant_iter_next_value (&_tmp14_);
		_tmp13_.name = g_variant_dup_string (_tmp15_, NULL);
		g_variant_unref (_tmp15_);
		_tmp16_ = g_variant_iter_next_value (&_tmp14_);
		_tmp13_.flags = g_variant_get_uint32 (_tmp16_);
		g_variant_unref (_tmp16_);
		_tmp10_[_tmp10__length++] = _tmp13_;
		g_variant_unref (_tmp12_);
	}
	accelerators_length1 = _tmp10__length1;
	accelerators = _tmp10_;
	g_variant_unref (_tmp9_);
	result = gala_dbus_accelerator_grab_accelerators (self, accelerators, accelerators_length1, &result_length1);
	_reply_message = g_dbus_message_new_method_reply (g_dbus_method_invocation_get_message (invocation));
	g_variant_builder_init (&_reply_builder, G_VARIANT_TYPE_TUPLE);
	_tmp17_ = result;
	g_variant_builder_init (&_tmp18_, G_VARIANT_TYPE ("au"));
	for (_tmp19_ = 0; _tmp19_ < result_length1; _tmp19_++) {
		g_variant_builder_add_value (&_tmp18_, g_variant_new_uint32 (*_tmp17_));
		_tmp17_++;
	}
	g_variant_builder_add_value (&_reply_builder, g_variant_builder_end (&_tmp18_));
	result = (g_free (result), NULL);
	_reply = g_variant_builder_end (&_reply_builder);
	g_dbus_message_set_body (_reply_message, _reply);
	accelerators = (_vala_GalaAccelerator_array_free (accelerators, accelerators_length1), NULL);
	g_dbus_connection_send_message (g_dbus_method_invocation_get_connection (invocation), _reply_message, G_DBUS_SEND_MESSAGE_FLAGS_NONE, NULL, NULL);
	g_object_unref (invocation);
	g_object_unref (_reply_message);
}


static void _dbus_gala_dbus_accelerator_ungrab_accelerator (GalaDBusAccelerator* self, GVariant* _parameters_, GDBusMethodInvocation* invocation) {
	GError* error = NULL;
	GVariantIter _arguments_iter;
	guint action = 0U;
	GVariant* _tmp20_;
	GDBusMessage* _reply_message;
	GVariant* _reply;
	GVariantBuilder _reply_builder;
	gboolean result;
	g_variant_iter_init (&_arguments_iter, _parameters_);
	_tmp20_ = g_variant_iter_next_value (&_arguments_iter);
	action = g_variant_get_uint32 (_tmp20_);
	g_variant_unref (_tmp20_);
	result = gala_dbus_accelerator_ungrab_accelerator (self, action);
	_reply_message = g_dbus_message_new_method_reply (g_dbus_method_invocation_get_message (invocation));
	g_variant_builder_init (&_reply_builder, G_VARIANT_TYPE_TUPLE);
	g_variant_builder_add_value (&_reply_builder, g_variant_new_boolean (result));
	_reply = g_variant_builder_end (&_reply_builder);
	g_dbus_message_set_body (_reply_message, _reply);
	g_dbus_connection_send_message (g_dbus_method_invocation_get_connection (invocation), _reply_message, G_DBUS_SEND_MESSAGE_FLAGS_NONE, NULL, NULL);
	g_object_unref (invocation);
	g_object_unref (_reply_message);
}


static void _dbus_gala_dbus_accelerator_show_osd (GalaDBusAccelerator* self, GVariant* _parameters_, GDBusMethodInvocation* invocation) {
	GError* error = NULL;
	GVariantIter _arguments_iter;
	GHashTable* parameters = NULL;
	GVariant* _tmp21_;
	GHashTable* _tmp22_;
	GVariantIter _tmp23_;
	GVariant* _tmp24_;
	GVariant* _tmp25_;
	GDBusMessage* _reply_message;
	GVariant* _reply;
	GVariantBuilder _reply_builder;
	g_variant_iter_init (&_arguments_iter, _parameters_);
	_tmp21_ = g_variant_iter_next_value (&_arguments_iter);
	_tmp22_ = g_hash_table_new_full (g_str_hash, g_str_equal, g_free, (GDestroyNotify) g_variant_unref);
	g_variant_iter_init (&_tmp23_, _tmp21_);
	while (g_variant_iter_loop (&_tmp23_, "{?*}", &_tmp24_, &_tmp25_)) {
		g_hash_table_insert (_tmp22_, g_variant_dup_string (_tmp24_, NULL), g_variant_get_variant (_tmp25_));
	}
	parameters = _tmp22_;
	g_variant_unref (_tmp21_);
	gala_dbus_accelerator_show_osd (self, parameters);
	_reply_message = g_dbus_message_new_method_reply (g_dbus_method_invocation_get_message (invocation));
	g_variant_builder_init (&_reply_builder, G_VARIANT_TYPE_TUPLE);
	_reply = g_variant_builder_end (&_reply_builder);
	g_dbus_message_set_body (_reply_message, _reply);
	_g_hash_table_unref0 (parameters);
	g_dbus_connection_send_message (g_dbus_method_invocation_get_connection (invocation), _reply_message, G_DBUS_SEND_MESSAGE_FLAGS_NONE, NULL, NULL);
	g_object_unref (invocation);
	g_object_unref (_reply_message);
}


static void gala_dbus_accelerator_dbus_interface_method_call (GDBusConnection* connection, const gchar* sender, const gchar* object_path, const gchar* interface_name, const gchar* method_name, GVariant* parameters, GDBusMethodInvocation* invocation, gpointer user_data) {
	gpointer* data;
	gpointer object;
	data = user_data;
	object = data[0];
	if (strcmp (method_name, "GrabAccelerator") == 0) {
		_dbus_gala_dbus_accelerator_grab_accelerator (object, parameters, invocation);
	} else if (strcmp (method_name, "GrabAccelerators") == 0) {
		_dbus_gala_dbus_accelerator_grab_accelerators (object, parameters, invocation);
	} else if (strcmp (method_name, "UngrabAccelerator") == 0) {
		_dbus_gala_dbus_accelerator_ungrab_accelerator (object, parameters, invocation);
	} else if (strcmp (method_name, "ShowOSD") == 0) {
		_dbus_gala_dbus_accelerator_show_osd (object, parameters, invocation);
	} else {
		g_object_unref (invocation);
	}
}


static GVariant* gala_dbus_accelerator_dbus_interface_get_property (GDBusConnection* connection, const gchar* sender, const gchar* object_path, const gchar* interface_name, const gchar* property_name, GError** error, gpointer user_data) {
	gpointer* data;
	gpointer object;
	data = user_data;
	object = data[0];
	return NULL;
}


static gboolean gala_dbus_accelerator_dbus_interface_set_property (GDBusConnection* connection, const gchar* sender, const gchar* object_path, const gchar* interface_name, const gchar* property_name, GVariant* value, GError** error, gpointer user_data) {
	gpointer* data;
	gpointer object;
	data = user_data;
	object = data[0];
	return FALSE;
}


static void _dbus_gala_dbus_accelerator_accelerator_activated (GObject* _sender, guint action, guint device_id, guint timestamp, gpointer* _data) {
	GDBusConnection * _connection;
	const gchar * _path;
	GVariant *_arguments;
	GVariantBuilder _arguments_builder;
	_connection = _data[1];
	_path = _data[2];
	g_variant_builder_init (&_arguments_builder, G_VARIANT_TYPE_TUPLE);
	g_variant_builder_add_value (&_arguments_builder, g_variant_new_uint32 (action));
	g_variant_builder_add_value (&_arguments_builder, g_variant_new_uint32 (device_id));
	g_variant_builder_add_value (&_arguments_builder, g_variant_new_uint32 (timestamp));
	_arguments = g_variant_builder_end (&_arguments_builder);
	g_dbus_connection_emit_signal (_connection, NULL, _path, "org.gnome.Shell", "AcceleratorActivated", _arguments, NULL);
}


guint gala_dbus_accelerator_register_object (gpointer object, GDBusConnection* connection, const gchar* path, GError** error) {
	guint result;
	gpointer *data;
	data = g_new (gpointer, 3);
	data[0] = gala_dbus_accelerator_ref (object);
	data[1] = g_object_ref (connection);
	data[2] = g_strdup (path);
	result = g_dbus_connection_register_object (connection, path, (GDBusInterfaceInfo *) (&_gala_dbus_accelerator_dbus_interface_info), &_gala_dbus_accelerator_dbus_interface_vtable, data, _gala_dbus_accelerator_unregister_object, error);
	if (!result) {
		return 0;
	}
	g_signal_connect (object, "accelerator-activated", (GCallback) _dbus_gala_dbus_accelerator_accelerator_activated, data);
	return result;
}


static void _gala_dbus_accelerator_unregister_object (gpointer user_data) {
	gpointer* data;
	data = user_data;
	g_signal_handlers_disconnect_by_func (data[0], _dbus_gala_dbus_accelerator_accelerator_activated, data);
	gala_dbus_accelerator_unref (data[0]);
	g_object_unref (data[1]);
	g_free (data[2]);
	g_free (data);
}



