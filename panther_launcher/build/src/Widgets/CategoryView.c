/* CategoryView.c generated by valac 0.30.1, the Vala compiler
 * generated from CategoryView.vala, do not modify */

/* -*- Mode: vala; indent-tabs-mode: nil; tab-width: 4 -*-*/
/**/
/*  Copyright (C) 2011-2012 Giulio Collura*/
/**/
/*  This program is free software: you can redistribute it and/or modify*/
/*  it under the terms of the GNU General Public License as published by*/
/*  the Free Software Foundation, either version 3 of the License, or*/
/*  (at your option) any later version.*/
/**/
/*  This program is distributed in the hope that it will be useful,*/
/*  but WITHOUT ANY WARRANTY; without even the implied warranty of*/
/*  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the*/
/*  GNU General Public License for more details.*/
/**/
/*  You should have received a copy of the GNU General Public License*/
/*  along with this program.  If not, see <http://www.gnu.org/licenses/>.*/
/**/

#include <glib.h>
#include <glib-object.h>
#include <gtk/gtk.h>
#include <gee.h>
#include <stdlib.h>
#include <string.h>
#include <glib/gi18n-lib.h>
#include <float.h>
#include <math.h>


#define PANTHER_WIDGETS_TYPE_CATEGORY_VIEW (panther_widgets_category_view_get_type ())
#define PANTHER_WIDGETS_CATEGORY_VIEW(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), PANTHER_WIDGETS_TYPE_CATEGORY_VIEW, PantherWidgetsCategoryView))
#define PANTHER_WIDGETS_CATEGORY_VIEW_CLASS(klass) (G_TYPE_CHECK_CLASS_CAST ((klass), PANTHER_WIDGETS_TYPE_CATEGORY_VIEW, PantherWidgetsCategoryViewClass))
#define PANTHER_WIDGETS_IS_CATEGORY_VIEW(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), PANTHER_WIDGETS_TYPE_CATEGORY_VIEW))
#define PANTHER_WIDGETS_IS_CATEGORY_VIEW_CLASS(klass) (G_TYPE_CHECK_CLASS_TYPE ((klass), PANTHER_WIDGETS_TYPE_CATEGORY_VIEW))
#define PANTHER_WIDGETS_CATEGORY_VIEW_GET_CLASS(obj) (G_TYPE_INSTANCE_GET_CLASS ((obj), PANTHER_WIDGETS_TYPE_CATEGORY_VIEW, PantherWidgetsCategoryViewClass))

typedef struct _PantherWidgetsCategoryView PantherWidgetsCategoryView;
typedef struct _PantherWidgetsCategoryViewClass PantherWidgetsCategoryViewClass;
typedef struct _PantherWidgetsCategoryViewPrivate PantherWidgetsCategoryViewPrivate;

#define PANTHER_WIDGETS_TYPE_SIDEBAR (panther_widgets_sidebar_get_type ())
#define PANTHER_WIDGETS_SIDEBAR(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), PANTHER_WIDGETS_TYPE_SIDEBAR, PantherWidgetsSidebar))
#define PANTHER_WIDGETS_SIDEBAR_CLASS(klass) (G_TYPE_CHECK_CLASS_CAST ((klass), PANTHER_WIDGETS_TYPE_SIDEBAR, PantherWidgetsSidebarClass))
#define PANTHER_WIDGETS_IS_SIDEBAR(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), PANTHER_WIDGETS_TYPE_SIDEBAR))
#define PANTHER_WIDGETS_IS_SIDEBAR_CLASS(klass) (G_TYPE_CHECK_CLASS_TYPE ((klass), PANTHER_WIDGETS_TYPE_SIDEBAR))
#define PANTHER_WIDGETS_SIDEBAR_GET_CLASS(obj) (G_TYPE_INSTANCE_GET_CLASS ((obj), PANTHER_WIDGETS_TYPE_SIDEBAR, PantherWidgetsSidebarClass))

typedef struct _PantherWidgetsSidebar PantherWidgetsSidebar;
typedef struct _PantherWidgetsSidebarClass PantherWidgetsSidebarClass;

#define PANTHER_WIDGETS_TYPE_USER_VIEW (panther_widgets_user_view_get_type ())
#define PANTHER_WIDGETS_USER_VIEW(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), PANTHER_WIDGETS_TYPE_USER_VIEW, PantherWidgetsUserView))
#define PANTHER_WIDGETS_USER_VIEW_CLASS(klass) (G_TYPE_CHECK_CLASS_CAST ((klass), PANTHER_WIDGETS_TYPE_USER_VIEW, PantherWidgetsUserViewClass))
#define PANTHER_WIDGETS_IS_USER_VIEW(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), PANTHER_WIDGETS_TYPE_USER_VIEW))
#define PANTHER_WIDGETS_IS_USER_VIEW_CLASS(klass) (G_TYPE_CHECK_CLASS_TYPE ((klass), PANTHER_WIDGETS_TYPE_USER_VIEW))
#define PANTHER_WIDGETS_USER_VIEW_GET_CLASS(obj) (G_TYPE_INSTANCE_GET_CLASS ((obj), PANTHER_WIDGETS_TYPE_USER_VIEW, PantherWidgetsUserViewClass))

typedef struct _PantherWidgetsUserView PantherWidgetsUserView;
typedef struct _PantherWidgetsUserViewClass PantherWidgetsUserViewClass;

#define PANTHER_WIDGETS_TYPE_GRID (panther_widgets_grid_get_type ())
#define PANTHER_WIDGETS_GRID(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), PANTHER_WIDGETS_TYPE_GRID, PantherWidgetsGrid))
#define PANTHER_WIDGETS_GRID_CLASS(klass) (G_TYPE_CHECK_CLASS_CAST ((klass), PANTHER_WIDGETS_TYPE_GRID, PantherWidgetsGridClass))
#define PANTHER_WIDGETS_IS_GRID(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), PANTHER_WIDGETS_TYPE_GRID))
#define PANTHER_WIDGETS_IS_GRID_CLASS(klass) (G_TYPE_CHECK_CLASS_TYPE ((klass), PANTHER_WIDGETS_TYPE_GRID))
#define PANTHER_WIDGETS_GRID_GET_CLASS(obj) (G_TYPE_INSTANCE_GET_CLASS ((obj), PANTHER_WIDGETS_TYPE_GRID, PantherWidgetsGridClass))

typedef struct _PantherWidgetsGrid PantherWidgetsGrid;
typedef struct _PantherWidgetsGridClass PantherWidgetsGridClass;

#define PANTHER_TYPE_PANTHER_VIEW (panther_panther_view_get_type ())
#define PANTHER_PANTHER_VIEW(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), PANTHER_TYPE_PANTHER_VIEW, PantherPantherView))
#define PANTHER_PANTHER_VIEW_CLASS(klass) (G_TYPE_CHECK_CLASS_CAST ((klass), PANTHER_TYPE_PANTHER_VIEW, PantherPantherViewClass))
#define PANTHER_IS_PANTHER_VIEW(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), PANTHER_TYPE_PANTHER_VIEW))
#define PANTHER_IS_PANTHER_VIEW_CLASS(klass) (G_TYPE_CHECK_CLASS_TYPE ((klass), PANTHER_TYPE_PANTHER_VIEW))
#define PANTHER_PANTHER_VIEW_GET_CLASS(obj) (G_TYPE_INSTANCE_GET_CLASS ((obj), PANTHER_TYPE_PANTHER_VIEW, PantherPantherViewClass))

typedef struct _PantherPantherView PantherPantherView;
typedef struct _PantherPantherViewClass PantherPantherViewClass;
#define _g_object_unref0(var) ((var == NULL) ? NULL : (var = (g_object_unref (var), NULL)))
#define _g_free0(var) (var = (g_free (var), NULL))
typedef struct _PantherPantherViewPrivate PantherPantherViewPrivate;

#define PANTHER_TYPE_SELECTOR (panther_selector_get_type ())
#define PANTHER_SELECTOR(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), PANTHER_TYPE_SELECTOR, PantherSelector))
#define PANTHER_SELECTOR_CLASS(klass) (G_TYPE_CHECK_CLASS_CAST ((klass), PANTHER_TYPE_SELECTOR, PantherSelectorClass))
#define PANTHER_IS_SELECTOR(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), PANTHER_TYPE_SELECTOR))
#define PANTHER_IS_SELECTOR_CLASS(klass) (G_TYPE_CHECK_CLASS_TYPE ((klass), PANTHER_TYPE_SELECTOR))
#define PANTHER_SELECTOR_GET_CLASS(obj) (G_TYPE_INSTANCE_GET_CLASS ((obj), PANTHER_TYPE_SELECTOR, PantherSelectorClass))

typedef struct _PantherSelector PantherSelector;
typedef struct _PantherSelectorClass PantherSelectorClass;

#define PANTHER_BACKEND_TYPE_APP_SYSTEM (panther_backend_app_system_get_type ())
#define PANTHER_BACKEND_APP_SYSTEM(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), PANTHER_BACKEND_TYPE_APP_SYSTEM, PantherBackendAppSystem))
#define PANTHER_BACKEND_APP_SYSTEM_CLASS(klass) (G_TYPE_CHECK_CLASS_CAST ((klass), PANTHER_BACKEND_TYPE_APP_SYSTEM, PantherBackendAppSystemClass))
#define PANTHER_BACKEND_IS_APP_SYSTEM(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), PANTHER_BACKEND_TYPE_APP_SYSTEM))
#define PANTHER_BACKEND_IS_APP_SYSTEM_CLASS(klass) (G_TYPE_CHECK_CLASS_TYPE ((klass), PANTHER_BACKEND_TYPE_APP_SYSTEM))
#define PANTHER_BACKEND_APP_SYSTEM_GET_CLASS(obj) (G_TYPE_INSTANCE_GET_CLASS ((obj), PANTHER_BACKEND_TYPE_APP_SYSTEM, PantherBackendAppSystemClass))

typedef struct _PantherBackendAppSystem PantherBackendAppSystem;
typedef struct _PantherBackendAppSystemClass PantherBackendAppSystemClass;

#define PANTHER_BACKEND_TYPE_APP (panther_backend_app_get_type ())
#define PANTHER_BACKEND_APP(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), PANTHER_BACKEND_TYPE_APP, PantherBackendApp))
#define PANTHER_BACKEND_APP_CLASS(klass) (G_TYPE_CHECK_CLASS_CAST ((klass), PANTHER_BACKEND_TYPE_APP, PantherBackendAppClass))
#define PANTHER_BACKEND_IS_APP(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), PANTHER_BACKEND_TYPE_APP))
#define PANTHER_BACKEND_IS_APP_CLASS(klass) (G_TYPE_CHECK_CLASS_TYPE ((klass), PANTHER_BACKEND_TYPE_APP))
#define PANTHER_BACKEND_APP_GET_CLASS(obj) (G_TYPE_INSTANCE_GET_CLASS ((obj), PANTHER_BACKEND_TYPE_APP, PantherBackendAppClass))

typedef struct _PantherBackendApp PantherBackendApp;
typedef struct _PantherBackendAppClass PantherBackendAppClass;

#define PANTHER_WIDGETS_TYPE_APP_ENTRY (panther_widgets_app_entry_get_type ())
#define PANTHER_WIDGETS_APP_ENTRY(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), PANTHER_WIDGETS_TYPE_APP_ENTRY, PantherWidgetsAppEntry))
#define PANTHER_WIDGETS_APP_ENTRY_CLASS(klass) (G_TYPE_CHECK_CLASS_CAST ((klass), PANTHER_WIDGETS_TYPE_APP_ENTRY, PantherWidgetsAppEntryClass))
#define PANTHER_WIDGETS_IS_APP_ENTRY(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), PANTHER_WIDGETS_TYPE_APP_ENTRY))
#define PANTHER_WIDGETS_IS_APP_ENTRY_CLASS(klass) (G_TYPE_CHECK_CLASS_TYPE ((klass), PANTHER_WIDGETS_TYPE_APP_ENTRY))
#define PANTHER_WIDGETS_APP_ENTRY_GET_CLASS(obj) (G_TYPE_INSTANCE_GET_CLASS ((obj), PANTHER_WIDGETS_TYPE_APP_ENTRY, PantherWidgetsAppEntryClass))

typedef struct _PantherWidgetsAppEntry PantherWidgetsAppEntry;
typedef struct _PantherWidgetsAppEntryClass PantherWidgetsAppEntryClass;

struct _PantherWidgetsCategoryView {
	GtkEventBox parent_instance;
	PantherWidgetsCategoryViewPrivate * priv;
	PantherWidgetsSidebar* category_switcher;
	PantherWidgetsUserView* user_view;
	GtkSeparator* separator;
	PantherWidgetsGrid* app_view;
	GeeHashMap* category_ids;
};

struct _PantherWidgetsCategoryViewClass {
	GtkEventBoxClass parent_class;
};

struct _PantherWidgetsCategoryViewPrivate {
	GtkGrid* container;
	PantherPantherView* view;
	gint current_position;
};

struct _PantherPantherView {
	GtkWindow parent_instance;
	PantherPantherViewPrivate * priv;
	GtkSearchEntry* search_entry;
	GtkStack* stack;
	PantherSelector* view_selector;
	GtkGrid* top;
	GtkGrid* container;
	GtkFrame* fcontainer;
	GtkStack* main_stack;
	GtkBox* content_area;
	PantherBackendAppSystem* app_system;
	GeeHashMap* apps;
	GeeArrayList* saved_apps;
	GSList* app_name;
};

struct _PantherPantherViewClass {
	GtkWindowClass parent_class;
};


static gpointer panther_widgets_category_view_parent_class = NULL;
extern gint panther_pixels_ITEM_SIZE;

GType panther_widgets_category_view_get_type (void) G_GNUC_CONST;
GType panther_widgets_sidebar_get_type (void) G_GNUC_CONST;
GType panther_widgets_user_view_get_type (void) G_GNUC_CONST;
GType panther_widgets_grid_get_type (void) G_GNUC_CONST;
GType panther_panther_view_get_type (void) G_GNUC_CONST;
#define PANTHER_WIDGETS_CATEGORY_VIEW_GET_PRIVATE(o) (G_TYPE_INSTANCE_GET_PRIVATE ((o), PANTHER_WIDGETS_TYPE_CATEGORY_VIEW, PantherWidgetsCategoryViewPrivate))
enum  {
	PANTHER_WIDGETS_CATEGORY_VIEW_DUMMY_PROPERTY
};
#define PANTHER_WIDGETS_CATEGORY_VIEW_ALL_APPLICATIONS _ ("All Applications")
#define PANTHER_WIDGETS_CATEGORY_VIEW_NEW_FILTER _ ("Create a new Filter")
#define PANTHER_WIDGETS_CATEGORY_VIEW_SWITCHBOARD_CATEGORY "switchboard"
PantherWidgetsCategoryView* panther_widgets_category_view_new (PantherPantherView* parent);
PantherWidgetsCategoryView* panther_widgets_category_view_construct (GType object_type, PantherPantherView* parent);
PantherWidgetsSidebar* panther_widgets_sidebar_new (void);
PantherWidgetsSidebar* panther_widgets_sidebar_construct (GType object_type);
gint panther_panther_view_get_rows (PantherPantherView* self);
gint panther_panther_view_get_columns (PantherPantherView* self);
PantherWidgetsGrid* panther_widgets_grid_new (gint rows, gint columns);
PantherWidgetsGrid* panther_widgets_grid_construct (GType object_type, gint rows, gint columns);
PantherWidgetsUserView* panther_widgets_user_view_new (void);
PantherWidgetsUserView* panther_widgets_user_view_construct (GType object_type);
static void panther_widgets_category_view_connect_events (PantherWidgetsCategoryView* self);
void panther_widgets_category_view_setup_sidebar (PantherWidgetsCategoryView* self);
gint panther_widgets_sidebar_get_selected (PantherWidgetsSidebar* self);
void panther_widgets_sidebar_clear (PantherWidgetsSidebar* self);
void panther_widgets_sidebar_add_category (PantherWidgetsSidebar* self, const gchar* entry_name);
GType panther_selector_get_type (void) G_GNUC_CONST;
GType panther_backend_app_system_get_type (void) G_GNUC_CONST;
GType panther_backend_app_get_type (void) G_GNUC_CONST;
void panther_widgets_grid_resize (PantherWidgetsGrid* self, gint rows, gint columns);
void panther_widgets_sidebar_set_selected (PantherWidgetsSidebar* self, gint value);
static void __lambda26_ (PantherWidgetsCategoryView* self, const gchar* name, gint nth);
void panther_panther_view_reset_category_focus (PantherPantherView* self);
void panther_panther_view_set_cat_saved (PantherPantherView* self, gboolean value);
void panther_widgets_category_view_show_filtered_apps (PantherWidgetsCategoryView* self, const gchar* category);
static void ___lambda26__panther_widgets_sidebar_selection_changed (PantherWidgetsSidebar* _sender, const gchar* entry_name, gint nth, gpointer self);
static void panther_widgets_category_view_add_app (PantherWidgetsCategoryView* self, PantherBackendApp* app);
GType panther_widgets_app_entry_get_type (void) G_GNUC_CONST;
PantherWidgetsAppEntry* panther_widgets_app_entry_new (PantherBackendApp* app);
PantherWidgetsAppEntry* panther_widgets_app_entry_construct (GType object_type, PantherBackendApp* app);
static void __lambda27_ (PantherWidgetsCategoryView* self);
static void ___lambda27__panther_widgets_app_entry_app_launched (PantherWidgetsAppEntry* _sender, gpointer self);
void panther_widgets_grid_append (PantherWidgetsGrid* self, GtkWidget* widget);
void panther_widgets_grid_clear (PantherWidgetsGrid* self);
static void panther_widgets_category_view_finalize (GObject* obj);


static gpointer _g_object_ref0 (gpointer self) {
	return self ? g_object_ref (self) : NULL;
}


PantherWidgetsCategoryView* panther_widgets_category_view_construct (GType object_type, PantherPantherView* parent) {
	PantherWidgetsCategoryView * self = NULL;
	PantherPantherView* _tmp0_ = NULL;
	PantherPantherView* _tmp1_ = NULL;
	GtkGrid* _tmp2_ = NULL;
	GtkGrid* _tmp3_ = NULL;
	GtkGrid* _tmp4_ = NULL;
	GtkGrid* _tmp5_ = NULL;
	GtkGrid* _tmp6_ = NULL;
	GtkSeparator* _tmp7_ = NULL;
	PantherWidgetsSidebar* _tmp8_ = NULL;
	PantherPantherView* _tmp9_ = NULL;
	gint _tmp10_ = 0;
	gint _tmp11_ = 0;
	PantherPantherView* _tmp12_ = NULL;
	gint _tmp13_ = 0;
	gint _tmp14_ = 0;
	PantherWidgetsGrid* _tmp15_ = NULL;
	PantherWidgetsUserView* _tmp16_ = NULL;
	GtkGrid* _tmp17_ = NULL;
	PantherWidgetsSidebar* _tmp18_ = NULL;
	GtkGrid* _tmp19_ = NULL;
	PantherWidgetsGrid* _tmp20_ = NULL;
	GtkGrid* _tmp21_ = NULL;
	g_return_val_if_fail (parent != NULL, NULL);
	self = (PantherWidgetsCategoryView*) g_object_new (object_type, NULL);
	_tmp0_ = parent;
	_tmp1_ = _g_object_ref0 (_tmp0_);
	_g_object_unref0 (self->priv->view);
	self->priv->view = _tmp1_;
	gtk_event_box_set_visible_window ((GtkEventBox*) self, FALSE);
	gtk_widget_set_hexpand ((GtkWidget*) self, TRUE);
	_tmp2_ = (GtkGrid*) gtk_grid_new ();
	g_object_ref_sink (_tmp2_);
	_g_object_unref0 (self->priv->container);
	self->priv->container = _tmp2_;
	_tmp3_ = self->priv->container;
	gtk_widget_set_hexpand ((GtkWidget*) _tmp3_, TRUE);
	_tmp4_ = self->priv->container;
	gtk_grid_set_row_homogeneous (_tmp4_, FALSE);
	_tmp5_ = self->priv->container;
	gtk_grid_set_column_homogeneous (_tmp5_, FALSE);
	_tmp6_ = self->priv->container;
	gtk_orientable_set_orientation ((GtkOrientable*) _tmp6_, GTK_ORIENTATION_HORIZONTAL);
	_tmp7_ = (GtkSeparator*) gtk_separator_new (GTK_ORIENTATION_VERTICAL);
	g_object_ref_sink (_tmp7_);
	_g_object_unref0 (self->separator);
	self->separator = _tmp7_;
	_tmp8_ = panther_widgets_sidebar_new ();
	g_object_ref_sink (_tmp8_);
	_g_object_unref0 (self->category_switcher);
	self->category_switcher = _tmp8_;
	_tmp9_ = self->priv->view;
	_tmp10_ = panther_panther_view_get_rows (_tmp9_);
	_tmp11_ = _tmp10_;
	_tmp12_ = self->priv->view;
	_tmp13_ = panther_panther_view_get_columns (_tmp12_);
	_tmp14_ = _tmp13_;
	_tmp15_ = panther_widgets_grid_new (_tmp11_, _tmp14_);
	g_object_ref_sink (_tmp15_);
	_g_object_unref0 (self->app_view);
	self->app_view = _tmp15_;
	_tmp16_ = panther_widgets_user_view_new ();
	g_object_ref_sink (_tmp16_);
	_g_object_unref0 (self->user_view);
	self->user_view = _tmp16_;
	_tmp17_ = self->priv->container;
	_tmp18_ = self->category_switcher;
	gtk_grid_attach (_tmp17_, (GtkWidget*) _tmp18_, 0, 0, 1, 1);
	_tmp19_ = self->priv->container;
	_tmp20_ = self->app_view;
	gtk_container_add ((GtkContainer*) _tmp19_, (GtkWidget*) _tmp20_);
	_tmp21_ = self->priv->container;
	gtk_container_add ((GtkContainer*) self, (GtkWidget*) _tmp21_);
	panther_widgets_category_view_connect_events (self);
	panther_widgets_category_view_setup_sidebar (self);
	return self;
}


PantherWidgetsCategoryView* panther_widgets_category_view_new (PantherPantherView* parent) {
	return panther_widgets_category_view_construct (PANTHER_WIDGETS_TYPE_CATEGORY_VIEW, parent);
}


void panther_widgets_category_view_setup_sidebar (PantherWidgetsCategoryView* self) {
	gint old_selected = 0;
	PantherWidgetsSidebar* _tmp0_ = NULL;
	gint _tmp1_ = 0;
	gint _tmp2_ = 0;
	GeeHashMap* _tmp3_ = NULL;
	PantherWidgetsSidebar* _tmp4_ = NULL;
	PantherWidgetsGrid* _tmp5_ = NULL;
	gint n = 0;
	GeeHashMap* _tmp6_ = NULL;
	gint _tmp7_ = 0;
	gint _tmp8_ = 0;
	GeeHashMap* _tmp9_ = NULL;
	gint _tmp10_ = 0;
	gint _tmp11_ = 0;
	PantherWidgetsSidebar* _tmp12_ = NULL;
	const gchar* _tmp13_ = NULL;
	gchar* _tmp14_ = NULL;
	gchar* _tmp15_ = NULL;
	PantherWidgetsSidebar* _tmp16_ = NULL;
	const gchar* _tmp17_ = NULL;
	gchar* _tmp18_ = NULL;
	gchar* _tmp19_ = NULL;
	PantherWidgetsSidebar* _tmp41_ = NULL;
	gint minimum_width = 0;
	PantherWidgetsSidebar* _tmp42_ = NULL;
	gint _tmp43_ = 0;
	gint removing_columns = 0;
	gint _tmp44_ = 0;
	gint _tmp45_ = 0;
	gint _tmp46_ = 0;
	gint _tmp47_ = 0;
	gint columns = 0;
	PantherPantherView* _tmp49_ = NULL;
	gint _tmp50_ = 0;
	gint _tmp51_ = 0;
	gint _tmp52_ = 0;
	PantherWidgetsGrid* _tmp53_ = NULL;
	PantherPantherView* _tmp54_ = NULL;
	gint _tmp55_ = 0;
	gint _tmp56_ = 0;
	PantherWidgetsSidebar* _tmp57_ = NULL;
	gint _tmp58_ = 0;
	g_return_if_fail (self != NULL);
	_tmp0_ = self->category_switcher;
	_tmp1_ = panther_widgets_sidebar_get_selected (_tmp0_);
	_tmp2_ = _tmp1_;
	old_selected = _tmp2_;
	_tmp3_ = self->category_ids;
	gee_abstract_map_clear ((GeeAbstractMap*) _tmp3_);
	_tmp4_ = self->category_switcher;
	panther_widgets_sidebar_clear (_tmp4_);
	_tmp5_ = self->app_view;
	gtk_widget_set_size_request ((GtkWidget*) _tmp5_, -1, -1);
	n = 0;
	_tmp6_ = self->category_ids;
	_tmp7_ = n;
	gee_abstract_map_set ((GeeAbstractMap*) _tmp6_, (gpointer) ((gintptr) _tmp7_), "Saved");
	_tmp8_ = n;
	n = _tmp8_ + 1;
	_tmp9_ = self->category_ids;
	_tmp10_ = n;
	gee_abstract_map_set ((GeeAbstractMap*) _tmp9_, (gpointer) ((gintptr) _tmp10_), "All");
	_tmp11_ = n;
	n = _tmp11_ + 1;
	_tmp12_ = self->category_switcher;
	_tmp13_ = g_dgettext ("gnome-menus-3.0", "★Saved");
	_tmp14_ = g_strdup (_tmp13_);
	_tmp15_ = _tmp14_;
	panther_widgets_sidebar_add_category (_tmp12_, _tmp15_);
	_g_free0 (_tmp15_);
	_tmp16_ = self->category_switcher;
	_tmp17_ = g_dgettext ("gnome-menus-3.0", "All");
	_tmp18_ = g_strdup (_tmp17_);
	_tmp19_ = _tmp18_;
	panther_widgets_sidebar_add_category (_tmp16_, _tmp19_);
	_g_free0 (_tmp19_);
	{
		GeeIterator* _cat_name_it = NULL;
		PantherPantherView* _tmp20_ = NULL;
		GeeHashMap* _tmp21_ = NULL;
		GeeSet* _tmp22_ = NULL;
		GeeSet* _tmp23_ = NULL;
		GeeSet* _tmp24_ = NULL;
		GeeIterator* _tmp25_ = NULL;
		GeeIterator* _tmp26_ = NULL;
		_tmp20_ = self->priv->view;
		_tmp21_ = _tmp20_->apps;
		_tmp22_ = gee_abstract_map_get_keys ((GeeMap*) _tmp21_);
		_tmp23_ = _tmp22_;
		_tmp24_ = _tmp23_;
		_tmp25_ = gee_iterable_iterator ((GeeIterable*) _tmp24_);
		_tmp26_ = _tmp25_;
		_g_object_unref0 (_tmp24_);
		_cat_name_it = _tmp26_;
		while (TRUE) {
			GeeIterator* _tmp27_ = NULL;
			gboolean _tmp28_ = FALSE;
			gchar* cat_name = NULL;
			GeeIterator* _tmp29_ = NULL;
			gpointer _tmp30_ = NULL;
			const gchar* _tmp31_ = NULL;
			GeeHashMap* _tmp32_ = NULL;
			gint _tmp33_ = 0;
			const gchar* _tmp34_ = NULL;
			PantherWidgetsSidebar* _tmp35_ = NULL;
			const gchar* _tmp36_ = NULL;
			const gchar* _tmp37_ = NULL;
			gchar* _tmp38_ = NULL;
			gchar* _tmp39_ = NULL;
			gint _tmp40_ = 0;
			_tmp27_ = _cat_name_it;
			_tmp28_ = gee_iterator_next (_tmp27_);
			if (!_tmp28_) {
				break;
			}
			_tmp29_ = _cat_name_it;
			_tmp30_ = gee_iterator_get (_tmp29_);
			cat_name = (gchar*) _tmp30_;
			_tmp31_ = cat_name;
			if (g_strcmp0 (_tmp31_, PANTHER_WIDGETS_CATEGORY_VIEW_SWITCHBOARD_CATEGORY) == 0) {
				_g_free0 (cat_name);
				continue;
			}
			_tmp32_ = self->category_ids;
			_tmp33_ = n;
			_tmp34_ = cat_name;
			gee_abstract_map_set ((GeeAbstractMap*) _tmp32_, (gpointer) ((gintptr) _tmp33_), _tmp34_);
			_tmp35_ = self->category_switcher;
			_tmp36_ = cat_name;
			_tmp37_ = g_dgettext ("gnome-menus-3.0", _tmp36_);
			_tmp38_ = g_strdup (_tmp37_);
			_tmp39_ = _tmp38_;
			panther_widgets_sidebar_add_category (_tmp35_, _tmp39_);
			_g_free0 (_tmp39_);
			_tmp40_ = n;
			n = _tmp40_ + 1;
			_g_free0 (cat_name);
		}
		_g_object_unref0 (_cat_name_it);
	}
	_tmp41_ = self->category_switcher;
	gtk_widget_show_all ((GtkWidget*) _tmp41_);
	_tmp42_ = self->category_switcher;
	gtk_widget_get_preferred_width ((GtkWidget*) _tmp42_, &_tmp43_, NULL);
	minimum_width = _tmp43_;
	_tmp44_ = minimum_width;
	_tmp45_ = panther_pixels_ITEM_SIZE;
	removing_columns = (gint) (((gdouble) _tmp44_) / ((gdouble) _tmp45_));
	_tmp46_ = minimum_width;
	_tmp47_ = panther_pixels_ITEM_SIZE;
	if ((_tmp46_ % _tmp47_) != 0) {
		gint _tmp48_ = 0;
		_tmp48_ = removing_columns;
		removing_columns = _tmp48_ + 1;
	}
	_tmp49_ = self->priv->view;
	_tmp50_ = panther_panther_view_get_columns (_tmp49_);
	_tmp51_ = _tmp50_;
	_tmp52_ = removing_columns;
	columns = _tmp51_ - _tmp52_;
	_tmp53_ = self->app_view;
	_tmp54_ = self->priv->view;
	_tmp55_ = panther_panther_view_get_rows (_tmp54_);
	_tmp56_ = _tmp55_;
	panther_widgets_grid_resize (_tmp53_, _tmp56_, columns);
	_tmp57_ = self->category_switcher;
	_tmp58_ = old_selected;
	panther_widgets_sidebar_set_selected (_tmp57_, _tmp58_);
}


static void __lambda26_ (PantherWidgetsCategoryView* self, const gchar* name, gint nth) {
	PantherPantherView* _tmp0_ = NULL;
	gchar* category = NULL;
	GeeHashMap* _tmp1_ = NULL;
	gint _tmp2_ = 0;
	gpointer _tmp3_ = NULL;
	const gchar* _tmp4_ = NULL;
	const gchar* _tmp7_ = NULL;
	g_return_if_fail (name != NULL);
	_tmp0_ = self->priv->view;
	panther_panther_view_reset_category_focus (_tmp0_);
	_tmp1_ = self->category_ids;
	_tmp2_ = nth;
	_tmp3_ = gee_abstract_map_get ((GeeAbstractMap*) _tmp1_, (gpointer) ((gintptr) _tmp2_));
	category = (gchar*) _tmp3_;
	_tmp4_ = category;
	if (g_strcmp0 (_tmp4_, "Saved") == 0) {
		PantherPantherView* _tmp5_ = NULL;
		_tmp5_ = self->priv->view;
		panther_panther_view_set_cat_saved (_tmp5_, TRUE);
	} else {
		PantherPantherView* _tmp6_ = NULL;
		_tmp6_ = self->priv->view;
		panther_panther_view_set_cat_saved (_tmp6_, FALSE);
	}
	_tmp7_ = category;
	panther_widgets_category_view_show_filtered_apps (self, _tmp7_);
	_g_free0 (category);
}


static void ___lambda26__panther_widgets_sidebar_selection_changed (PantherWidgetsSidebar* _sender, const gchar* entry_name, gint nth, gpointer self) {
	__lambda26_ ((PantherWidgetsCategoryView*) self, entry_name, nth);
}


static void panther_widgets_category_view_connect_events (PantherWidgetsCategoryView* self) {
	PantherWidgetsSidebar* _tmp0_ = NULL;
	g_return_if_fail (self != NULL);
	_tmp0_ = self->category_switcher;
	g_signal_connect_object (_tmp0_, "selection-changed", (GCallback) ___lambda26__panther_widgets_sidebar_selection_changed, self, 0);
}


static void __lambda27_ (PantherWidgetsCategoryView* self) {
	PantherPantherView* _tmp0_ = NULL;
	_tmp0_ = self->priv->view;
	gtk_widget_hide ((GtkWidget*) _tmp0_);
	g_print ("hide10\n");
}


static void ___lambda27__panther_widgets_app_entry_app_launched (PantherWidgetsAppEntry* _sender, gpointer self) {
	__lambda27_ ((PantherWidgetsCategoryView*) self);
}


static void panther_widgets_category_view_add_app (PantherWidgetsCategoryView* self, PantherBackendApp* app) {
	PantherWidgetsAppEntry* app_entry = NULL;
	PantherBackendApp* _tmp0_ = NULL;
	PantherWidgetsAppEntry* _tmp1_ = NULL;
	PantherWidgetsGrid* _tmp2_ = NULL;
	PantherWidgetsGrid* _tmp3_ = NULL;
	g_return_if_fail (self != NULL);
	g_return_if_fail (app != NULL);
	_tmp0_ = app;
	_tmp1_ = panther_widgets_app_entry_new (_tmp0_);
	g_object_ref_sink (_tmp1_);
	app_entry = _tmp1_;
	g_signal_connect_object (app_entry, "app-launched", (GCallback) ___lambda27__panther_widgets_app_entry_app_launched, self, 0);
	_tmp2_ = self->app_view;
	panther_widgets_grid_append (_tmp2_, (GtkWidget*) app_entry);
	_tmp3_ = self->app_view;
	gtk_widget_show_all ((GtkWidget*) _tmp3_);
	_g_object_unref0 (app_entry);
}


void panther_widgets_category_view_show_filtered_apps (PantherWidgetsCategoryView* self, const gchar* category) {
	PantherWidgetsGrid* _tmp0_ = NULL;
	const gchar* _tmp1_ = NULL;
	g_return_if_fail (self != NULL);
	g_return_if_fail (category != NULL);
	_tmp0_ = self->app_view;
	panther_widgets_grid_clear (_tmp0_);
	_tmp1_ = category;
	if (g_strcmp0 (_tmp1_, "All") == 0) {
		PantherPantherView* _tmp2_ = NULL;
		GSList* _tmp3_ = NULL;
		_tmp2_ = self->priv->view;
		_tmp3_ = _tmp2_->app_name;
		{
			GSList* app_collection = NULL;
			GSList* app_it = NULL;
			app_collection = _tmp3_;
			for (app_it = app_collection; app_it != NULL; app_it = app_it->next) {
				PantherBackendApp* _tmp4_ = NULL;
				PantherBackendApp* app = NULL;
				_tmp4_ = _g_object_ref0 ((PantherBackendApp*) app_it->data);
				app = _tmp4_;
				{
					PantherBackendApp* _tmp5_ = NULL;
					_tmp5_ = app;
					panther_widgets_category_view_add_app (self, _tmp5_);
					_g_object_unref0 (app);
				}
			}
		}
	} else {
		const gchar* _tmp6_ = NULL;
		_tmp6_ = category;
		if (g_strcmp0 (_tmp6_, "Saved") == 0) {
			{
				GeeArrayList* _app_list = NULL;
				PantherPantherView* _tmp7_ = NULL;
				GeeArrayList* _tmp8_ = NULL;
				GeeArrayList* _tmp9_ = NULL;
				gint _app_size = 0;
				GeeArrayList* _tmp10_ = NULL;
				gint _tmp11_ = 0;
				gint _tmp12_ = 0;
				gint _app_index = 0;
				_tmp7_ = self->priv->view;
				_tmp8_ = _tmp7_->saved_apps;
				_tmp9_ = _g_object_ref0 (_tmp8_);
				_app_list = _tmp9_;
				_tmp10_ = _app_list;
				_tmp11_ = gee_abstract_collection_get_size ((GeeCollection*) _tmp10_);
				_tmp12_ = _tmp11_;
				_app_size = _tmp12_;
				_app_index = -1;
				while (TRUE) {
					gint _tmp13_ = 0;
					gint _tmp14_ = 0;
					gint _tmp15_ = 0;
					PantherBackendApp* app = NULL;
					GeeArrayList* _tmp16_ = NULL;
					gint _tmp17_ = 0;
					gpointer _tmp18_ = NULL;
					PantherBackendApp* _tmp19_ = NULL;
					_tmp13_ = _app_index;
					_app_index = _tmp13_ + 1;
					_tmp14_ = _app_index;
					_tmp15_ = _app_size;
					if (!(_tmp14_ < _tmp15_)) {
						break;
					}
					_tmp16_ = _app_list;
					_tmp17_ = _app_index;
					_tmp18_ = gee_abstract_list_get ((GeeAbstractList*) _tmp16_, _tmp17_);
					app = (PantherBackendApp*) _tmp18_;
					_tmp19_ = app;
					panther_widgets_category_view_add_app (self, _tmp19_);
					_g_object_unref0 (app);
				}
				_g_object_unref0 (_app_list);
			}
		} else {
			{
				GeeArrayList* _app_list = NULL;
				PantherPantherView* _tmp20_ = NULL;
				GeeHashMap* _tmp21_ = NULL;
				const gchar* _tmp22_ = NULL;
				gpointer _tmp23_ = NULL;
				gint _app_size = 0;
				GeeArrayList* _tmp24_ = NULL;
				gint _tmp25_ = 0;
				gint _tmp26_ = 0;
				gint _app_index = 0;
				_tmp20_ = self->priv->view;
				_tmp21_ = _tmp20_->apps;
				_tmp22_ = category;
				_tmp23_ = gee_abstract_map_get ((GeeAbstractMap*) _tmp21_, _tmp22_);
				_app_list = (GeeArrayList*) _tmp23_;
				_tmp24_ = _app_list;
				_tmp25_ = gee_abstract_collection_get_size ((GeeCollection*) _tmp24_);
				_tmp26_ = _tmp25_;
				_app_size = _tmp26_;
				_app_index = -1;
				while (TRUE) {
					gint _tmp27_ = 0;
					gint _tmp28_ = 0;
					gint _tmp29_ = 0;
					PantherBackendApp* app = NULL;
					GeeArrayList* _tmp30_ = NULL;
					gint _tmp31_ = 0;
					gpointer _tmp32_ = NULL;
					PantherBackendApp* _tmp33_ = NULL;
					_tmp27_ = _app_index;
					_app_index = _tmp27_ + 1;
					_tmp28_ = _app_index;
					_tmp29_ = _app_size;
					if (!(_tmp28_ < _tmp29_)) {
						break;
					}
					_tmp30_ = _app_list;
					_tmp31_ = _app_index;
					_tmp32_ = gee_abstract_list_get ((GeeAbstractList*) _tmp30_, _tmp31_);
					app = (PantherBackendApp*) _tmp32_;
					_tmp33_ = app;
					panther_widgets_category_view_add_app (self, _tmp33_);
					_g_object_unref0 (app);
				}
				_g_object_unref0 (_app_list);
			}
		}
	}
	self->priv->current_position = 0;
}


static void panther_widgets_category_view_class_init (PantherWidgetsCategoryViewClass * klass) {
	panther_widgets_category_view_parent_class = g_type_class_peek_parent (klass);
	g_type_class_add_private (klass, sizeof (PantherWidgetsCategoryViewPrivate));
	G_OBJECT_CLASS (klass)->finalize = panther_widgets_category_view_finalize;
}


static void panther_widgets_category_view_instance_init (PantherWidgetsCategoryView * self) {
	GeeHashMap* _tmp0_ = NULL;
	self->priv = PANTHER_WIDGETS_CATEGORY_VIEW_GET_PRIVATE (self);
	self->priv->current_position = 0;
	_tmp0_ = gee_hash_map_new (G_TYPE_INT, NULL, NULL, G_TYPE_STRING, (GBoxedCopyFunc) g_strdup, g_free, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL);
	self->category_ids = _tmp0_;
}


static void panther_widgets_category_view_finalize (GObject* obj) {
	PantherWidgetsCategoryView * self;
	self = G_TYPE_CHECK_INSTANCE_CAST (obj, PANTHER_WIDGETS_TYPE_CATEGORY_VIEW, PantherWidgetsCategoryView);
	_g_object_unref0 (self->priv->container);
	_g_object_unref0 (self->category_switcher);
	_g_object_unref0 (self->user_view);
	_g_object_unref0 (self->separator);
	_g_object_unref0 (self->app_view);
	_g_object_unref0 (self->priv->view);
	_g_object_unref0 (self->category_ids);
	G_OBJECT_CLASS (panther_widgets_category_view_parent_class)->finalize (obj);
}


GType panther_widgets_category_view_get_type (void) {
	static volatile gsize panther_widgets_category_view_type_id__volatile = 0;
	if (g_once_init_enter (&panther_widgets_category_view_type_id__volatile)) {
		static const GTypeInfo g_define_type_info = { sizeof (PantherWidgetsCategoryViewClass), (GBaseInitFunc) NULL, (GBaseFinalizeFunc) NULL, (GClassInitFunc) panther_widgets_category_view_class_init, (GClassFinalizeFunc) NULL, NULL, sizeof (PantherWidgetsCategoryView), 0, (GInstanceInitFunc) panther_widgets_category_view_instance_init, NULL };
		GType panther_widgets_category_view_type_id;
		panther_widgets_category_view_type_id = g_type_register_static (gtk_event_box_get_type (), "PantherWidgetsCategoryView", &g_define_type_info, 0);
		g_once_init_leave (&panther_widgets_category_view_type_id__volatile, panther_widgets_category_view_type_id);
	}
	return panther_widgets_category_view_type_id__volatile;
}



