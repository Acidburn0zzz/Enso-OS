/* DBusService.c generated by valac 0.30.1, the Vala compiler
 * generated from DBusService.vala, do not modify */

/* -*- Mode: vala; indent-tabs-mode: nil; tab-width: 4 -*-*/
/*  */
/*  Copyright (C) 2012 Panther Developers*/
/* */
/*  This program is free software: you can redistribute it and/or modify*/
/*  it under the terms of the GNU General Public License as published by*/
/*  the Free Software Foundation, either version 3 of the License, or*/
/*  (at your option) any later version.*/
/* */
/*  This program is distributed in the hope that it will be useful,*/
/*  but WITHOUT ANY WARRANTY; without even the implied warranty of*/
/*  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the*/
/*  GNU General Public License for more details.*/
/* */
/*  You should have received a copy of the GNU General Public License*/
/*  along with this program.  If not, see <http://www.gnu.org/licenses/>.*/

#include <glib.h>
#include <glib-object.h>
#include <gio/gio.h>
#include <gtk/gtk.h>
#include <stdlib.h>
#include <string.h>


#define PANTHER_TYPE_DBUS_SERVICE (panther_dbus_service_get_type ())
#define PANTHER_DBUS_SERVICE(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), PANTHER_TYPE_DBUS_SERVICE, PantherDBusService))
#define PANTHER_DBUS_SERVICE_CLASS(klass) (G_TYPE_CHECK_CLASS_CAST ((klass), PANTHER_TYPE_DBUS_SERVICE, PantherDBusServiceClass))
#define PANTHER_IS_DBUS_SERVICE(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), PANTHER_TYPE_DBUS_SERVICE))
#define PANTHER_IS_DBUS_SERVICE_CLASS(klass) (G_TYPE_CHECK_CLASS_TYPE ((klass), PANTHER_TYPE_DBUS_SERVICE))
#define PANTHER_DBUS_SERVICE_GET_CLASS(obj) (G_TYPE_INSTANCE_GET_CLASS ((obj), PANTHER_TYPE_DBUS_SERVICE, PantherDBusServiceClass))

typedef struct _PantherDBusService PantherDBusService;
typedef struct _PantherDBusServiceClass PantherDBusServiceClass;
typedef struct _PantherDBusServicePrivate PantherDBusServicePrivate;

#define PANTHER_DBUS_SERVICE_TYPE_SERVICE (panther_dbus_service_service_get_type ())
#define PANTHER_DBUS_SERVICE_SERVICE(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), PANTHER_DBUS_SERVICE_TYPE_SERVICE, PantherDBusServiceService))
#define PANTHER_DBUS_SERVICE_SERVICE_CLASS(klass) (G_TYPE_CHECK_CLASS_CAST ((klass), PANTHER_DBUS_SERVICE_TYPE_SERVICE, PantherDBusServiceServiceClass))
#define PANTHER_DBUS_SERVICE_IS_SERVICE(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), PANTHER_DBUS_SERVICE_TYPE_SERVICE))
#define PANTHER_DBUS_SERVICE_IS_SERVICE_CLASS(klass) (G_TYPE_CHECK_CLASS_TYPE ((klass), PANTHER_DBUS_SERVICE_TYPE_SERVICE))
#define PANTHER_DBUS_SERVICE_SERVICE_GET_CLASS(obj) (G_TYPE_INSTANCE_GET_CLASS ((obj), PANTHER_DBUS_SERVICE_TYPE_SERVICE, PantherDBusServiceServiceClass))

typedef struct _PantherDBusServiceService PantherDBusServiceService;
typedef struct _PantherDBusServiceServiceClass PantherDBusServiceServiceClass;
#define _g_object_unref0(var) ((var == NULL) ? NULL : (var = (g_object_unref (var), NULL)))

#define PANTHER_TYPE_PANTHER_VIEW (panther_panther_view_get_type ())
#define PANTHER_PANTHER_VIEW(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), PANTHER_TYPE_PANTHER_VIEW, PantherPantherView))
#define PANTHER_PANTHER_VIEW_CLASS(klass) (G_TYPE_CHECK_CLASS_CAST ((klass), PANTHER_TYPE_PANTHER_VIEW, PantherPantherViewClass))
#define PANTHER_IS_PANTHER_VIEW(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), PANTHER_TYPE_PANTHER_VIEW))
#define PANTHER_IS_PANTHER_VIEW_CLASS(klass) (G_TYPE_CHECK_CLASS_TYPE ((klass), PANTHER_TYPE_PANTHER_VIEW))
#define PANTHER_PANTHER_VIEW_GET_CLASS(obj) (G_TYPE_INSTANCE_GET_CLASS ((obj), PANTHER_TYPE_PANTHER_VIEW, PantherPantherViewClass))

typedef struct _PantherPantherView PantherPantherView;
typedef struct _PantherPantherViewClass PantherPantherViewClass;
typedef struct _Block2Data Block2Data;
#define _g_error_free0(var) ((var == NULL) ? NULL : (var = (g_error_free (var), NULL)))
typedef struct _PantherDBusServiceServicePrivate PantherDBusServiceServicePrivate;
#define _g_free0(var) (var = (g_free (var), NULL))

struct _PantherDBusService {
	GObject parent_instance;
	PantherDBusServicePrivate * priv;
};

struct _PantherDBusServiceClass {
	GObjectClass parent_class;
};

struct _PantherDBusServicePrivate {
	PantherDBusServiceService* service;
};

struct _Block2Data {
	int _ref_count_;
	PantherDBusService* self;
	PantherPantherView* view;
};

struct _PantherDBusServiceService {
	GObject parent_instance;
	PantherDBusServiceServicePrivate * priv;
};

struct _PantherDBusServiceServiceClass {
	GObjectClass parent_class;
};

struct _PantherDBusServiceServicePrivate {
	GtkWidget* view;
};


static gpointer panther_dbus_service_parent_class = NULL;
static gpointer panther_dbus_service_service_parent_class = NULL;

GType panther_dbus_service_get_type (void) G_GNUC_CONST;
static GType panther_dbus_service_service_get_type (void) G_GNUC_CONST G_GNUC_UNUSED;
static guint panther_dbus_service_service_register_object (void* object, GDBusConnection* connection, const gchar* path, GError** error);
#define PANTHER_DBUS_SERVICE_GET_PRIVATE(o) (G_TYPE_INSTANCE_GET_PRIVATE ((o), PANTHER_TYPE_DBUS_SERVICE, PantherDBusServicePrivate))
enum  {
	PANTHER_DBUS_SERVICE_DUMMY_PROPERTY
};
GType panther_panther_view_get_type (void) G_GNUC_CONST;
PantherDBusService* panther_dbus_service_new (PantherPantherView* view);
PantherDBusService* panther_dbus_service_construct (GType object_type, PantherPantherView* view);
static Block2Data* block2_data_ref (Block2Data* _data2_);
static void block2_data_unref (void * _userdata_);
static void __lambda67_ (Block2Data* _data2_, GDBusConnection* conn);
static void panther_dbus_service_on_bus_aquired (PantherDBusService* self, GDBusConnection* connection, PantherPantherView* view);
static void ___lambda67__gbus_acquired_callback (GDBusConnection* connection, const gchar* name, gpointer self);
static void panther_dbus_service_name_acquired_handler (PantherDBusService* self, GDBusConnection* connection, const gchar* name);
static void _panther_dbus_service_name_acquired_handler_gbus_name_acquired_callback (GDBusConnection* connection, const gchar* name, gpointer self);
static void __lambda68_ (PantherDBusService* self);
static void ___lambda68__gbus_name_lost_callback (GDBusConnection* connection, const gchar* name, gpointer self);
static PantherDBusServiceService* panther_dbus_service_service_new (GtkWidget* view);
static PantherDBusServiceService* panther_dbus_service_service_construct (GType object_type, GtkWidget* view);
static void panther_dbus_service_service_on_view_visibility_change (PantherDBusServiceService* self);
#define PANTHER_DBUS_SERVICE_SERVICE_GET_PRIVATE(o) (G_TYPE_INSTANCE_GET_PRIVATE ((o), PANTHER_DBUS_SERVICE_TYPE_SERVICE, PantherDBusServiceServicePrivate))
enum  {
	PANTHER_DBUS_SERVICE_SERVICE_DUMMY_PROPERTY
};
static void _panther_dbus_service_service_on_view_visibility_change_gtk_widget_show (GtkWidget* _sender, gpointer self);
static void _panther_dbus_service_service_on_view_visibility_change_gtk_widget_hide (GtkWidget* _sender, gpointer self);
static void panther_dbus_service_service_finalize (GObject* obj);
static void panther_dbus_service_service_dbus_interface_method_call (GDBusConnection* connection, const gchar* sender, const gchar* object_path, const gchar* interface_name, const gchar* method_name, GVariant* parameters, GDBusMethodInvocation* invocation, gpointer user_data);
static GVariant* panther_dbus_service_service_dbus_interface_get_property (GDBusConnection* connection, const gchar* sender, const gchar* object_path, const gchar* interface_name, const gchar* property_name, GError** error, gpointer user_data);
static gboolean panther_dbus_service_service_dbus_interface_set_property (GDBusConnection* connection, const gchar* sender, const gchar* object_path, const gchar* interface_name, const gchar* property_name, GVariant* value, GError** error, gpointer user_data);
static void _dbus_panther_dbus_service_service_visibility_changed (GObject* _sender, gboolean launcher_visible, gpointer* _data);
static void _panther_dbus_service_service_unregister_object (gpointer user_data);
static void panther_dbus_service_finalize (GObject* obj);

static const GDBusMethodInfo * const _panther_dbus_service_service_dbus_method_info[] = {NULL};
static const GDBusArgInfo _panther_dbus_service_service_dbus_arg_info_visibility_changed_launcher_visible = {-1, "launcher_visible", "b"};
static const GDBusArgInfo * const _panther_dbus_service_service_dbus_arg_info_visibility_changed[] = {&_panther_dbus_service_service_dbus_arg_info_visibility_changed_launcher_visible, NULL};
static const GDBusSignalInfo _panther_dbus_service_service_dbus_signal_info_visibility_changed = {-1, "VisibilityChanged", (GDBusArgInfo **) (&_panther_dbus_service_service_dbus_arg_info_visibility_changed)};
static const GDBusSignalInfo * const _panther_dbus_service_service_dbus_signal_info[] = {&_panther_dbus_service_service_dbus_signal_info_visibility_changed, NULL};
static const GDBusPropertyInfo * const _panther_dbus_service_service_dbus_property_info[] = {NULL};
static const GDBusInterfaceInfo _panther_dbus_service_service_dbus_interface_info = {-1, "com.rastersoft.panther", (GDBusMethodInfo **) (&_panther_dbus_service_service_dbus_method_info), (GDBusSignalInfo **) (&_panther_dbus_service_service_dbus_signal_info), (GDBusPropertyInfo **) (&_panther_dbus_service_service_dbus_property_info)};
static const GDBusInterfaceVTable _panther_dbus_service_service_dbus_interface_vtable = {panther_dbus_service_service_dbus_interface_method_call, panther_dbus_service_service_dbus_interface_get_property, panther_dbus_service_service_dbus_interface_set_property};

static gpointer _g_object_ref0 (gpointer self) {
	return self ? g_object_ref (self) : NULL;
}


static Block2Data* block2_data_ref (Block2Data* _data2_) {
	g_atomic_int_inc (&_data2_->_ref_count_);
	return _data2_;
}


static void block2_data_unref (void * _userdata_) {
	Block2Data* _data2_;
	_data2_ = (Block2Data*) _userdata_;
	if (g_atomic_int_dec_and_test (&_data2_->_ref_count_)) {
		PantherDBusService* self;
		self = _data2_->self;
		_g_object_unref0 (_data2_->view);
		_g_object_unref0 (self);
		g_slice_free (Block2Data, _data2_);
	}
}


static void __lambda67_ (Block2Data* _data2_, GDBusConnection* conn) {
	PantherDBusService* self;
	GDBusConnection* _tmp0_ = NULL;
	PantherPantherView* _tmp1_ = NULL;
	self = _data2_->self;
	g_return_if_fail (conn != NULL);
	_tmp0_ = conn;
	_tmp1_ = _data2_->view;
	panther_dbus_service_on_bus_aquired (self, _tmp0_, _tmp1_);
}


static void ___lambda67__gbus_acquired_callback (GDBusConnection* connection, const gchar* name, gpointer self) {
	__lambda67_ (self, connection);
}


static void _panther_dbus_service_name_acquired_handler_gbus_name_acquired_callback (GDBusConnection* connection, const gchar* name, gpointer self) {
	panther_dbus_service_name_acquired_handler ((PantherDBusService*) self, connection, name);
}


static void __lambda68_ (PantherDBusService* self) {
	g_critical ("DBusService.vala:49: Could not aquire service name");
}


static void ___lambda68__gbus_name_lost_callback (GDBusConnection* connection, const gchar* name, gpointer self) {
	__lambda68_ ((PantherDBusService*) self);
}


PantherDBusService* panther_dbus_service_construct (GType object_type, PantherPantherView* view) {
	PantherDBusService * self = NULL;
	Block2Data* _data2_;
	PantherPantherView* _tmp0_ = NULL;
	PantherPantherView* _tmp1_ = NULL;
	g_return_val_if_fail (view != NULL, NULL);
	_data2_ = g_slice_new0 (Block2Data);
	_data2_->_ref_count_ = 1;
	_tmp0_ = view;
	_tmp1_ = _g_object_ref0 (_tmp0_);
	_g_object_unref0 (_data2_->view);
	_data2_->view = _tmp1_;
	self = (PantherDBusService*) g_object_new (object_type, NULL);
	_data2_->self = g_object_ref (self);
	g_bus_own_name_with_closures (G_BUS_TYPE_SESSION, "com.rastersoft.panther", G_BUS_NAME_OWNER_FLAGS_NONE, (GClosure*) ((___lambda67__gbus_acquired_callback == NULL) ? NULL : g_cclosure_new ((GCallback) ___lambda67__gbus_acquired_callback, block2_data_ref (_data2_), block2_data_unref)), (GClosure*) ((_panther_dbus_service_name_acquired_handler_gbus_name_acquired_callback == NULL) ? NULL : g_cclosure_new ((GCallback) _panther_dbus_service_name_acquired_handler_gbus_name_acquired_callback, g_object_ref (self), g_object_unref)), (GClosure*) ((___lambda68__gbus_name_lost_callback == NULL) ? NULL : g_cclosure_new ((GCallback) ___lambda68__gbus_name_lost_callback, g_object_ref (self), g_object_unref)));
	block2_data_unref (_data2_);
	_data2_ = NULL;
	return self;
}


PantherDBusService* panther_dbus_service_new (PantherPantherView* view) {
	return panther_dbus_service_construct (PANTHER_TYPE_DBUS_SERVICE, view);
}


static void panther_dbus_service_on_bus_aquired (PantherDBusService* self, GDBusConnection* connection, PantherPantherView* view) {
	GError * _inner_error_ = NULL;
	g_return_if_fail (self != NULL);
	g_return_if_fail (connection != NULL);
	g_return_if_fail (view != NULL);
	{
		PantherPantherView* _tmp0_ = NULL;
		PantherDBusServiceService* _tmp1_ = NULL;
		GDBusConnection* _tmp2_ = NULL;
		PantherDBusServiceService* _tmp3_ = NULL;
		_tmp0_ = view;
		_tmp1_ = panther_dbus_service_service_new ((GtkWidget*) _tmp0_);
		_g_object_unref0 (self->priv->service);
		self->priv->service = _tmp1_;
		_tmp2_ = connection;
		_tmp3_ = self->priv->service;
		panther_dbus_service_service_register_object (_tmp3_, _tmp2_, "/com/rastersoft/panther", &_inner_error_);
		if (G_UNLIKELY (_inner_error_ != NULL)) {
			if (_inner_error_->domain == G_IO_ERROR) {
				goto __catch11_g_io_error;
			}
			g_critical ("file %s: line %d: unexpected error: %s (%s, %d)", __FILE__, __LINE__, _inner_error_->message, g_quark_to_string (_inner_error_->domain), _inner_error_->code);
			g_clear_error (&_inner_error_);
			return;
		}
	}
	goto __finally11;
	__catch11_g_io_error:
	{
		GError* e = NULL;
		const gchar* _tmp4_ = NULL;
		e = _inner_error_;
		_inner_error_ = NULL;
		_tmp4_ = e->message;
		g_critical ("DBusService.vala:59: Could not register service: %s", _tmp4_);
		g_return_if_reached ();
		_g_error_free0 (e);
	}
	__finally11:
	if (G_UNLIKELY (_inner_error_ != NULL)) {
		g_critical ("file %s: line %d: uncaught error: %s (%s, %d)", __FILE__, __LINE__, _inner_error_->message, g_quark_to_string (_inner_error_->domain), _inner_error_->code);
		g_clear_error (&_inner_error_);
		return;
	}
}


static void panther_dbus_service_name_acquired_handler (PantherDBusService* self, GDBusConnection* connection, const gchar* name) {
	PantherDBusServiceService* _tmp0_ = NULL;
	PantherDBusServiceService* _tmp1_ = NULL;
	g_return_if_fail (self != NULL);
	g_return_if_fail (connection != NULL);
	g_return_if_fail (name != NULL);
	g_message ("DBusService.vala:65: Service registration suceeded");
	_tmp0_ = self->priv->service;
	g_return_if_fail (_tmp0_ != NULL);
	_tmp1_ = self->priv->service;
	panther_dbus_service_service_on_view_visibility_change (_tmp1_);
}


static void _panther_dbus_service_service_on_view_visibility_change_gtk_widget_show (GtkWidget* _sender, gpointer self) {
	panther_dbus_service_service_on_view_visibility_change ((PantherDBusServiceService*) self);
}


static void _panther_dbus_service_service_on_view_visibility_change_gtk_widget_hide (GtkWidget* _sender, gpointer self) {
	panther_dbus_service_service_on_view_visibility_change ((PantherDBusServiceService*) self);
}


static PantherDBusServiceService* panther_dbus_service_service_construct (GType object_type, GtkWidget* view) {
	PantherDBusServiceService * self = NULL;
	GtkWidget* _tmp0_ = NULL;
	GtkWidget* _tmp1_ = NULL;
	GtkWidget* _tmp2_ = NULL;
	GtkWidget* _tmp3_ = NULL;
	g_return_val_if_fail (view != NULL, NULL);
	self = (PantherDBusServiceService*) g_object_new (object_type, NULL);
	_tmp0_ = view;
	_tmp1_ = _g_object_ref0 (_tmp0_);
	_g_object_unref0 (self->priv->view);
	self->priv->view = _tmp1_;
	_tmp2_ = view;
	g_signal_connect_object (_tmp2_, "show", (GCallback) _panther_dbus_service_service_on_view_visibility_change_gtk_widget_show, self, 0);
	_tmp3_ = view;
	g_signal_connect_object (_tmp3_, "hide", (GCallback) _panther_dbus_service_service_on_view_visibility_change_gtk_widget_hide, self, 0);
	return self;
}


static PantherDBusServiceService* panther_dbus_service_service_new (GtkWidget* view) {
	return panther_dbus_service_service_construct (PANTHER_DBUS_SERVICE_TYPE_SERVICE, view);
}


static gchar* bool_to_string (gboolean self) {
	gchar* result = NULL;
	if (self) {
		gchar* _tmp0_ = NULL;
		_tmp0_ = g_strdup ("true");
		result = _tmp0_;
		return result;
	} else {
		gchar* _tmp1_ = NULL;
		_tmp1_ = g_strdup ("false");
		result = _tmp1_;
		return result;
	}
}


static void panther_dbus_service_service_on_view_visibility_change (PantherDBusServiceService* self) {
	GtkWidget* _tmp0_ = NULL;
	gboolean _tmp1_ = FALSE;
	gboolean _tmp2_ = FALSE;
	gchar* _tmp3_ = NULL;
	gchar* _tmp4_ = NULL;
	GtkWidget* _tmp5_ = NULL;
	gboolean _tmp6_ = FALSE;
	gboolean _tmp7_ = FALSE;
	g_return_if_fail (self != NULL);
	_tmp0_ = self->priv->view;
	_tmp1_ = gtk_widget_get_visible (_tmp0_);
	_tmp2_ = _tmp1_;
	_tmp3_ = bool_to_string (_tmp2_);
	_tmp4_ = _tmp3_;
	g_debug ("DBusService.vala:34: Visibility changed. Sending visible = %s over DBu" \
"s", _tmp4_);
	_g_free0 (_tmp4_);
	_tmp5_ = self->priv->view;
	_tmp6_ = gtk_widget_get_visible (_tmp5_);
	_tmp7_ = _tmp6_;
	g_signal_emit_by_name (self, "visibility-changed", _tmp7_);
}


static void panther_dbus_service_service_class_init (PantherDBusServiceServiceClass * klass) {
	panther_dbus_service_service_parent_class = g_type_class_peek_parent (klass);
	g_type_class_add_private (klass, sizeof (PantherDBusServiceServicePrivate));
	G_OBJECT_CLASS (klass)->finalize = panther_dbus_service_service_finalize;
	g_signal_new ("visibility_changed", PANTHER_DBUS_SERVICE_TYPE_SERVICE, G_SIGNAL_RUN_LAST, 0, NULL, NULL, g_cclosure_marshal_VOID__BOOLEAN, G_TYPE_NONE, 1, G_TYPE_BOOLEAN);
}


static void panther_dbus_service_service_instance_init (PantherDBusServiceService * self) {
	self->priv = PANTHER_DBUS_SERVICE_SERVICE_GET_PRIVATE (self);
	self->priv->view = NULL;
}


static void panther_dbus_service_service_finalize (GObject* obj) {
	PantherDBusServiceService * self;
	self = G_TYPE_CHECK_INSTANCE_CAST (obj, PANTHER_DBUS_SERVICE_TYPE_SERVICE, PantherDBusServiceService);
	_g_object_unref0 (self->priv->view);
	G_OBJECT_CLASS (panther_dbus_service_service_parent_class)->finalize (obj);
}


static GType panther_dbus_service_service_get_type (void) {
	static volatile gsize panther_dbus_service_service_type_id__volatile = 0;
	if (g_once_init_enter (&panther_dbus_service_service_type_id__volatile)) {
		static const GTypeInfo g_define_type_info = { sizeof (PantherDBusServiceServiceClass), (GBaseInitFunc) NULL, (GBaseFinalizeFunc) NULL, (GClassInitFunc) panther_dbus_service_service_class_init, (GClassFinalizeFunc) NULL, NULL, sizeof (PantherDBusServiceService), 0, (GInstanceInitFunc) panther_dbus_service_service_instance_init, NULL };
		GType panther_dbus_service_service_type_id;
		panther_dbus_service_service_type_id = g_type_register_static (G_TYPE_OBJECT, "PantherDBusServiceService", &g_define_type_info, 0);
		g_type_set_qdata (panther_dbus_service_service_type_id, g_quark_from_static_string ("vala-dbus-register-object"), (void*) panther_dbus_service_service_register_object);
		g_once_init_leave (&panther_dbus_service_service_type_id__volatile, panther_dbus_service_service_type_id);
	}
	return panther_dbus_service_service_type_id__volatile;
}


static void panther_dbus_service_service_dbus_interface_method_call (GDBusConnection* connection, const gchar* sender, const gchar* object_path, const gchar* interface_name, const gchar* method_name, GVariant* parameters, GDBusMethodInvocation* invocation, gpointer user_data) {
	gpointer* data;
	gpointer object;
	data = user_data;
	object = data[0];
	g_object_unref (invocation);
}


static GVariant* panther_dbus_service_service_dbus_interface_get_property (GDBusConnection* connection, const gchar* sender, const gchar* object_path, const gchar* interface_name, const gchar* property_name, GError** error, gpointer user_data) {
	gpointer* data;
	gpointer object;
	data = user_data;
	object = data[0];
	return NULL;
}


static gboolean panther_dbus_service_service_dbus_interface_set_property (GDBusConnection* connection, const gchar* sender, const gchar* object_path, const gchar* interface_name, const gchar* property_name, GVariant* value, GError** error, gpointer user_data) {
	gpointer* data;
	gpointer object;
	data = user_data;
	object = data[0];
	return FALSE;
}


static void _dbus_panther_dbus_service_service_visibility_changed (GObject* _sender, gboolean launcher_visible, gpointer* _data) {
	GDBusConnection * _connection;
	const gchar * _path;
	GVariant *_arguments;
	GVariantBuilder _arguments_builder;
	_connection = _data[1];
	_path = _data[2];
	g_variant_builder_init (&_arguments_builder, G_VARIANT_TYPE_TUPLE);
	g_variant_builder_add_value (&_arguments_builder, g_variant_new_boolean (launcher_visible));
	_arguments = g_variant_builder_end (&_arguments_builder);
	g_dbus_connection_emit_signal (_connection, NULL, _path, "com.rastersoft.panther", "VisibilityChanged", _arguments, NULL);
}


static guint panther_dbus_service_service_register_object (gpointer object, GDBusConnection* connection, const gchar* path, GError** error) {
	guint result;
	gpointer *data;
	data = g_new (gpointer, 3);
	data[0] = g_object_ref (object);
	data[1] = g_object_ref (connection);
	data[2] = g_strdup (path);
	result = g_dbus_connection_register_object (connection, path, (GDBusInterfaceInfo *) (&_panther_dbus_service_service_dbus_interface_info), &_panther_dbus_service_service_dbus_interface_vtable, data, _panther_dbus_service_service_unregister_object, error);
	if (!result) {
		return 0;
	}
	g_signal_connect (object, "visibility-changed", (GCallback) _dbus_panther_dbus_service_service_visibility_changed, data);
	return result;
}


static void _panther_dbus_service_service_unregister_object (gpointer user_data) {
	gpointer* data;
	data = user_data;
	g_signal_handlers_disconnect_by_func (data[0], _dbus_panther_dbus_service_service_visibility_changed, data);
	g_object_unref (data[0]);
	g_object_unref (data[1]);
	g_free (data[2]);
	g_free (data);
}


static void panther_dbus_service_class_init (PantherDBusServiceClass * klass) {
	panther_dbus_service_parent_class = g_type_class_peek_parent (klass);
	g_type_class_add_private (klass, sizeof (PantherDBusServicePrivate));
	G_OBJECT_CLASS (klass)->finalize = panther_dbus_service_finalize;
}


static void panther_dbus_service_instance_init (PantherDBusService * self) {
	self->priv = PANTHER_DBUS_SERVICE_GET_PRIVATE (self);
	self->priv->service = NULL;
}


static void panther_dbus_service_finalize (GObject* obj) {
	PantherDBusService * self;
	self = G_TYPE_CHECK_INSTANCE_CAST (obj, PANTHER_TYPE_DBUS_SERVICE, PantherDBusService);
	_g_object_unref0 (self->priv->service);
	G_OBJECT_CLASS (panther_dbus_service_parent_class)->finalize (obj);
}


GType panther_dbus_service_get_type (void) {
	static volatile gsize panther_dbus_service_type_id__volatile = 0;
	if (g_once_init_enter (&panther_dbus_service_type_id__volatile)) {
		static const GTypeInfo g_define_type_info = { sizeof (PantherDBusServiceClass), (GBaseInitFunc) NULL, (GBaseFinalizeFunc) NULL, (GClassInitFunc) panther_dbus_service_class_init, (GClassFinalizeFunc) NULL, NULL, sizeof (PantherDBusService), 0, (GInstanceInitFunc) panther_dbus_service_instance_init, NULL };
		GType panther_dbus_service_type_id;
		panther_dbus_service_type_id = g_type_register_static (G_TYPE_OBJECT, "PantherDBusService", &g_define_type_info, 0);
		g_once_init_leave (&panther_dbus_service_type_id__volatile, panther_dbus_service_type_id);
	}
	return panther_dbus_service_type_id__volatile;
}



