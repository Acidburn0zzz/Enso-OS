/* SynapseSearch.c generated by valac 0.30.1, the Vala compiler
 * generated from SynapseSearch.vala, do not modify */

/* -*- Mode: vala; indent-tabs-mode: nil; tab-width: 4 -*-*/
/**/
/*  Copyright (C) 2011-2012 Giulio Collura*/
/**/
/*  This program is free software: you can redistribute it and/or modify*/
/*  it under the terms of the GNU General Public License as published by*/
/*  the Free Software Foundation, either version 3 of the License, or*/
/*  (at your option) any later version.*/
/**/
/*  This program is distributed in the hope that it will be useful,*/
/*  but WITHOUT ANY WARRANTY; without even the implied warranty of*/
/*  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the*/
/*  GNU General Public License for more details.*/
/**/
/*  You should have received a copy of the GNU General Public License*/
/*  along with this program.  If not, see <http://www.gnu.org/licenses/>.*/
/**/

#include <glib.h>
#include <glib-object.h>
#include <gio/gio.h>
#include <gee.h>
#include <stdlib.h>
#include <string.h>
#include <gdk-pixbuf/gdk-pixbuf.h>
#include <libsoup/soup.h>


#define PANTHER_BACKEND_TYPE_SYNAPSE_SEARCH (panther_backend_synapse_search_get_type ())
#define PANTHER_BACKEND_SYNAPSE_SEARCH(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), PANTHER_BACKEND_TYPE_SYNAPSE_SEARCH, PantherBackendSynapseSearch))
#define PANTHER_BACKEND_SYNAPSE_SEARCH_CLASS(klass) (G_TYPE_CHECK_CLASS_CAST ((klass), PANTHER_BACKEND_TYPE_SYNAPSE_SEARCH, PantherBackendSynapseSearchClass))
#define PANTHER_BACKEND_IS_SYNAPSE_SEARCH(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), PANTHER_BACKEND_TYPE_SYNAPSE_SEARCH))
#define PANTHER_BACKEND_IS_SYNAPSE_SEARCH_CLASS(klass) (G_TYPE_CHECK_CLASS_TYPE ((klass), PANTHER_BACKEND_TYPE_SYNAPSE_SEARCH))
#define PANTHER_BACKEND_SYNAPSE_SEARCH_GET_CLASS(obj) (G_TYPE_INSTANCE_GET_CLASS ((obj), PANTHER_BACKEND_TYPE_SYNAPSE_SEARCH, PantherBackendSynapseSearchClass))

typedef struct _PantherBackendSynapseSearch PantherBackendSynapseSearch;
typedef struct _PantherBackendSynapseSearchClass PantherBackendSynapseSearchClass;
typedef struct _PantherBackendSynapseSearchPrivate PantherBackendSynapseSearchPrivate;

#define SYNAPSE_TYPE_CALCULATOR_PLUGIN (synapse_calculator_plugin_get_type ())
#define SYNAPSE_CALCULATOR_PLUGIN(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), SYNAPSE_TYPE_CALCULATOR_PLUGIN, SynapseCalculatorPlugin))
#define SYNAPSE_CALCULATOR_PLUGIN_CLASS(klass) (G_TYPE_CHECK_CLASS_CAST ((klass), SYNAPSE_TYPE_CALCULATOR_PLUGIN, SynapseCalculatorPluginClass))
#define SYNAPSE_IS_CALCULATOR_PLUGIN(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), SYNAPSE_TYPE_CALCULATOR_PLUGIN))
#define SYNAPSE_IS_CALCULATOR_PLUGIN_CLASS(klass) (G_TYPE_CHECK_CLASS_TYPE ((klass), SYNAPSE_TYPE_CALCULATOR_PLUGIN))
#define SYNAPSE_CALCULATOR_PLUGIN_GET_CLASS(obj) (G_TYPE_INSTANCE_GET_CLASS ((obj), SYNAPSE_TYPE_CALCULATOR_PLUGIN, SynapseCalculatorPluginClass))

typedef struct _SynapseCalculatorPlugin SynapseCalculatorPlugin;
typedef struct _SynapseCalculatorPluginClass SynapseCalculatorPluginClass;

#define SYNAPSE_TYPE_COMMAND_PLUGIN (synapse_command_plugin_get_type ())
#define SYNAPSE_COMMAND_PLUGIN(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), SYNAPSE_TYPE_COMMAND_PLUGIN, SynapseCommandPlugin))
#define SYNAPSE_COMMAND_PLUGIN_CLASS(klass) (G_TYPE_CHECK_CLASS_CAST ((klass), SYNAPSE_TYPE_COMMAND_PLUGIN, SynapseCommandPluginClass))
#define SYNAPSE_IS_COMMAND_PLUGIN(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), SYNAPSE_TYPE_COMMAND_PLUGIN))
#define SYNAPSE_IS_COMMAND_PLUGIN_CLASS(klass) (G_TYPE_CHECK_CLASS_TYPE ((klass), SYNAPSE_TYPE_COMMAND_PLUGIN))
#define SYNAPSE_COMMAND_PLUGIN_GET_CLASS(obj) (G_TYPE_INSTANCE_GET_CLASS ((obj), SYNAPSE_TYPE_COMMAND_PLUGIN, SynapseCommandPluginClass))

typedef struct _SynapseCommandPlugin SynapseCommandPlugin;
typedef struct _SynapseCommandPluginClass SynapseCommandPluginClass;

#define SYNAPSE_TYPE_DESKTOP_FILE_PLUGIN (synapse_desktop_file_plugin_get_type ())
#define SYNAPSE_DESKTOP_FILE_PLUGIN(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), SYNAPSE_TYPE_DESKTOP_FILE_PLUGIN, SynapseDesktopFilePlugin))
#define SYNAPSE_DESKTOP_FILE_PLUGIN_CLASS(klass) (G_TYPE_CHECK_CLASS_CAST ((klass), SYNAPSE_TYPE_DESKTOP_FILE_PLUGIN, SynapseDesktopFilePluginClass))
#define SYNAPSE_IS_DESKTOP_FILE_PLUGIN(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), SYNAPSE_TYPE_DESKTOP_FILE_PLUGIN))
#define SYNAPSE_IS_DESKTOP_FILE_PLUGIN_CLASS(klass) (G_TYPE_CHECK_CLASS_TYPE ((klass), SYNAPSE_TYPE_DESKTOP_FILE_PLUGIN))
#define SYNAPSE_DESKTOP_FILE_PLUGIN_GET_CLASS(obj) (G_TYPE_INSTANCE_GET_CLASS ((obj), SYNAPSE_TYPE_DESKTOP_FILE_PLUGIN, SynapseDesktopFilePluginClass))

typedef struct _SynapseDesktopFilePlugin SynapseDesktopFilePlugin;
typedef struct _SynapseDesktopFilePluginClass SynapseDesktopFilePluginClass;

#define SYNAPSE_TYPE_SYSTEM_MANAGEMENT_PLUGIN (synapse_system_management_plugin_get_type ())
#define SYNAPSE_SYSTEM_MANAGEMENT_PLUGIN(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), SYNAPSE_TYPE_SYSTEM_MANAGEMENT_PLUGIN, SynapseSystemManagementPlugin))
#define SYNAPSE_SYSTEM_MANAGEMENT_PLUGIN_CLASS(klass) (G_TYPE_CHECK_CLASS_CAST ((klass), SYNAPSE_TYPE_SYSTEM_MANAGEMENT_PLUGIN, SynapseSystemManagementPluginClass))
#define SYNAPSE_IS_SYSTEM_MANAGEMENT_PLUGIN(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), SYNAPSE_TYPE_SYSTEM_MANAGEMENT_PLUGIN))
#define SYNAPSE_IS_SYSTEM_MANAGEMENT_PLUGIN_CLASS(klass) (G_TYPE_CHECK_CLASS_TYPE ((klass), SYNAPSE_TYPE_SYSTEM_MANAGEMENT_PLUGIN))
#define SYNAPSE_SYSTEM_MANAGEMENT_PLUGIN_GET_CLASS(obj) (G_TYPE_INSTANCE_GET_CLASS ((obj), SYNAPSE_TYPE_SYSTEM_MANAGEMENT_PLUGIN, SynapseSystemManagementPluginClass))

typedef struct _SynapseSystemManagementPlugin SynapseSystemManagementPlugin;
typedef struct _SynapseSystemManagementPluginClass SynapseSystemManagementPluginClass;

#define SYNAPSE_TYPE_DATA_SINK (synapse_data_sink_get_type ())
#define SYNAPSE_DATA_SINK(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), SYNAPSE_TYPE_DATA_SINK, SynapseDataSink))
#define SYNAPSE_DATA_SINK_CLASS(klass) (G_TYPE_CHECK_CLASS_CAST ((klass), SYNAPSE_TYPE_DATA_SINK, SynapseDataSinkClass))
#define SYNAPSE_IS_DATA_SINK(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), SYNAPSE_TYPE_DATA_SINK))
#define SYNAPSE_IS_DATA_SINK_CLASS(klass) (G_TYPE_CHECK_CLASS_TYPE ((klass), SYNAPSE_TYPE_DATA_SINK))
#define SYNAPSE_DATA_SINK_GET_CLASS(obj) (G_TYPE_INSTANCE_GET_CLASS ((obj), SYNAPSE_TYPE_DATA_SINK, SynapseDataSinkClass))

typedef struct _SynapseDataSink SynapseDataSink;
typedef struct _SynapseDataSinkClass SynapseDataSinkClass;
#define _g_object_unref0(var) ((var == NULL) ? NULL : (var = (g_object_unref (var), NULL)))
#define _g_free0(var) (var = (g_free (var), NULL))

#define SYNAPSE_TYPE_SEARCH_PROVIDER (synapse_search_provider_get_type ())
#define SYNAPSE_SEARCH_PROVIDER(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), SYNAPSE_TYPE_SEARCH_PROVIDER, SynapseSearchProvider))
#define SYNAPSE_IS_SEARCH_PROVIDER(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), SYNAPSE_TYPE_SEARCH_PROVIDER))
#define SYNAPSE_SEARCH_PROVIDER_GET_INTERFACE(obj) (G_TYPE_INSTANCE_GET_INTERFACE ((obj), SYNAPSE_TYPE_SEARCH_PROVIDER, SynapseSearchProviderIface))

typedef struct _SynapseSearchProvider SynapseSearchProvider;
typedef struct _SynapseSearchProviderIface SynapseSearchProviderIface;

#define SYNAPSE_TYPE_QUERY_FLAGS (synapse_query_flags_get_type ())

#define SYNAPSE_TYPE_RESULT_SET (synapse_result_set_get_type ())
#define SYNAPSE_RESULT_SET(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), SYNAPSE_TYPE_RESULT_SET, SynapseResultSet))
#define SYNAPSE_RESULT_SET_CLASS(klass) (G_TYPE_CHECK_CLASS_CAST ((klass), SYNAPSE_TYPE_RESULT_SET, SynapseResultSetClass))
#define SYNAPSE_IS_RESULT_SET(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), SYNAPSE_TYPE_RESULT_SET))
#define SYNAPSE_IS_RESULT_SET_CLASS(klass) (G_TYPE_CHECK_CLASS_TYPE ((klass), SYNAPSE_TYPE_RESULT_SET))
#define SYNAPSE_RESULT_SET_GET_CLASS(obj) (G_TYPE_INSTANCE_GET_CLASS ((obj), SYNAPSE_TYPE_RESULT_SET, SynapseResultSetClass))

typedef struct _SynapseResultSet SynapseResultSet;
typedef struct _SynapseResultSetClass SynapseResultSetClass;

#define SYNAPSE_TYPE_MATCH (synapse_match_get_type ())
#define SYNAPSE_MATCH(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), SYNAPSE_TYPE_MATCH, SynapseMatch))
#define SYNAPSE_IS_MATCH(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), SYNAPSE_TYPE_MATCH))
#define SYNAPSE_MATCH_GET_INTERFACE(obj) (G_TYPE_INSTANCE_GET_INTERFACE ((obj), SYNAPSE_TYPE_MATCH, SynapseMatchIface))

typedef struct _SynapseMatch SynapseMatch;
typedef struct _SynapseMatchIface SynapseMatchIface;

#define SYNAPSE_TYPE_MATCH_TYPE (synapse_match_type_get_type ())
#define _g_error_free0(var) ((var == NULL) ? NULL : (var = (g_error_free (var), NULL)))
typedef struct _PantherBackendSynapseSearchSearchData PantherBackendSynapseSearchSearchData;

#define SYNAPSE_TYPE_URI_MATCH (synapse_uri_match_get_type ())
#define SYNAPSE_URI_MATCH(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), SYNAPSE_TYPE_URI_MATCH, SynapseUriMatch))
#define SYNAPSE_IS_URI_MATCH(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), SYNAPSE_TYPE_URI_MATCH))
#define SYNAPSE_URI_MATCH_GET_INTERFACE(obj) (G_TYPE_INSTANCE_GET_INTERFACE ((obj), SYNAPSE_TYPE_URI_MATCH, SynapseUriMatchIface))

typedef struct _SynapseUriMatch SynapseUriMatch;
typedef struct _SynapseUriMatchIface SynapseUriMatchIface;
#define __vala_SoupURI_free0(var) ((var == NULL) ? NULL : (var = (_vala_SoupURI_free (var), NULL)))
typedef struct _PantherBackendSynapseSearchGetFaviconForMatchData PantherBackendSynapseSearchGetFaviconForMatchData;

#define SYNAPSE_TYPE_MATCHER_FLAGS (synapse_matcher_flags_get_type ())
#define _g_match_info_free0(var) ((var == NULL) ? NULL : (var = (g_match_info_free (var), NULL)))
#define _g_string_free0(var) ((var == NULL) ? NULL : (var = (g_string_free (var, TRUE), NULL)))

struct _PantherBackendSynapseSearch {
	GObject parent_instance;
	PantherBackendSynapseSearchPrivate * priv;
};

struct _PantherBackendSynapseSearchClass {
	GObjectClass parent_class;
};

struct _PantherBackendSynapseSearchPrivate {
	GCancellable* current_search;
};

typedef enum  {
	SYNAPSE_QUERY_FLAGS_INCLUDE_REMOTE = 1 << 0,
	SYNAPSE_QUERY_FLAGS_UNCATEGORIZED = 1 << 1,
	SYNAPSE_QUERY_FLAGS_APPLICATIONS = 1 << 2,
	SYNAPSE_QUERY_FLAGS_ACTIONS = 1 << 3,
	SYNAPSE_QUERY_FLAGS_AUDIO = 1 << 4,
	SYNAPSE_QUERY_FLAGS_VIDEO = 1 << 5,
	SYNAPSE_QUERY_FLAGS_DOCUMENTS = 1 << 6,
	SYNAPSE_QUERY_FLAGS_IMAGES = 1 << 7,
	SYNAPSE_QUERY_FLAGS_FILES = ((SYNAPSE_QUERY_FLAGS_AUDIO | SYNAPSE_QUERY_FLAGS_VIDEO) | SYNAPSE_QUERY_FLAGS_DOCUMENTS) | SYNAPSE_QUERY_FLAGS_IMAGES,
	SYNAPSE_QUERY_FLAGS_PLACES = 1 << 8,
	SYNAPSE_QUERY_FLAGS_INTERNET = 1 << 9,
	SYNAPSE_QUERY_FLAGS_TEXT = 1 << 10,
	SYNAPSE_QUERY_FLAGS_CONTACTS = 1 << 11,
	SYNAPSE_QUERY_FLAGS_ALL = 0xFFFFFFFFLL,
	SYNAPSE_QUERY_FLAGS_LOCAL_CONTENT = SYNAPSE_QUERY_FLAGS_ALL ^ SYNAPSE_QUERY_FLAGS_INCLUDE_REMOTE
} SynapseQueryFlags;

typedef enum  {
	SYNAPSE_MATCH_TYPE_UNKNOWN = 0,
	SYNAPSE_MATCH_TYPE_TEXT,
	SYNAPSE_MATCH_TYPE_APPLICATION,
	SYNAPSE_MATCH_TYPE_GENERIC_URI,
	SYNAPSE_MATCH_TYPE_ACTION,
	SYNAPSE_MATCH_TYPE_SEARCH,
	SYNAPSE_MATCH_TYPE_CONTACT
} SynapseMatchType;

struct _SynapseMatchIface {
	GTypeInterface parent_iface;
	void (*execute) (SynapseMatch* self, SynapseMatch* match);
	void (*execute_with_target) (SynapseMatch* self, SynapseMatch* source, SynapseMatch* target);
	gboolean (*needs_target) (SynapseMatch* self);
	SynapseQueryFlags (*target_flags) (SynapseMatch* self);
	const gchar* (*get_title) (SynapseMatch* self);
	void (*set_title) (SynapseMatch* self, const gchar* value);
	const gchar* (*get_description) (SynapseMatch* self);
	void (*set_description) (SynapseMatch* self, const gchar* value);
	const gchar* (*get_icon_name) (SynapseMatch* self);
	void (*set_icon_name) (SynapseMatch* self, const gchar* value);
	gboolean (*get_has_thumbnail) (SynapseMatch* self);
	void (*set_has_thumbnail) (SynapseMatch* self, gboolean value);
	const gchar* (*get_thumbnail_path) (SynapseMatch* self);
	void (*set_thumbnail_path) (SynapseMatch* self, const gchar* value);
	SynapseMatchType (*get_match_type) (SynapseMatch* self);
	void (*set_match_type) (SynapseMatch* self, SynapseMatchType value);
};

typedef enum  {
	SYNAPSE_SEARCH_ERROR_SEARCH_CANCELLED,
	SYNAPSE_SEARCH_ERROR_UNKNOWN_ERROR
} SynapseSearchError;
#define SYNAPSE_SEARCH_ERROR synapse_search_error_quark ()
struct _SynapseSearchProviderIface {
	GTypeInterface parent_iface;
	void (*search) (SynapseSearchProvider* self, const gchar* query, SynapseQueryFlags flags, SynapseResultSet* dest_result_set, GCancellable* cancellable, GAsyncReadyCallback _callback_, gpointer _user_data_);
	GeeList* (*search_finish) (SynapseSearchProvider* self, GAsyncResult* _res_, GError** error);
};

struct _PantherBackendSynapseSearchSearchData {
	int _state_;
	GObject* _source_object_;
	GAsyncResult* _res_;
	GSimpleAsyncResult* _async_result;
	PantherBackendSynapseSearch* self;
	gchar* text;
	SynapseSearchProvider* provider;
	GeeList* result;
	GCancellable* _tmp0_;
	GCancellable* _tmp1_;
	SynapseSearchProvider* _tmp2_;
	SynapseDataSink* _tmp3_;
	SynapseResultSet* results;
	SynapseResultSet* _tmp5_;
	GeeList* _tmp6_;
	SynapseSearchProvider* _tmp7_;
	const gchar* _tmp8_;
	GCancellable* _tmp9_;
	GeeList* _tmp10_;
	GeeList* _tmp11_;
	GError* e;
	GError* _tmp12_;
	const gchar* _tmp13_;
	GError * _inner_error_;
};

struct _SynapseUriMatchIface {
	GTypeInterface parent_iface;
	const gchar* (*get_uri) (SynapseUriMatch* self);
	void (*set_uri) (SynapseUriMatch* self, const gchar* value);
	SynapseQueryFlags (*get_file_type) (SynapseUriMatch* self);
	void (*set_file_type) (SynapseUriMatch* self, SynapseQueryFlags value);
	const gchar* (*get_mime_type) (SynapseUriMatch* self);
	void (*set_mime_type) (SynapseUriMatch* self, const gchar* value);
};

struct _PantherBackendSynapseSearchGetFaviconForMatchData {
	int _state_;
	GObject* _source_object_;
	GAsyncResult* _res_;
	GSimpleAsyncResult* _async_result;
	SynapseUriMatch* match;
	gint size;
	GCancellable* cancellable;
	GdkPixbuf* result;
	SoupURI* soup_uri;
	SynapseUriMatch* _tmp0_;
	const gchar* _tmp1_;
	const gchar* _tmp2_;
	SoupURI* _tmp3_;
	SoupURI* _tmp4_;
	const gchar* _tmp5_;
	gboolean _tmp6_;
	GdkPixbuf* pixbuf;
	GeeHashMap* _tmp7_;
	SoupURI* _tmp8_;
	const gchar* _tmp9_;
	gboolean _tmp10_;
	GeeHashMap* _tmp11_;
	SoupURI* _tmp12_;
	const gchar* _tmp13_;
	gpointer _tmp14_;
	gchar* url;
	SoupURI* _tmp15_;
	const gchar* _tmp16_;
	SoupURI* _tmp17_;
	const gchar* _tmp18_;
	gchar* _tmp19_;
	SoupMessage* msg;
	const gchar* _tmp20_;
	SoupMessage* _tmp21_;
	SoupSession* session;
	SoupSession* _tmp22_;
	SoupSession* _tmp23_;
	GInputStream* stream;
	SoupSession* _tmp24_;
	SoupMessage* _tmp25_;
	GCancellable* _tmp26_;
	GInputStream* _tmp27_;
	GInputStream* _tmp28_;
	GdkPixbuf* _tmp29_;
	GInputStream* _tmp30_;
	GCancellable* _tmp31_;
	GdkPixbuf* _tmp32_;
	GdkPixbuf* _tmp33_;
	GdkPixbuf* _tmp34_;
	gint _tmp35_;
	gint _tmp36_;
	gint _tmp37_;
	GError* e;
	GCancellable* _tmp38_;
	gboolean _tmp39_;
	GeeHashMap* _tmp40_;
	SoupURI* _tmp41_;
	const gchar* _tmp42_;
	GdkPixbuf* _tmp43_;
	GError * _inner_error_;
};

typedef enum  {
	SYNAPSE_MATCHER_FLAGS_NO_REVERSED = 1 << 0,
	SYNAPSE_MATCHER_FLAGS_NO_SUBSTRING = 1 << 1,
	SYNAPSE_MATCHER_FLAGS_NO_PARTIAL = 1 << 2,
	SYNAPSE_MATCHER_FLAGS_NO_FUZZY = 1 << 3
} SynapseMatcherFlags;


static gpointer panther_backend_synapse_search_parent_class = NULL;
static GType* panther_backend_synapse_search_plugins;
static gint panther_backend_synapse_search_plugins_length1;
static GType* panther_backend_synapse_search_plugins = NULL;
static gint panther_backend_synapse_search_plugins_length1 = 0;
static gint _panther_backend_synapse_search_plugins_size_ = 0;
static SynapseDataSink* panther_backend_synapse_search_sink;
static SynapseDataSink* panther_backend_synapse_search_sink = NULL;
static GeeHashMap* panther_backend_synapse_search_favicon_cache;
static GeeHashMap* panther_backend_synapse_search_favicon_cache = NULL;

GType panther_backend_synapse_search_get_type (void) G_GNUC_CONST;
#define PANTHER_BACKEND_SYNAPSE_SEARCH_GET_PRIVATE(o) (G_TYPE_INSTANCE_GET_PRIVATE ((o), PANTHER_BACKEND_TYPE_SYNAPSE_SEARCH, PantherBackendSynapseSearchPrivate))
enum  {
	PANTHER_BACKEND_SYNAPSE_SEARCH_DUMMY_PROPERTY
};
GType synapse_calculator_plugin_get_type (void) G_GNUC_CONST;
GType synapse_command_plugin_get_type (void) G_GNUC_CONST;
GType synapse_desktop_file_plugin_get_type (void) G_GNUC_CONST;
GType synapse_system_management_plugin_get_type (void) G_GNUC_CONST;
GType synapse_data_sink_get_type (void) G_GNUC_CONST;
PantherBackendSynapseSearch* panther_backend_synapse_search_new (void);
PantherBackendSynapseSearch* panther_backend_synapse_search_construct (GType object_type);
SynapseDataSink* synapse_data_sink_new (void);
SynapseDataSink* synapse_data_sink_construct (GType object_type);
void synapse_data_sink_register_static_plugin (SynapseDataSink* self, GType plugin_type);
static void panther_backend_synapse_search_search_data_free (gpointer _data);
GType synapse_query_flags_get_type (void) G_GNUC_CONST;
GType synapse_result_set_get_type (void) G_GNUC_CONST;
GType synapse_match_type_get_type (void) G_GNUC_CONST;
GType synapse_match_get_type (void) G_GNUC_CONST;
GQuark synapse_search_error_quark (void);
GType synapse_search_provider_get_type (void) G_GNUC_CONST;
void panther_backend_synapse_search_search (PantherBackendSynapseSearch* self, const gchar* text, SynapseSearchProvider* provider, GAsyncReadyCallback _callback_, gpointer _user_data_);
GeeList* panther_backend_synapse_search_search_finish (PantherBackendSynapseSearch* self, GAsyncResult* _res_);
static gboolean panther_backend_synapse_search_search_co (PantherBackendSynapseSearchSearchData* _data_);
SynapseResultSet* synapse_result_set_new (void);
SynapseResultSet* synapse_result_set_construct (GType object_type);
void synapse_search_provider_search (SynapseSearchProvider* self, const gchar* query, SynapseQueryFlags flags, SynapseResultSet* dest_result_set, GCancellable* cancellable, GAsyncReadyCallback _callback_, gpointer _user_data_);
GeeList* synapse_search_provider_search_finish (SynapseSearchProvider* self, GAsyncResult* _res_, GError** error);
static void panther_backend_synapse_search_search_ready (GObject* source_object, GAsyncResult* _res_, gpointer _user_data_);
GeeList* panther_backend_synapse_search_find_actions_for_match (SynapseMatch* match);
GeeList* synapse_data_sink_find_actions_for_match (SynapseDataSink* self, SynapseMatch* match, const gchar* query, SynapseQueryFlags flags);
static void panther_backend_synapse_search_get_favicon_for_match_data_free (gpointer _data);
GType synapse_uri_match_get_type (void) G_GNUC_CONST;
void panther_backend_synapse_search_get_favicon_for_match (SynapseUriMatch* match, gint size, GCancellable* cancellable, GAsyncReadyCallback _callback_, gpointer _user_data_);
GdkPixbuf* panther_backend_synapse_search_get_favicon_for_match_finish (GAsyncResult* _res_);
static gboolean panther_backend_synapse_search_get_favicon_for_match_co (PantherBackendSynapseSearchGetFaviconForMatchData* _data_);
const gchar* synapse_uri_match_get_uri (SynapseUriMatch* self);
static void _vala_SoupURI_free (SoupURI* self);
static void panther_backend_synapse_search_get_favicon_for_match_ready (GObject* source_object, GAsyncResult* _res_, gpointer _user_data_);
gchar* panther_backend_synapse_search_markup_string_with_search (const gchar* text, const gchar* pattern);
GType synapse_matcher_flags_get_type (void) G_GNUC_CONST;
GeeList* synapse_query_get_matchers_for_query (const gchar* query, SynapseMatcherFlags match_flags, GRegexCompileFlags flags);
static void panther_backend_synapse_search_finalize (GObject* obj);


PantherBackendSynapseSearch* panther_backend_synapse_search_construct (GType object_type) {
	PantherBackendSynapseSearch * self = NULL;
	SynapseDataSink* _tmp0_ = NULL;
	self = (PantherBackendSynapseSearch*) g_object_new (object_type, NULL);
	_tmp0_ = panther_backend_synapse_search_sink;
	if (_tmp0_ == NULL) {
		SynapseDataSink* _tmp1_ = NULL;
		GType* _tmp2_ = NULL;
		gint _tmp2__length1 = 0;
		GeeHashMap* _tmp5_ = NULL;
		_tmp1_ = synapse_data_sink_new ();
		_g_object_unref0 (panther_backend_synapse_search_sink);
		panther_backend_synapse_search_sink = _tmp1_;
		_tmp2_ = panther_backend_synapse_search_plugins;
		_tmp2__length1 = panther_backend_synapse_search_plugins_length1;
		{
			GType* plugin_collection = NULL;
			gint plugin_collection_length1 = 0;
			gint _plugin_collection_size_ = 0;
			gint plugin_it = 0;
			plugin_collection = _tmp2_;
			plugin_collection_length1 = _tmp2__length1;
			for (plugin_it = 0; plugin_it < _tmp2__length1; plugin_it = plugin_it + 1) {
				GType plugin = 0UL;
				plugin = plugin_collection[plugin_it];
				{
					SynapseDataSink* _tmp3_ = NULL;
					GType _tmp4_ = 0UL;
					_tmp3_ = panther_backend_synapse_search_sink;
					_tmp4_ = plugin;
					synapse_data_sink_register_static_plugin (_tmp3_, _tmp4_);
				}
			}
		}
		_tmp5_ = gee_hash_map_new (G_TYPE_STRING, (GBoxedCopyFunc) g_strdup, g_free, GDK_TYPE_PIXBUF, (GBoxedCopyFunc) g_object_ref, g_object_unref, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL);
		_g_object_unref0 (panther_backend_synapse_search_favicon_cache);
		panther_backend_synapse_search_favicon_cache = _tmp5_;
	}
	return self;
}


PantherBackendSynapseSearch* panther_backend_synapse_search_new (void) {
	return panther_backend_synapse_search_construct (PANTHER_BACKEND_TYPE_SYNAPSE_SEARCH);
}


static void panther_backend_synapse_search_search_data_free (gpointer _data) {
	PantherBackendSynapseSearchSearchData* _data_;
	_data_ = _data;
	_g_free0 (_data_->text);
	_g_object_unref0 (_data_->provider);
	_g_object_unref0 (_data_->result);
	_g_object_unref0 (_data_->self);
	g_slice_free (PantherBackendSynapseSearchSearchData, _data_);
}


static gpointer _g_object_ref0 (gpointer self) {
	return self ? g_object_ref (self) : NULL;
}


void panther_backend_synapse_search_search (PantherBackendSynapseSearch* self, const gchar* text, SynapseSearchProvider* provider, GAsyncReadyCallback _callback_, gpointer _user_data_) {
	PantherBackendSynapseSearchSearchData* _data_;
	PantherBackendSynapseSearch* _tmp0_ = NULL;
	const gchar* _tmp1_ = NULL;
	gchar* _tmp2_ = NULL;
	SynapseSearchProvider* _tmp3_ = NULL;
	SynapseSearchProvider* _tmp4_ = NULL;
	_data_ = g_slice_new0 (PantherBackendSynapseSearchSearchData);
	_data_->_async_result = g_simple_async_result_new (G_OBJECT (self), _callback_, _user_data_, panther_backend_synapse_search_search);
	g_simple_async_result_set_op_res_gpointer (_data_->_async_result, _data_, panther_backend_synapse_search_search_data_free);
	_tmp0_ = _g_object_ref0 (self);
	_data_->self = _tmp0_;
	_tmp1_ = text;
	_tmp2_ = g_strdup (_tmp1_);
	_g_free0 (_data_->text);
	_data_->text = _tmp2_;
	_tmp3_ = provider;
	_tmp4_ = _g_object_ref0 (_tmp3_);
	_g_object_unref0 (_data_->provider);
	_data_->provider = _tmp4_;
	panther_backend_synapse_search_search_co (_data_);
}


GeeList* panther_backend_synapse_search_search_finish (PantherBackendSynapseSearch* self, GAsyncResult* _res_) {
	GeeList* result;
	PantherBackendSynapseSearchSearchData* _data_;
	_data_ = g_simple_async_result_get_op_res_gpointer (G_SIMPLE_ASYNC_RESULT (_res_));
	result = _data_->result;
	_data_->result = NULL;
	return result;
}


static void panther_backend_synapse_search_search_ready (GObject* source_object, GAsyncResult* _res_, gpointer _user_data_) {
	PantherBackendSynapseSearchSearchData* _data_;
	_data_ = _user_data_;
	_data_->_source_object_ = source_object;
	_data_->_res_ = _res_;
	panther_backend_synapse_search_search_co (_data_);
}


static gboolean panther_backend_synapse_search_search_co (PantherBackendSynapseSearchSearchData* _data_) {
	switch (_data_->_state_) {
		case 0:
		goto _state_0;
		case 1:
		goto _state_1;
		default:
		g_assert_not_reached ();
	}
	_state_0:
	_data_->_tmp0_ = NULL;
	_data_->_tmp0_ = _data_->self->priv->current_search;
	if (_data_->_tmp0_ != NULL) {
		_data_->_tmp1_ = NULL;
		_data_->_tmp1_ = _data_->self->priv->current_search;
		g_cancellable_cancel (_data_->_tmp1_);
	}
	_data_->_tmp2_ = NULL;
	_data_->_tmp2_ = _data_->provider;
	if (_data_->_tmp2_ == NULL) {
		SynapseSearchProvider* _tmp4_ = NULL;
		_data_->_tmp3_ = NULL;
		_data_->_tmp3_ = panther_backend_synapse_search_sink;
		_tmp4_ = _g_object_ref0 ((SynapseSearchProvider*) _data_->_tmp3_);
		_g_object_unref0 (_data_->provider);
		_data_->provider = _tmp4_;
	}
	_data_->_tmp5_ = NULL;
	_data_->_tmp5_ = synapse_result_set_new ();
	_data_->results = _data_->_tmp5_;
	{
		_data_->_tmp7_ = NULL;
		_data_->_tmp7_ = _data_->provider;
		_data_->_tmp8_ = NULL;
		_data_->_tmp8_ = _data_->text;
		_data_->_tmp9_ = NULL;
		_data_->_tmp9_ = _data_->self->priv->current_search;
		_data_->_state_ = 1;
		synapse_search_provider_search (_data_->_tmp7_, _data_->_tmp8_, SYNAPSE_QUERY_FLAGS_ALL, _data_->results, _data_->_tmp9_, panther_backend_synapse_search_search_ready, _data_);
		return FALSE;
		_state_1:
		_data_->_tmp10_ = NULL;
		_data_->_tmp10_ = synapse_search_provider_search_finish (_data_->_tmp7_, _data_->_res_, &_data_->_inner_error_);
		_data_->_tmp6_ = _data_->_tmp10_;
		if (G_UNLIKELY (_data_->_inner_error_ != NULL)) {
			goto __catch12_g_error;
		}
		_data_->_tmp11_ = NULL;
		_data_->_tmp11_ = _data_->_tmp6_;
		_data_->_tmp6_ = NULL;
		_data_->result = _data_->_tmp11_;
		_g_object_unref0 (_data_->_tmp6_);
		_g_object_unref0 (_data_->results);
		if (_data_->_state_ == 0) {
			g_simple_async_result_complete_in_idle (_data_->_async_result);
		} else {
			g_simple_async_result_complete (_data_->_async_result);
		}
		g_object_unref (_data_->_async_result);
		return FALSE;
	}
	goto __finally12;
	__catch12_g_error:
	{
		_data_->e = _data_->_inner_error_;
		_data_->_inner_error_ = NULL;
		_data_->_tmp12_ = NULL;
		_data_->_tmp12_ = _data_->e;
		_data_->_tmp13_ = NULL;
		_data_->_tmp13_ = _data_->_tmp12_->message;
		g_warning ("SynapseSearch.vala:61: %s", _data_->_tmp13_);
		_g_error_free0 (_data_->e);
	}
	__finally12:
	if (G_UNLIKELY (_data_->_inner_error_ != NULL)) {
		_g_object_unref0 (_data_->results);
		g_critical ("file %s: line %d: uncaught error: %s (%s, %d)", __FILE__, __LINE__, _data_->_inner_error_->message, g_quark_to_string (_data_->_inner_error_->domain), _data_->_inner_error_->code);
		g_clear_error (&_data_->_inner_error_);
		return FALSE;
	}
	_data_->result = NULL;
	_g_object_unref0 (_data_->results);
	if (_data_->_state_ == 0) {
		g_simple_async_result_complete_in_idle (_data_->_async_result);
	} else {
		g_simple_async_result_complete (_data_->_async_result);
	}
	g_object_unref (_data_->_async_result);
	return FALSE;
	_g_object_unref0 (_data_->results);
	if (_data_->_state_ == 0) {
		g_simple_async_result_complete_in_idle (_data_->_async_result);
	} else {
		g_simple_async_result_complete (_data_->_async_result);
	}
	g_object_unref (_data_->_async_result);
	return FALSE;
}


GeeList* panther_backend_synapse_search_find_actions_for_match (SynapseMatch* match) {
	GeeList* result = NULL;
	SynapseDataSink* _tmp0_ = NULL;
	SynapseMatch* _tmp1_ = NULL;
	GeeList* _tmp2_ = NULL;
	g_return_val_if_fail (match != NULL, NULL);
	_tmp0_ = panther_backend_synapse_search_sink;
	_tmp1_ = match;
	_tmp2_ = synapse_data_sink_find_actions_for_match (_tmp0_, _tmp1_, NULL, SYNAPSE_QUERY_FLAGS_ALL);
	result = _tmp2_;
	return result;
}


static void panther_backend_synapse_search_get_favicon_for_match_data_free (gpointer _data) {
	PantherBackendSynapseSearchGetFaviconForMatchData* _data_;
	_data_ = _data;
	_g_object_unref0 (_data_->match);
	_g_object_unref0 (_data_->cancellable);
	_g_object_unref0 (_data_->result);
	g_slice_free (PantherBackendSynapseSearchGetFaviconForMatchData, _data_);
}


void panther_backend_synapse_search_get_favicon_for_match (SynapseUriMatch* match, gint size, GCancellable* cancellable, GAsyncReadyCallback _callback_, gpointer _user_data_) {
	PantherBackendSynapseSearchGetFaviconForMatchData* _data_;
	SynapseUriMatch* _tmp0_ = NULL;
	SynapseUriMatch* _tmp1_ = NULL;
	gint _tmp2_ = 0;
	GCancellable* _tmp3_ = NULL;
	GCancellable* _tmp4_ = NULL;
	_data_ = g_slice_new0 (PantherBackendSynapseSearchGetFaviconForMatchData);
	_data_->_async_result = g_simple_async_result_new (NULL, _callback_, _user_data_, panther_backend_synapse_search_get_favicon_for_match);
	g_simple_async_result_set_op_res_gpointer (_data_->_async_result, _data_, panther_backend_synapse_search_get_favicon_for_match_data_free);
	_tmp0_ = match;
	_tmp1_ = _g_object_ref0 (_tmp0_);
	_g_object_unref0 (_data_->match);
	_data_->match = _tmp1_;
	_tmp2_ = size;
	_data_->size = _tmp2_;
	_tmp3_ = cancellable;
	_tmp4_ = _g_object_ref0 (_tmp3_);
	_g_object_unref0 (_data_->cancellable);
	_data_->cancellable = _tmp4_;
	panther_backend_synapse_search_get_favicon_for_match_co (_data_);
}


GdkPixbuf* panther_backend_synapse_search_get_favicon_for_match_finish (GAsyncResult* _res_) {
	GdkPixbuf* result;
	PantherBackendSynapseSearchGetFaviconForMatchData* _data_;
	_data_ = g_simple_async_result_get_op_res_gpointer (G_SIMPLE_ASYNC_RESULT (_res_));
	result = _data_->result;
	_data_->result = NULL;
	return result;
}


/**
         * Attempts to load a favicon for an UriMatch and caches the icon
         *
         * @param match       The UriMatch
         * @param size        The icon size at which to load the icon. If the favicon is smaller than
         *                    that size, null will be returned
         * @param cancellable Cancellable for the loading operations
         * @return            The pixbuf or null if loading failed or the icon was too small
         */
static void _vala_SoupURI_free (SoupURI* self) {
	g_boxed_free (soup_uri_get_type (), self);
}


static void panther_backend_synapse_search_get_favicon_for_match_ready (GObject* source_object, GAsyncResult* _res_, gpointer _user_data_) {
	PantherBackendSynapseSearchGetFaviconForMatchData* _data_;
	_data_ = _user_data_;
	_data_->_source_object_ = source_object;
	_data_->_res_ = _res_;
	panther_backend_synapse_search_get_favicon_for_match_co (_data_);
}


static gboolean panther_backend_synapse_search_get_favicon_for_match_co (PantherBackendSynapseSearchGetFaviconForMatchData* _data_) {
	switch (_data_->_state_) {
		case 0:
		goto _state_0;
		case 1:
		goto _state_1;
		case 2:
		goto _state_2;
		default:
		g_assert_not_reached ();
	}
	_state_0:
	_data_->_tmp0_ = NULL;
	_data_->_tmp0_ = _data_->match;
	_data_->_tmp1_ = NULL;
	_data_->_tmp1_ = synapse_uri_match_get_uri (_data_->_tmp0_);
	_data_->_tmp2_ = NULL;
	_data_->_tmp2_ = _data_->_tmp1_;
	_data_->_tmp3_ = NULL;
	_data_->_tmp3_ = soup_uri_new (_data_->_tmp2_);
	_data_->soup_uri = _data_->_tmp3_;
	_data_->_tmp4_ = NULL;
	_data_->_tmp4_ = _data_->soup_uri;
	_data_->_tmp5_ = NULL;
	_data_->_tmp5_ = _data_->_tmp4_->scheme;
	_data_->_tmp6_ = FALSE;
	_data_->_tmp6_ = g_str_has_prefix (_data_->_tmp5_, "http");
	if (!_data_->_tmp6_) {
		_data_->result = NULL;
		__vala_SoupURI_free0 (_data_->soup_uri);
		if (_data_->_state_ == 0) {
			g_simple_async_result_complete_in_idle (_data_->_async_result);
		} else {
			g_simple_async_result_complete (_data_->_async_result);
		}
		g_object_unref (_data_->_async_result);
		return FALSE;
	}
	_data_->pixbuf = NULL;
	_data_->_tmp7_ = NULL;
	_data_->_tmp7_ = panther_backend_synapse_search_favicon_cache;
	_data_->_tmp8_ = NULL;
	_data_->_tmp8_ = _data_->soup_uri;
	_data_->_tmp9_ = NULL;
	_data_->_tmp9_ = _data_->_tmp8_->host;
	_data_->_tmp10_ = FALSE;
	_data_->_tmp10_ = gee_abstract_map_has_key ((GeeAbstractMap*) _data_->_tmp7_, _data_->_tmp9_);
	if (_data_->_tmp10_) {
		_data_->_tmp11_ = NULL;
		_data_->_tmp11_ = panther_backend_synapse_search_favicon_cache;
		_data_->_tmp12_ = NULL;
		_data_->_tmp12_ = _data_->soup_uri;
		_data_->_tmp13_ = NULL;
		_data_->_tmp13_ = _data_->_tmp12_->host;
		_data_->_tmp14_ = NULL;
		_data_->_tmp14_ = gee_abstract_map_get ((GeeAbstractMap*) _data_->_tmp11_, _data_->_tmp13_);
		_data_->result = (GdkPixbuf*) _data_->_tmp14_;
		_g_object_unref0 (_data_->pixbuf);
		__vala_SoupURI_free0 (_data_->soup_uri);
		if (_data_->_state_ == 0) {
			g_simple_async_result_complete_in_idle (_data_->_async_result);
		} else {
			g_simple_async_result_complete (_data_->_async_result);
		}
		g_object_unref (_data_->_async_result);
		return FALSE;
	}
	_data_->_tmp15_ = NULL;
	_data_->_tmp15_ = _data_->soup_uri;
	_data_->_tmp16_ = NULL;
	_data_->_tmp16_ = _data_->_tmp15_->scheme;
	_data_->_tmp17_ = NULL;
	_data_->_tmp17_ = _data_->soup_uri;
	_data_->_tmp18_ = NULL;
	_data_->_tmp18_ = _data_->_tmp17_->host;
	_data_->_tmp19_ = NULL;
	_data_->_tmp19_ = g_strdup_printf ("%s://%s/favicon.ico", _data_->_tmp16_, _data_->_tmp18_);
	_data_->url = _data_->_tmp19_;
	_data_->_tmp20_ = NULL;
	_data_->_tmp20_ = _data_->url;
	_data_->_tmp21_ = NULL;
	_data_->_tmp21_ = soup_message_new ("GET", _data_->_tmp20_);
	_data_->msg = _data_->_tmp21_;
	_data_->_tmp22_ = NULL;
	_data_->_tmp22_ = soup_session_new ();
	_data_->session = _data_->_tmp22_;
	_data_->_tmp23_ = NULL;
	_data_->_tmp23_ = _data_->session;
	g_object_set (_data_->_tmp23_, "use-thread-context", TRUE, NULL);
	{
		_data_->_tmp24_ = NULL;
		_data_->_tmp24_ = _data_->session;
		_data_->_tmp25_ = NULL;
		_data_->_tmp25_ = _data_->msg;
		_data_->_tmp26_ = NULL;
		_data_->_tmp26_ = _data_->cancellable;
		_data_->_state_ = 1;
		soup_session_send_async (_data_->_tmp24_, _data_->_tmp25_, _data_->_tmp26_, panther_backend_synapse_search_get_favicon_for_match_ready, _data_);
		return FALSE;
		_state_1:
		_data_->_tmp27_ = NULL;
		_data_->_tmp27_ = soup_session_send_finish (_data_->_tmp24_, _data_->_res_, &_data_->_inner_error_);
		_data_->stream = _data_->_tmp27_;
		if (G_UNLIKELY (_data_->_inner_error_ != NULL)) {
			goto __catch13_g_error;
		}
		_data_->_tmp28_ = NULL;
		_data_->_tmp28_ = _data_->stream;
		if (_data_->_tmp28_ != NULL) {
			_data_->_tmp30_ = NULL;
			_data_->_tmp30_ = _data_->stream;
			_data_->_tmp31_ = NULL;
			_data_->_tmp31_ = _data_->cancellable;
			_data_->_state_ = 2;
			gdk_pixbuf_new_from_stream_async (_data_->_tmp30_, _data_->_tmp31_, panther_backend_synapse_search_get_favicon_for_match_ready, _data_);
			return FALSE;
			_state_2:
			_data_->_tmp32_ = NULL;
			_data_->_tmp32_ = gdk_pixbuf_new_from_stream_finish (_data_->_res_, &_data_->_inner_error_);
			_data_->_tmp29_ = _data_->_tmp32_;
			if (G_UNLIKELY (_data_->_inner_error_ != NULL)) {
				_g_object_unref0 (_data_->stream);
				goto __catch13_g_error;
			}
			_data_->_tmp33_ = NULL;
			_data_->_tmp33_ = _data_->_tmp29_;
			_data_->_tmp29_ = NULL;
			_g_object_unref0 (_data_->pixbuf);
			_data_->pixbuf = _data_->_tmp33_;
			_data_->_tmp34_ = NULL;
			_data_->_tmp34_ = _data_->pixbuf;
			_data_->_tmp35_ = 0;
			_data_->_tmp35_ = gdk_pixbuf_get_width (_data_->_tmp34_);
			_data_->_tmp36_ = 0;
			_data_->_tmp36_ = _data_->_tmp35_;
			_data_->_tmp37_ = 0;
			_data_->_tmp37_ = _data_->size;
			if (_data_->_tmp36_ < _data_->_tmp37_) {
				_g_object_unref0 (_data_->pixbuf);
				_data_->pixbuf = NULL;
			}
			_g_object_unref0 (_data_->_tmp29_);
		}
		_g_object_unref0 (_data_->stream);
	}
	goto __finally13;
	__catch13_g_error:
	{
		_data_->e = _data_->_inner_error_;
		_data_->_inner_error_ = NULL;
		_g_error_free0 (_data_->e);
	}
	__finally13:
	if (G_UNLIKELY (_data_->_inner_error_ != NULL)) {
		_g_object_unref0 (_data_->session);
		_g_object_unref0 (_data_->msg);
		_g_free0 (_data_->url);
		_g_object_unref0 (_data_->pixbuf);
		__vala_SoupURI_free0 (_data_->soup_uri);
		g_critical ("file %s: line %d: uncaught error: %s (%s, %d)", __FILE__, __LINE__, _data_->_inner_error_->message, g_quark_to_string (_data_->_inner_error_->domain), _data_->_inner_error_->code);
		g_clear_error (&_data_->_inner_error_);
		return FALSE;
	}
	_data_->_tmp38_ = NULL;
	_data_->_tmp38_ = _data_->cancellable;
	_data_->_tmp39_ = FALSE;
	_data_->_tmp39_ = g_cancellable_is_cancelled (_data_->_tmp38_);
	if (_data_->_tmp39_) {
		_data_->result = NULL;
		_g_object_unref0 (_data_->session);
		_g_object_unref0 (_data_->msg);
		_g_free0 (_data_->url);
		_g_object_unref0 (_data_->pixbuf);
		__vala_SoupURI_free0 (_data_->soup_uri);
		if (_data_->_state_ == 0) {
			g_simple_async_result_complete_in_idle (_data_->_async_result);
		} else {
			g_simple_async_result_complete (_data_->_async_result);
		}
		g_object_unref (_data_->_async_result);
		return FALSE;
	}
	_data_->_tmp40_ = NULL;
	_data_->_tmp40_ = panther_backend_synapse_search_favicon_cache;
	_data_->_tmp41_ = NULL;
	_data_->_tmp41_ = _data_->soup_uri;
	_data_->_tmp42_ = NULL;
	_data_->_tmp42_ = _data_->_tmp41_->host;
	_data_->_tmp43_ = NULL;
	_data_->_tmp43_ = _data_->pixbuf;
	gee_abstract_map_set ((GeeAbstractMap*) _data_->_tmp40_, _data_->_tmp42_, _data_->_tmp43_);
	_data_->result = _data_->pixbuf;
	_g_object_unref0 (_data_->session);
	_g_object_unref0 (_data_->msg);
	_g_free0 (_data_->url);
	__vala_SoupURI_free0 (_data_->soup_uri);
	if (_data_->_state_ == 0) {
		g_simple_async_result_complete_in_idle (_data_->_async_result);
	} else {
		g_simple_async_result_complete (_data_->_async_result);
	}
	g_object_unref (_data_->_async_result);
	return FALSE;
	_g_object_unref0 (_data_->session);
	_g_object_unref0 (_data_->msg);
	_g_free0 (_data_->url);
	_g_object_unref0 (_data_->pixbuf);
	__vala_SoupURI_free0 (_data_->soup_uri);
	if (_data_->_state_ == 0) {
		g_simple_async_result_complete_in_idle (_data_->_async_result);
	} else {
		g_simple_async_result_complete (_data_->_async_result);
	}
	g_object_unref (_data_->_async_result);
	return FALSE;
}


static glong string_strnlen (gchar* str, glong maxlen) {
	glong result = 0L;
	gchar* end = NULL;
	gchar* _tmp0_ = NULL;
	glong _tmp1_ = 0L;
	gchar* _tmp2_ = NULL;
	gchar* _tmp3_ = NULL;
	_tmp0_ = str;
	_tmp1_ = maxlen;
	_tmp2_ = memchr (_tmp0_, 0, (gsize) _tmp1_);
	end = _tmp2_;
	_tmp3_ = end;
	if (_tmp3_ == NULL) {
		glong _tmp4_ = 0L;
		_tmp4_ = maxlen;
		result = _tmp4_;
		return result;
	} else {
		gchar* _tmp5_ = NULL;
		gchar* _tmp6_ = NULL;
		_tmp5_ = end;
		_tmp6_ = str;
		result = (glong) (_tmp5_ - _tmp6_);
		return result;
	}
}


static gchar* string_substring (const gchar* self, glong offset, glong len) {
	gchar* result = NULL;
	glong string_length = 0L;
	gboolean _tmp0_ = FALSE;
	glong _tmp1_ = 0L;
	glong _tmp8_ = 0L;
	glong _tmp14_ = 0L;
	glong _tmp17_ = 0L;
	glong _tmp18_ = 0L;
	glong _tmp19_ = 0L;
	glong _tmp20_ = 0L;
	glong _tmp21_ = 0L;
	gchar* _tmp22_ = NULL;
	g_return_val_if_fail (self != NULL, NULL);
	_tmp1_ = offset;
	if (_tmp1_ >= ((glong) 0)) {
		glong _tmp2_ = 0L;
		_tmp2_ = len;
		_tmp0_ = _tmp2_ >= ((glong) 0);
	} else {
		_tmp0_ = FALSE;
	}
	if (_tmp0_) {
		glong _tmp3_ = 0L;
		glong _tmp4_ = 0L;
		glong _tmp5_ = 0L;
		_tmp3_ = offset;
		_tmp4_ = len;
		_tmp5_ = string_strnlen ((gchar*) self, _tmp3_ + _tmp4_);
		string_length = _tmp5_;
	} else {
		gint _tmp6_ = 0;
		gint _tmp7_ = 0;
		_tmp6_ = strlen (self);
		_tmp7_ = _tmp6_;
		string_length = (glong) _tmp7_;
	}
	_tmp8_ = offset;
	if (_tmp8_ < ((glong) 0)) {
		glong _tmp9_ = 0L;
		glong _tmp10_ = 0L;
		glong _tmp11_ = 0L;
		_tmp9_ = string_length;
		_tmp10_ = offset;
		offset = _tmp9_ + _tmp10_;
		_tmp11_ = offset;
		g_return_val_if_fail (_tmp11_ >= ((glong) 0), NULL);
	} else {
		glong _tmp12_ = 0L;
		glong _tmp13_ = 0L;
		_tmp12_ = offset;
		_tmp13_ = string_length;
		g_return_val_if_fail (_tmp12_ <= _tmp13_, NULL);
	}
	_tmp14_ = len;
	if (_tmp14_ < ((glong) 0)) {
		glong _tmp15_ = 0L;
		glong _tmp16_ = 0L;
		_tmp15_ = string_length;
		_tmp16_ = offset;
		len = _tmp15_ - _tmp16_;
	}
	_tmp17_ = offset;
	_tmp18_ = len;
	_tmp19_ = string_length;
	g_return_val_if_fail ((_tmp17_ + _tmp18_) <= _tmp19_, NULL);
	_tmp20_ = offset;
	_tmp21_ = len;
	_tmp22_ = g_strndup (((gchar*) self) + _tmp20_, (gsize) _tmp21_);
	result = _tmp22_;
	return result;
}


gchar* panther_backend_synapse_search_markup_string_with_search (const gchar* text, const gchar* pattern) {
	gchar* result = NULL;
	gchar* markup = NULL;
	gchar* _tmp0_ = NULL;
	const gchar* _tmp1_ = NULL;
	const gchar* _tmp8_ = NULL;
	GeeList* matchers = NULL;
	const gchar* _tmp15_ = NULL;
	GeeList* _tmp16_ = NULL;
	gchar* highlighted = NULL;
	const gchar* _tmp77_ = NULL;
	g_return_val_if_fail (text != NULL, NULL);
	g_return_val_if_fail (pattern != NULL, NULL);
	_tmp0_ = g_strdup ("%s");
	markup = _tmp0_;
	_tmp1_ = pattern;
	if (g_strcmp0 (_tmp1_, "") == 0) {
		const gchar* _tmp2_ = NULL;
		const gchar* _tmp3_ = NULL;
		gchar* _tmp4_ = NULL;
		gchar* _tmp5_ = NULL;
		gchar* _tmp6_ = NULL;
		gchar* _tmp7_ = NULL;
		_tmp2_ = markup;
		_tmp3_ = text;
		_tmp4_ = g_markup_escape_text (_tmp3_, (gssize) -1);
		_tmp5_ = _tmp4_;
		_tmp6_ = g_strdup_printf (_tmp2_, _tmp5_);
		_tmp7_ = _tmp6_;
		_g_free0 (_tmp5_);
		result = _tmp7_;
		_g_free0 (markup);
		return result;
	}
	_tmp8_ = text;
	if (g_strcmp0 (_tmp8_, "") == 0) {
		const gchar* _tmp9_ = NULL;
		const gchar* _tmp10_ = NULL;
		gchar* _tmp11_ = NULL;
		gchar* _tmp12_ = NULL;
		gchar* _tmp13_ = NULL;
		gchar* _tmp14_ = NULL;
		_tmp9_ = markup;
		_tmp10_ = pattern;
		_tmp11_ = g_markup_escape_text (_tmp10_, (gssize) -1);
		_tmp12_ = _tmp11_;
		_tmp13_ = g_strdup_printf (_tmp9_, _tmp12_);
		_tmp14_ = _tmp13_;
		_g_free0 (_tmp12_);
		result = _tmp14_;
		_g_free0 (markup);
		return result;
	}
	_tmp15_ = pattern;
	_tmp16_ = synapse_query_get_matchers_for_query (_tmp15_, 0, G_REGEX_OPTIMIZE | G_REGEX_CASELESS);
	matchers = _tmp16_;
	highlighted = NULL;
	{
		GeeList* _matcher_list = NULL;
		GeeList* _tmp17_ = NULL;
		GeeList* _tmp18_ = NULL;
		gint _matcher_size = 0;
		GeeList* _tmp19_ = NULL;
		gint _tmp20_ = 0;
		gint _tmp21_ = 0;
		gint _matcher_index = 0;
		_tmp17_ = matchers;
		_tmp18_ = _g_object_ref0 (_tmp17_);
		_matcher_list = _tmp18_;
		_tmp19_ = _matcher_list;
		_tmp20_ = gee_collection_get_size ((GeeCollection*) _tmp19_);
		_tmp21_ = _tmp20_;
		_matcher_size = _tmp21_;
		_matcher_index = -1;
		while (TRUE) {
			gint _tmp22_ = 0;
			gint _tmp23_ = 0;
			gint _tmp24_ = 0;
			GeeMapEntry* matcher = NULL;
			GeeList* _tmp25_ = NULL;
			gint _tmp26_ = 0;
			gpointer _tmp27_ = NULL;
			GMatchInfo* mi = NULL;
			GeeMapEntry* _tmp28_ = NULL;
			gconstpointer _tmp29_ = NULL;
			GRegex* _tmp30_ = NULL;
			const gchar* _tmp31_ = NULL;
			GMatchInfo* _tmp32_ = NULL;
			gboolean _tmp33_ = FALSE;
			_tmp22_ = _matcher_index;
			_matcher_index = _tmp22_ + 1;
			_tmp23_ = _matcher_index;
			_tmp24_ = _matcher_size;
			if (!(_tmp23_ < _tmp24_)) {
				break;
			}
			_tmp25_ = _matcher_list;
			_tmp26_ = _matcher_index;
			_tmp27_ = gee_list_get (_tmp25_, _tmp26_);
			matcher = (GeeMapEntry*) _tmp27_;
			_tmp28_ = matcher;
			_tmp29_ = gee_map_entry_get_key (_tmp28_);
			_tmp30_ = _tmp29_;
			_tmp31_ = text;
			_tmp33_ = g_regex_match ((GRegex*) _tmp30_, _tmp31_, 0, &_tmp32_);
			_g_match_info_free0 (mi);
			mi = _tmp32_;
			if (_tmp33_) {
				gint start_pos = 0;
				gint end_pos = 0;
				gint last_pos = 0;
				gint cnt = 0;
				GMatchInfo* _tmp34_ = NULL;
				gint _tmp35_ = 0;
				GString* res = NULL;
				GString* _tmp36_ = NULL;
				GString* _tmp74_ = NULL;
				const gchar* _tmp75_ = NULL;
				gchar* _tmp76_ = NULL;
				last_pos = 0;
				_tmp34_ = mi;
				_tmp35_ = g_match_info_get_match_count (_tmp34_);
				cnt = _tmp35_;
				_tmp36_ = g_string_new ("");
				res = _tmp36_;
				{
					gint i = 0;
					i = 1;
					{
						gboolean _tmp37_ = FALSE;
						_tmp37_ = TRUE;
						while (TRUE) {
							gint _tmp39_ = 0;
							gint _tmp40_ = 0;
							GMatchInfo* _tmp41_ = NULL;
							gint _tmp42_ = 0;
							gint _tmp43_ = 0;
							gint _tmp44_ = 0;
							gboolean _tmp45_ = FALSE;
							gint _tmp46_ = 0;
							GString* _tmp48_ = NULL;
							const gchar* _tmp49_ = NULL;
							gint _tmp50_ = 0;
							gint _tmp51_ = 0;
							gint _tmp52_ = 0;
							gchar* _tmp53_ = NULL;
							gchar* _tmp54_ = NULL;
							gchar* _tmp55_ = NULL;
							gchar* _tmp56_ = NULL;
							gint _tmp57_ = 0;
							GString* _tmp58_ = NULL;
							GMatchInfo* _tmp59_ = NULL;
							gint _tmp60_ = 0;
							gchar* _tmp61_ = NULL;
							gchar* _tmp62_ = NULL;
							gchar* _tmp63_ = NULL;
							gchar* _tmp64_ = NULL;
							gint _tmp65_ = 0;
							gint _tmp66_ = 0;
							if (!_tmp37_) {
								gint _tmp38_ = 0;
								_tmp38_ = i;
								i = _tmp38_ + 1;
							}
							_tmp37_ = FALSE;
							_tmp39_ = i;
							_tmp40_ = cnt;
							if (!(_tmp39_ < _tmp40_)) {
								break;
							}
							_tmp41_ = mi;
							_tmp42_ = i;
							g_match_info_fetch_pos (_tmp41_, _tmp42_, &_tmp43_, &_tmp44_);
							start_pos = _tmp43_;
							end_pos = _tmp44_;
							_tmp46_ = start_pos;
							if (_tmp46_ >= 0) {
								gint _tmp47_ = 0;
								_tmp47_ = end_pos;
								_tmp45_ = _tmp47_ >= 0;
							} else {
								_tmp45_ = FALSE;
							}
							g_warn_if_fail (_tmp45_);
							_tmp48_ = res;
							_tmp49_ = text;
							_tmp50_ = last_pos;
							_tmp51_ = start_pos;
							_tmp52_ = last_pos;
							_tmp53_ = string_substring (_tmp49_, (glong) _tmp50_, (glong) (_tmp51_ - _tmp52_));
							_tmp54_ = _tmp53_;
							_tmp55_ = g_markup_escape_text (_tmp54_, (gssize) -1);
							_tmp56_ = _tmp55_;
							g_string_append (_tmp48_, _tmp56_);
							_g_free0 (_tmp56_);
							_g_free0 (_tmp54_);
							_tmp57_ = end_pos;
							last_pos = _tmp57_;
							_tmp58_ = res;
							_tmp59_ = mi;
							_tmp60_ = i;
							_tmp61_ = g_match_info_fetch (_tmp59_, _tmp60_);
							_tmp62_ = _tmp61_;
							_tmp63_ = g_markup_printf_escaped ("<b>%s</b>", _tmp62_);
							_tmp64_ = _tmp63_;
							g_string_append (_tmp58_, _tmp64_);
							_g_free0 (_tmp64_);
							_g_free0 (_tmp62_);
							_tmp65_ = i;
							_tmp66_ = cnt;
							if (_tmp65_ == (_tmp66_ - 1)) {
								GString* _tmp67_ = NULL;
								const gchar* _tmp68_ = NULL;
								gint _tmp69_ = 0;
								gchar* _tmp70_ = NULL;
								gchar* _tmp71_ = NULL;
								gchar* _tmp72_ = NULL;
								gchar* _tmp73_ = NULL;
								_tmp67_ = res;
								_tmp68_ = text;
								_tmp69_ = last_pos;
								_tmp70_ = string_substring (_tmp68_, (glong) _tmp69_, (glong) -1);
								_tmp71_ = _tmp70_;
								_tmp72_ = g_markup_escape_text (_tmp71_, (gssize) -1);
								_tmp73_ = _tmp72_;
								g_string_append (_tmp67_, _tmp73_);
								_g_free0 (_tmp73_);
								_g_free0 (_tmp71_);
							}
						}
					}
				}
				_tmp74_ = res;
				_tmp75_ = _tmp74_->str;
				_tmp76_ = g_strdup (_tmp75_);
				_g_free0 (highlighted);
				highlighted = _tmp76_;
				_g_string_free0 (res);
				_g_match_info_free0 (mi);
				_g_object_unref0 (matcher);
				break;
			}
			_g_match_info_free0 (mi);
			_g_object_unref0 (matcher);
		}
		_g_object_unref0 (_matcher_list);
	}
	_tmp77_ = highlighted;
	if (_tmp77_ != NULL) {
		const gchar* _tmp78_ = NULL;
		const gchar* _tmp79_ = NULL;
		gchar* _tmp80_ = NULL;
		_tmp78_ = markup;
		_tmp79_ = highlighted;
		_tmp80_ = g_strdup_printf (_tmp78_, _tmp79_);
		result = _tmp80_;
		_g_free0 (highlighted);
		_g_object_unref0 (matchers);
		_g_free0 (markup);
		return result;
	} else {
		const gchar* _tmp81_ = NULL;
		const gchar* _tmp82_ = NULL;
		gchar* _tmp83_ = NULL;
		gchar* _tmp84_ = NULL;
		gchar* _tmp85_ = NULL;
		gchar* _tmp86_ = NULL;
		_tmp81_ = markup;
		_tmp82_ = text;
		_tmp83_ = g_markup_escape_text (_tmp82_, (gssize) -1);
		_tmp84_ = _tmp83_;
		_tmp85_ = g_strdup_printf (_tmp81_, _tmp84_);
		_tmp86_ = _tmp85_;
		_g_free0 (_tmp84_);
		result = _tmp86_;
		_g_free0 (highlighted);
		_g_object_unref0 (matchers);
		_g_free0 (markup);
		return result;
	}
	_g_free0 (highlighted);
	_g_object_unref0 (matchers);
	_g_free0 (markup);
}


static void panther_backend_synapse_search_class_init (PantherBackendSynapseSearchClass * klass) {
	GType* _tmp0_ = NULL;
	panther_backend_synapse_search_parent_class = g_type_class_peek_parent (klass);
	g_type_class_add_private (klass, sizeof (PantherBackendSynapseSearchPrivate));
	G_OBJECT_CLASS (klass)->finalize = panther_backend_synapse_search_finalize;
	_tmp0_ = g_new0 (GType, 4);
	_tmp0_[0] = SYNAPSE_TYPE_CALCULATOR_PLUGIN;
	_tmp0_[1] = SYNAPSE_TYPE_COMMAND_PLUGIN;
	_tmp0_[2] = SYNAPSE_TYPE_DESKTOP_FILE_PLUGIN;
	_tmp0_[3] = SYNAPSE_TYPE_SYSTEM_MANAGEMENT_PLUGIN;
	panther_backend_synapse_search_plugins = _tmp0_;
	panther_backend_synapse_search_plugins_length1 = 4;
}


static void panther_backend_synapse_search_instance_init (PantherBackendSynapseSearch * self) {
	self->priv = PANTHER_BACKEND_SYNAPSE_SEARCH_GET_PRIVATE (self);
	self->priv->current_search = NULL;
}


static void panther_backend_synapse_search_finalize (GObject* obj) {
	PantherBackendSynapseSearch * self;
	self = G_TYPE_CHECK_INSTANCE_CAST (obj, PANTHER_BACKEND_TYPE_SYNAPSE_SEARCH, PantherBackendSynapseSearch);
	_g_object_unref0 (self->priv->current_search);
	G_OBJECT_CLASS (panther_backend_synapse_search_parent_class)->finalize (obj);
}


GType panther_backend_synapse_search_get_type (void) {
	static volatile gsize panther_backend_synapse_search_type_id__volatile = 0;
	if (g_once_init_enter (&panther_backend_synapse_search_type_id__volatile)) {
		static const GTypeInfo g_define_type_info = { sizeof (PantherBackendSynapseSearchClass), (GBaseInitFunc) NULL, (GBaseFinalizeFunc) NULL, (GClassInitFunc) panther_backend_synapse_search_class_init, (GClassFinalizeFunc) NULL, NULL, sizeof (PantherBackendSynapseSearch), 0, (GInstanceInitFunc) panther_backend_synapse_search_instance_init, NULL };
		GType panther_backend_synapse_search_type_id;
		panther_backend_synapse_search_type_id = g_type_register_static (G_TYPE_OBJECT, "PantherBackendSynapseSearch", &g_define_type_info, 0);
		g_once_init_leave (&panther_backend_synapse_search_type_id__volatile, panther_backend_synapse_search_type_id);
	}
	return panther_backend_synapse_search_type_id__volatile;
}



